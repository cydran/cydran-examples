{"version":3,"sources":["webpack://cydran/webpack/universalModuleDefinition","webpack://cydran/webpack/bootstrap","webpack://cydran/./src/Core.ts","webpack://cydran/./src/error/AbstractCydranError.ts","webpack://cydran/./src/logger/LoggerFactory.ts","webpack://cydran/./src/logger/Level.ts","webpack://cydran/./src/ObjectUtils.ts","webpack://cydran/./src/ComponentConfig.ts","webpack://cydran/./src/Getter.ts","webpack://cydran/./src/logger/LoggerImpl.ts","webpack://cydran/./src/logger/LoggerService.ts","webpack://cydran/./src/Setter.ts","webpack://cydran/./src/messaging/PubSub.ts","webpack://cydran/(webpack)/buildin/global.js","webpack://cydran/./src/CydranConfig.ts","webpack://cydran/./src/index.ts","webpack://cydran/./src/error/DigestLoopError.ts","webpack://cydran/./src/error/MalformedOnEventError.ts","webpack://cydran/./src/error/SelectorError.ts","webpack://cydran/./src/error/SetComponentError.ts","webpack://cydran/./src/error/TemplateError.ts","webpack://cydran/./src/error/UnknownRegionError.ts","webpack://cydran/./src/ExternalMediator.ts","webpack://cydran/./src/logger/ConsoleOutputStrategy.ts","webpack://cydran/./src/logger/LevelUtils.ts","webpack://cydran/./src/GuardGenerator.ts","webpack://cydran/./src/GuardImpl.ts","webpack://cydran/./src/messaging/ListenerImpl.ts","webpack://cydran/./src/ModelMediatorImpl.ts","webpack://cydran/./src/Invoker.ts","webpack://cydran/(webpack)/buildin/module.js","webpack://cydran/./src/Properties.ts","webpack://cydran/./src/Registry.ts","webpack://cydran/./src/error/RegistrationError.ts","webpack://cydran/./src/ScopeImpl.ts","webpack://cydran/./src/error/ScopeError.ts","webpack://cydran/./src/SequenceGenerator.ts","webpack://cydran/./src/mediator/index.ts","webpack://cydran/./src/mediator/Checked.ts","webpack://cydran/./src/mediator/CSSClass.ts","webpack://cydran/./src/mediator/Content.ts","webpack://cydran/./src/mediator/Enabled.ts","webpack://cydran/./src/mediator/ReadOnly.ts","webpack://cydran/./src/mediator/Style.ts","webpack://cydran/./src/mediator/ForceFocus.ts","webpack://cydran/./src/mediator/MultiSelectValueModel.ts","webpack://cydran/./src/mediator/ValuedModel.ts","webpack://cydran/./src/mediator/InputValueModel.ts","webpack://cydran/./src/mediator/Visible.ts","webpack://cydran/./src/mediator/Repeat.ts","webpack://cydran/./src/Stage.ts","webpack://cydran/./src/DomUtils.ts"],"names":[],"mappings":"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","file":"cydran.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cydran\"] = factory();\n\telse\n\t\troot[\"cydran\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","import { ComponentConfig, ComponentConfigBuilder } from \"./ComponentConfig\";\nimport { OnContinuation } from \"./Continuation\";\nimport Digestable from \"./Digestable\";\nimport Disposable from \"./Disposable\";\nimport DigestLoopError from \"./error/DigestLoopError\";\nimport MalformedOnEventError from \"./error/MalformedOnEventError\";\nimport RegistrationError from \"./error/RegistrationError\";\nimport SelectorError from \"./error/SelectorError\";\nimport SetComponentError from \"./error/SetComponentError\";\nimport TemplateError from \"./error/TemplateError\";\nimport UnknownRegionError from \"./error/UnknownRegionError\";\nimport ExternalMediator from \"./ExternalMediator\";\nimport Guard from \"./Guard\";\nimport GuardGenerator from \"./GuardGenerator\";\nimport GuardImpl from \"./GuardImpl\";\nimport Logger from \"./logger/Logger\";\nimport LoggerFactory from \"./logger/LoggerFactory\";\nimport Broker from \"./messaging/Broker\";\nimport Listener from \"./messaging/Listener\";\nimport PubSub from \"./messaging/PubSub\";\nimport ModelMediator from \"./ModelMediator\";\nimport ModelMediatorImpl from \"./ModelMediatorImpl\";\nimport Module from \"./Module\";\nimport ObjectUtils from \"./ObjectUtils\";\nimport Properties from \"./Properties\";\nimport Register from \"./Register\";\nimport { Registry, RegistryImpl } from \"./Registry\";\nimport RegistryStrategy from \"./RegistryStrategy\";\nimport Scope from \"./Scope\";\nimport ScopeImpl from \"./ScopeImpl\";\nimport SequenceGenerator from \"./SequenceGenerator\";\n\nconst MAX_EVALUATIONS: number = 10000;\nconst INTERNAL_DIRECT_CHANNEL_NAME: string = \"Cydran$$Direct$$Internal$$Channel\";\nconst INTERNAL_CHANNEL_NAME: string = \"Cydran$$Internal$$Channel\";\nconst TEXT_NODE_TYPE: number = 3;\nconst COMPONENT_INTERNALS_FIELD_NAME: string = \"____internal$$cydran____\";\nconst MODULE_FIELD_NAME: string = \"____internal$$cydran$$module____\";\n\nconst Events = {\n\tAFTER_CHILD_ADDED: \"AFTER_CHILD_ADDED\",\n\tAFTER_CHILD_CHANGED: \"AFTER_CHILD_CHANGED\",\n\tAFTER_CHILD_REMOVED: \"AFTER_CHILD_REMOVED\",\n\tAFTER_PARENT_ADDED: \"AFTER_PARENT_ADDED\",\n\tAFTER_PARENT_CHANGED: \"AFTER_PARENT_CHANGED\",\n\tAFTER_PARENT_REMOVED: \"AFTER_PARENT_REMOVED\",\n\tBEFORE_CHILD_ADDED: \"BEFORE_CHILD_ADDED\",\n\tBEFORE_CHILD_CHANGED: \"BEFORE_CHILD_CHANGED\",\n\tBEFORE_CHILD_REMOVED: \"BEFORE_CHILD_REMOVED\",\n\tBEFORE_DISPOSE: \"BEFORE_DISPOSE\",\n\tBEFORE_PARENT_ADDED: \"BEFORE_PARENT_ADDED\",\n\tBEFORE_PARENT_CHANGED: \"BEFORE_PARENT_CHANGED\",\n\tBEFORE_PARENT_REMOVED: \"BEFORE_PARENT_REMOVED\",\n};\n\nconst NOOP_FN: () => void = function() {\n\t// Intentionally do nothing\n};\n\ninterface SimpleMap<T> {\n\n\t[key: string]: T;\n\n}\n\nconst DEFAULT_COMPONENT_CONFIG: ComponentConfig = new ComponentConfigBuilder().build();\n\nclass BrokerImpl implements Broker {\n\n\tpublic static INSTANCE: Broker;\n\n\tprivate logger: Logger;\n\n\tprivate listeners: {\n\t\t[channelName: string]: Listener[];\n\t};\n\n\tconstructor() {\n\t\tthis.logger = LoggerFactory.getLogger(\"Broker\");\n\t\tthis.listeners = {};\n\t}\n\n\tpublic broadcast(channelName: string, messageName: string, payload: any): void {\n\t\tthis.logger.trace({\n\t\t\tchannelName: channelName,\n\t\t\tmessageName: messageName,\n\t\t\tpayload: payload,\n\t\t});\n\n\t\tif (!this.listeners[channelName]) {\n\t\t\tthis.logger.trace(\"no listeners for channel, returning\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst listeners = this.listeners[channelName];\n\n\t\tfor (const listener of listeners) {\n\t\t\tlistener.receive(messageName, payload);\n\t\t}\n\t}\n\n\tpublic addListener(listener: Listener): void {\n\t\tconst channelName: string = listener.getChannelName();\n\n\t\tif (!this.listeners[channelName]) {\n\t\t\tthis.listeners[channelName] = [];\n\t\t}\n\n\t\tconst listeners: Listener[] = this.listeners[channelName];\n\n\t\tif (!this.contains(listeners, listener)) {\n\t\t\tlisteners.push(listener);\n\t\t}\n\t}\n\n\tpublic removeListener(listener: Listener): void {\n\t\tconst channelName: string = listener.getChannelName();\n\n\t\tconst listeners: Listener[] = this.listeners[channelName];\n\n\t\tif (!listeners) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.remove(listeners, listener);\n\n\t\tif (0 === listeners.length) {\n\t\t\tdelete this.listeners[channelName];\n\t\t}\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.listeners = {};\n\t}\n\n\tprivate contains(array: any[], instance: any): boolean {\n\t\tlet i = array.length;\n\n\t\twhile (i--) {\n\t\t\tif (array[i] === instance) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate remove(array: any[], instance: any): void {\n\t\tlet i = array.length;\n\n\t\twhile (i--) {\n\t\t\tif (array[i] === instance) {\n\t\t\t\tarray.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nconst ALIASES: {\n\t[id: string]: string;\n} = {};\n\nclass ModuleImpl implements Module, Register {\n\n\tprivate name: string;\n\n\tprivate registry: Registry;\n\n\tprivate broker: Broker;\n\n\tprivate scope: ScopeImpl;\n\n\tconstructor(name: string, scope?: ScopeImpl) {\n\t\tthis.name = name;\n\t\tthis.registry = new RegistryImpl();\n\t\tthis.broker = new BrokerImpl();\n\t\tthis.scope = new ScopeImpl();\n\n\t\tif (scope) {\n\t\t\tthis.scope.setParent(scope);\n\t\t}\n\t}\n\n\tpublic getLogger(): Logger {\n\t\treturn LoggerFactory.getLogger(this.name);\n\t}\n\n\tpublic getName(): string {\n\t\treturn this.name;\n\t}\n\n\tpublic associate(...componentClasses: any[]): Module {\n\t\tcomponentClasses.forEach((componentClass) => {\n\t\t\tcomponentClass[\"prototype\"][MODULE_FIELD_NAME] = this;\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tpublic disassociate(...componentClasses: any[]): Module {\n\t\tcomponentClasses.forEach((componentClass) => {\n\t\t\tcomponentClass[\"prototype\"][MODULE_FIELD_NAME] = this;\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tpublic clear(): Module {\n\t\treturn this;\n\t}\n\n\tpublic broadcast(channelName: string, messageName: string, payload: any): void {\n\t\tthis.broker.broadcast(channelName, messageName, payload);\n\t}\n\n\tpublic message(channelName: string, messageName: string, payload: any): void {\n\t\tif (channelName === INTERNAL_DIRECT_CHANNEL_NAME) {\n\t\t\tif (messageName === \"addListener\") {\n\t\t\t\tthis.addListener(payload as Listener);\n\t\t\t} else if (messageName === \"removeListener\") {\n\t\t\t\tthis.removeListener(payload as Listener);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get<T>(id: string): T {\n\t\tlet result: T = this.registry.get(id);\n\n\t\tif (!result) {\n\t\t\tresult = Modules.get(id);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic getLocal<T>(id: string): T {\n\t\treturn this.registry.get(id);\n\t}\n\n\tpublic getScope(): Scope {\n\t\treturn this.scope;\n\t}\n\n\tpublic registerConstant(id: string, instance: any): Module {\n\t\ttry {\n\t\t\tthis.registry.registerConstant(id, instance);\n\t\t} catch (e) {\n\t\t\tthis.logError(e);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic registerPrototype(id: string, classInstance: any): Module {\n\t\ttry {\n\t\t\tthis.registry.registerPrototype(id, classInstance);\n\t\t} catch (e) {\n\t\t\tthis.logError(e);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic registerSingleton(id: string, classInstance: any): Module {\n\t\ttry {\n\t\t\tthis.registry.registerSingleton(id, classInstance);\n\t\t} catch (e) {\n\t\t\tthis.logError(e);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic addStrategy(strategy: RegistryStrategy): Module {\n\t\tthis.registry.addStrategy(strategy);\n\t\treturn this;\n\t}\n\n\tpublic expose(id: string): Module {\n\t\tALIASES[id] = this.name;\n\n\t\treturn this;\n\t}\n\n\tprivate addListener(listener: Listener): void {\n\t\tthis.broker.addListener(listener);\n\t}\n\n\tprivate removeListener(listener: Listener): void {\n\t\tthis.broker.removeListener(listener);\n\t}\n\n\tprivate logError(e: RegistrationError) {\n\t\tthis.getLogger().error(e);\n\t}\n\n}\n\nconst DEF_KEY: string = \"DEFAULT\";\nconst DEFAULT_MODULE: Module = new ModuleImpl(DEF_KEY);\n\nclass Modules {\n\n\tpublic static getModule(name: string): Module {\n\t\tif (!Modules.modules[name]) {\n\t\t\tModules.modules[name] = new ModuleImpl(name, DEFAULT_MODULE.getScope() as ScopeImpl);\n\t\t}\n\n\t\treturn Modules.modules[name];\n\t}\n\n\tpublic static getDefaultModule(): Module {\n\t\treturn this.getModule(DEF_KEY);\n\t}\n\n\tpublic static forEach(fn: (instace: Module) => void): void {\n\t\tfor (const name in Modules.modules) {\n\t\t\tif (!Modules.modules.hasOwnProperty(name)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst current: Module = Modules.modules[name];\n\n\t\t\tfn(current);\n\t\t}\n\t}\n\n\tpublic static broadcast(channelName: string, messageName: string, payload: any): void {\n\t\tModules.forEach((instance) => instance.broadcast(channelName, messageName, payload));\n\t}\n\n\tpublic static registerConstant(id: string, instance: any): void {\n\t\tthis.getDefaultModule().registerConstant(id, instance);\n\t}\n\n\tpublic static registerPrototype(id: string, classInstance: any): void {\n\t\tthis.getDefaultModule().registerPrototype(id, classInstance);\n\t}\n\n\tpublic static registerSingleton(id: string, classInstance: any): void {\n\t\tthis.getDefaultModule().registerSingleton(id, classInstance);\n\t}\n\n\tpublic static registerElementMediator(name: string, supportedTags: string[], elementMediatorClass: any): void {\n\t\ttry {\n\t\t\tMvvm.register(name, supportedTags, elementMediatorClass);\n\t\t} catch (e) {\n\t\t\tthis.logger.error(e.message);\n\t\t}\n\t}\n\n\tpublic static getScope(): Scope {\n\t\treturn this.getDefaultModule().getScope();\n\t}\n\n\tpublic static get<T>(id: string): T {\n\t\tlet result: T = null;\n\n\t\tconst moduleId: string = ALIASES[id];\n\n\t\tif (moduleId) {\n\t\t\tresult = Modules.getModule(id).getLocal(id);\n\t\t}\n\n\t\tif (!result) {\n\t\t\tresult = DEFAULT_MODULE.getLocal(id);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate static logger: Logger = LoggerFactory.getLogger(\"Modules:static\");\n\n\tprivate static modules: {\n\t\t[id: string]: Module;\n\t} = {\n\t\t\tDEFAULT: DEFAULT_MODULE,\n\t\t};\n\n}\n\nclass Deferred<S, T> {\n\n\tprivate instance: T;\n\n\tprivate factory: (source: S) => T;\n\n\tconstructor(factory: (source: S) => T) {\n\t\tthis.factory = factory;\n\t}\n\n\tpublic get(source: S): T {\n\t\tif (!this.instance) {\n\t\t\tthis.instance = this.factory(source);\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n}\n\ninterface MetadataContinuation {\n\n\thas: (name: string) => boolean;\n\n\tget: (name: string) => any;\n\n}\n\nclass Component {\n\n\t// tslint:disable-next-line\n\tprivate ____internal$$cydran____: ComponentInternals;\n\n\t// tslint:disable-next-line\n\tprivate ____internal$$cydran$$module____: any;\n\n\tconstructor(template: string, config?: ComponentConfig) {\n\t\tthis.____internal$$cydran$$init____(template, config);\n\t}\n\n\tpublic metadata(): MetadataContinuation {\n\t\tconst internal: ComponentInternals = this.____internal$$cydran____;\n\n\t\treturn {\n\t\t\tget: (name: string) => internal.getMetadata(name),\n\t\t\thas: (name: string) => internal.hasMetadata(name),\n\t\t};\n\t}\n\n\tpublic hasRegion(name: string): boolean {\n\t\treturn this.____internal$$cydran____.hasRegion(name);\n\t}\n\n\tpublic setChild(name: string, component: Component): void {\n\t\tthis.____internal$$cydran____.setChild(name, component);\n\t}\n\n\tpublic setChildFromRegistry(name: string, componentName: string, defaultComponentName?: string): void {\n\t\tthis.____internal$$cydran____.setChildFromRegistry(name, componentName, defaultComponentName);\n\t}\n\n\tpublic message(channelName: string, messageName: string, payload: any): void {\n\t\tthis.____internal$$cydran____.message(channelName, messageName, payload);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.____internal$$cydran____.dispose();\n\t}\n\n\tpublic getParent(): Component {\n\t\treturn this.____internal$$cydran____.getParent();\n\t}\n\n\tpublic getEl(): HTMLElement {\n\t\treturn this.____internal$$cydran____.getEl();\n\t}\n\n\tpublic get<T>(id: string): T {\n\t\treturn this.____internal$$cydran____.get(id);\n\t}\n\n\tpublic scope(): Scope {\n\t\treturn this.____internal$$cydran____.getScope();\n\t}\n\n\tpublic reset(): void {\n\t\tthis.init();\n\t}\n\n\tprotected init(): void {\n\t\t// Intentionally do nothing by default\n\t}\n\n\tprotected getItem<T>(): T {\n\t\treturn this.____internal$$cydran____.getData() as T;\n\t}\n\n\tprotected getExternals<T>(): T {\n\t\treturn this.____internal$$cydran____.getExternalCache() as T;\n\t}\n\n\tprotected broadcast(channelName: string, messageName: string, payload: any): void {\n\t\tthis.____internal$$cydran____.broadcast(channelName, messageName, payload);\n\t}\n\n\tprotected broadcastGlobally(channelName: string, messageName: string, payload: any): void {\n\t\tthis.____internal$$cydran____.broadcastGlobally(channelName, messageName, payload);\n\t}\n\n\tprotected $apply(fn: Function, args: any[]): void {\n\t\tthis.____internal$$cydran____.$apply(fn, args);\n\t}\n\n\tprotected watch(expression: string, target: (previous: any, current: any) => void): void {\n\t\tthis.____internal$$cydran____.watch(expression, target);\n\t}\n\n\tprotected on(messageName: string): OnContinuation {\n\t\treturn {\n\t\t\tforChannel: (channel: string) => {\n\t\t\t\treturn {\n\t\t\t\t\tinvoke: (target: (payload: any) => void) => {\n\t\t\t\t\t\tthis.____internal$$cydran____.on(target, messageName, channel);\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t},\n\t\t\tinvoke: (target: (payload: any) => void) => {\n\t\t\t\tthis.____internal$$cydran____.on(target, messageName, INTERNAL_CHANNEL_NAME);\n\t\t\t},\n\t\t};\n\t}\n\n\tprotected getLogger(): Logger {\n\t\treturn this.____internal$$cydran____.getLogger();\n\t}\n\n\tprotected ____internal$$cydran$$init____(template: string, config: ComponentConfig): void {\n\t\tthis.____internal$$cydran____ = new ComponentInternals(this, template, config);\n\t\tthis.____internal$$cydran____.init();\n\t}\n\n}\n\nComponent[\"prototype\"][MODULE_FIELD_NAME] = DEFAULT_MODULE;\n\ninterface ComponentFlags {\n\n\trepeatable: boolean;\n\n}\n\ninterface ExternalAttributeDetail {\n\n\tattributeName: string;\n\n\texpression: string;\n\n}\n\nclass ComponentInternals implements Digestable {\n\n\tprivate flags: ComponentFlags;\n\n\tprivate component: Component;\n\n\tprivate logger: Logger;\n\n\tprivate el: HTMLElement;\n\n\tprivate regions: { [id: string]: Region; };\n\n\tprivate parent: Component;\n\n\tprivate data: any;\n\n\tprivate id: number;\n\n\tprivate template: string;\n\n\tprivate mvvm: Mvvm;\n\n\tprivate pubSub: PubSub;\n\n\tprivate scope: ScopeImpl;\n\n\tprivate parentScope: ScopeImpl;\n\n\tprivate externalCache: any;\n\n\tprivate externalMediators: SimpleMap<ExternalMediator<any>>;\n\n\tprivate externalFields: SimpleMap<string>;\n\n\tprivate readonly prefix: string;\n\n\tprivate guard: string;\n\n\tprivate config: ComponentConfig;\n\n\tconstructor(component: Component, template: string, config: ComponentConfig) {\n\t\tif (typeof template !== \"string\") {\n\t\t\tthrow new TemplateError(\"Template must be a non-null string\");\n\t\t}\n\n\t\tthis.config = config || DEFAULT_COMPONENT_CONFIG;\n\n\t\tthis.guard = GuardGenerator.INSTANCE.generate();\n\t\tthis.id = SequenceGenerator.INSTANCE.next();\n\t\tthis.logger = LoggerFactory.getLogger(component.constructor.name + \" Component \" + this.id);\n\t\tthis.parent = null;\n\t\tthis.component = component;\n\t\tthis.prefix = this.config.getPrefix().toLowerCase();\n\t\tthis.template = template.trim();\n\t\tthis.scope = new ScopeImpl();\n\t\tthis.externalMediators = {};\n\t\tthis.externalCache = {};\n\t\tthis.externalFields = {};\n\n\t\tconst effectiveExternalAttributes: string[] = this.config.getAttributes();\n\n\t\tfor (const attribute of effectiveExternalAttributes) {\n\t\t\tthis.externalize(attribute);\n\t\t}\n\n\t\tthis.flags = {\n\t\t\trepeatable: false,\n\t\t};\n\n\t\tif (this.getModule()) {\n\t\t\tthis.scope.setParent(this.getModule().getScope() as ScopeImpl);\n\t\t}\n\n\t\tthis.regions = {};\n\t\tthis.pubSub = new PubSub(this.component, this.getModule());\n\t}\n\n\tpublic init() {\n\t\tthis.component.reset();\n\t\tthis.mvvm = new Mvvm(this.component, this.getModule(), this.prefix, this.scope);\n\t\tthis.render();\n\t\tthis.mvvm.init(this.el, this, (name: string) => this.getRegion(name));\n\t}\n\n\tpublic hasMetadata(name: string): boolean {\n\t\treturn this.getMetadata(name) ? true : false;\n\t}\n\n\tpublic getMetadata(name: string): any {\n\t\treturn this.config.getMetadata(name);\n\t}\n\n\tpublic hasRegion(name: string): boolean {\n\t\treturn ((this.regions[name]) ? true : false);\n\t}\n\n\tpublic $apply(fn: Function, args: any[], guard?: Guard): void {\n\t\tconst localGuard: GuardImpl = GuardImpl.down(guard) as GuardImpl;\n\n\t\tif (localGuard.seen(this.guard)) {\n\t\t\tthis.getLogger().trace(\"Breaking digest loop\");\n\t\t\treturn;\n\t\t}\n\n\t\tlocalGuard.mark(this.guard);\n\n\t\tthis.mvvm.$apply(fn, args, localGuard);\n\t}\n\n\tpublic setChild(name: string, component: Component): void {\n\t\tif (!this.hasRegion(name)) {\n\t\t\tthrow new UnknownRegionError(\"Region \\'%rName%\\' is unkown and must be declared in component template.\", { \"%rName%\": name });\n\t\t}\n\n\t\tconst hasComponent: boolean = this.getRegion(name).hasComponent();\n\n\t\tconst childAdded: boolean = !!(component !== null && !hasComponent);\n\t\tconst childRemoved: boolean = !!(component === null && hasComponent);\n\n\t\tif (childAdded) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.BEFORE_CHILD_ADDED, {\n\t\t\t\tname: name,\n\t\t\t});\n\t\t}\n\n\t\tif (childRemoved) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.BEFORE_CHILD_REMOVED, {\n\t\t\t\tname: name,\n\t\t\t});\n\t\t}\n\n\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.BEFORE_CHILD_CHANGED, {\n\t\t\tname: name,\n\t\t});\n\n\t\tthis.getRegion(name).setComponent(component);\n\n\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.AFTER_CHILD_CHANGED, {\n\t\t\tname: name,\n\t\t});\n\n\t\tif (childAdded) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.AFTER_CHILD_ADDED, {\n\t\t\t\tname: name,\n\t\t\t});\n\t\t}\n\n\t\tif (childRemoved) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.AFTER_CHILD_REMOVED, {\n\t\t\t\tname: name,\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic setChildFromRegistry(name: string, componentName: string, defaultComponentName?: string): void {\n\t\tlet component: Component = this.get(componentName);\n\n\t\tif (!component && defaultComponentName) {\n\t\t\tcomponent = this.get(defaultComponentName);\n\t\t}\n\n\t\tif (component) {\n\t\t\tthis.setChild(name, component);\n\t\t} else {\n\t\t\tconst error = new SetComponentError(\"Unable to set component %cName% on region %name%\", { \"%cName%\": componentName, \"%name%\": name });\n\t\t\tthis.getLogger().error(error);\n\t\t}\n\t}\n\n\tpublic message(channelName: string, messageName: string, payload: any): void {\n\t\tif (channelName === INTERNAL_DIRECT_CHANNEL_NAME) {\n\t\t\tif (messageName === \"propagateDigest\") {\n\t\t\t\tif (this.flags.repeatable) {\n\t\t\t\t\tthis.propagateDigest(payload);\n\t\t\t\t}\n\t\t\t} else if (messageName === \"setMode\") {\n\t\t\t\tswitch (payload) {\n\t\t\t\t\tcase \"repeatable\":\n\t\t\t\t\t\tthis.flags.repeatable = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.flags.repeatable = false;\n\t\t\t\t}\n\t\t\t} else if (messageName === \"digest\") {\n\t\t\t\tthis.digest(payload as Guard);\n\t\t\t} else if (messageName === \"setParent\") {\n\t\t\t\tthis.setParent(payload as Component);\n\t\t\t} else if (messageName === \"setParentScope\") {\n\t\t\t\tthis.setParentScope(payload as ScopeImpl);\n\t\t\t} else if (messageName === \"setData\") {\n\t\t\t\tthis.setData(payload);\n\t\t\t} else if (messageName === \"addExternalAttribute\") {\n\t\t\t\tthis.addExternalAttribute(payload as ExternalAttributeDetail);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.pubSub.message(channelName, messageName, payload);\n\t\t}\n\t}\n\n\tpublic broadcast(channelName: string, messageName: string, payload: any): void {\n\t\tthis.getModule().broadcast(channelName, messageName, payload);\n\t}\n\n\tpublic broadcastGlobally(channelName: string, messageName: string, payload: any): void {\n\t\tModules.broadcast(channelName, messageName, payload);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.BEFORE_DISPOSE, {});\n\t\tthis.pubSub.dispose();\n\t\tthis.parent = null;\n\t\tthis.parentScope = null;\n\t\tthis.scope = null;\n\t}\n\n\tpublic getId(): number {\n\t\treturn this.id;\n\t}\n\n\tpublic getEl(): HTMLElement {\n\t\treturn this.el;\n\t}\n\n\tpublic getComponent(): Component {\n\t\treturn this.component;\n\t}\n\n\tpublic get<T>(id: string): T {\n\t\treturn this.getModule().get(id);\n\t}\n\n\tpublic getPrefix(): string {\n\t\treturn this.prefix;\n\t}\n\n\tpublic getScope(): Scope {\n\t\treturn this.scope;\n\t}\n\n\tpublic watch(expression: string, target: (previous: any, current: any) => void): void {\n\t\tthis.mvvm.mediate(expression).watch(this, target);\n\t}\n\n\tpublic on(target: (payload: any) => void, messageName: string, channel?: string): void {\n\t\tconst targetChannel: string = channel || INTERNAL_CHANNEL_NAME;\n\n\t\tthis.pubSub.on(messageName).forChannel(targetChannel).invoke((payload: any) => {\n\t\t\tthis.$apply(target, [payload]);\n\t\t});\n\t}\n\n\tpublic getLogger(): Logger {\n\t\treturn this.logger;\n\t}\n\n\tpublic getModule(): Module {\n\t\treturn this.component[MODULE_FIELD_NAME] as Module;\n\t}\n\n\tpublic getParent(): Component {\n\t\treturn this.parent;\n\t}\n\n\tpublic setData(data: any): void {\n\t\tthis.data = data;\n\t}\n\n\tpublic getData(): any {\n\t\treturn this.data;\n\t}\n\n\tpublic importExternals(): void {\n\t\tthis.externalCache = {};\n\n\t\tfor (const key in this.externalMediators) {\n\t\t\tif (this.externalMediators.hasOwnProperty(key)) {\n\t\t\t\tconst mediator: ExternalMediator<any> = this.externalMediators[key];\n\t\t\t\tthis.externalCache[key] = mediator.get(this.parentScope);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic exportExternals(): void {\n\t\tfor (const key in this.externalMediators) {\n\t\t\tif (this.externalMediators.hasOwnProperty(key)) {\n\t\t\t\tconst mediator: ExternalMediator<any> = this.externalMediators[key];\n\t\t\t\tmediator.set(this.parentScope, this.externalCache[key]);\n\t\t\t}\n\t\t}\n\n\t\tthis.externalCache = {};\n\t}\n\n\tpublic getExternalCache(): any {\n\t\treturn this.externalCache;\n\t}\n\n\tprotected getGuard(): string {\n\t\treturn this.guard;\n\t}\n\n\tprotected getRegion(name: string): Region {\n\t\tif (!this.regions[name]) {\n\t\t\tthis.getLogger().trace(\"Creating region \" + name);\n\t\t\tthis.regions[name] = new Region(name, this);\n\t\t}\n\n\t\treturn this.regions[name];\n\t}\n\n\tprotected getTemplate(): string {\n\t\treturn this.template;\n\t}\n\n\tprotected render(): void {\n\t\tthis.getLogger().trace(\"Rendering\");\n\t\tconst templateEl: HTMLTemplateElement = Properties.getWindow().document.createElement(\"template\");\n\t\ttemplateEl.insertAdjacentHTML(\"afterbegin\", this.template.trim());\n\t\tconst count: number = templateEl.childElementCount;\n\n\t\tif (count !== 1) {\n\t\t\tconst parmObj = { \"%count%\": \"\" + count, \"%template%\": this.template };\n\t\t\tconst errmsg = \"Component template must have a single top level element, but had %count% top level elements:\\n\\n%template%\\n\\n\";\n\t\t\tconst error = new TemplateError(errmsg, parmObj);\n\t\t\tthis.getLogger().fatal(error);\n\t\t\tthrow error;\n\t\t}\n\n\t\tthis.el = templateEl.firstElementChild as HTMLElement;\n\t}\n\n\tprotected setEl(el: HTMLElement): void {\n\t\tthis.el = el;\n\t}\n\n\tprivate externalize(name: string): void {\n\t\tconst key: string = name.toLowerCase();\n\t\tconst value: string = key;\n\n\t\t// TODO - add guard code\n\t\tthis.externalFields[key] = value;\n\t}\n\n\tprivate addExternalAttribute(detail: ExternalAttributeDetail): void {\n\t\tconst fieldName: string = this.externalFields[detail.attributeName];\n\n\t\tif (fieldName) {\n\t\t\tthis.externalMediators[fieldName] = new ExternalMediator(detail.expression);\n\t\t}\n\t}\n\n\tprivate setParentScope(scope: ScopeImpl): void {\n\t\tthis.parentScope = scope;\n\t}\n\n\tprivate setParent(parent: Component): void {\n\t\tif (parent === null) {\n\t\t\tthis.pubSub.message(INTERNAL_DIRECT_CHANNEL_NAME, \"disableGlobal\", {});\n\t\t\tthis.getLogger().trace(\"Clearing parent view\");\n\t\t} else {\n\t\t\tthis.pubSub.message(INTERNAL_DIRECT_CHANNEL_NAME, \"enableGlobal\", {});\n\t\t}\n\n\t\tconst parentAdded: boolean = !!(parent !== null && this.parent === null);\n\t\tconst parentRemoved: boolean = !!(parent === null && this.parent !== null);\n\n\t\tif (parentAdded) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.BEFORE_PARENT_ADDED, {});\n\t\t}\n\n\t\tif (parentRemoved) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.BEFORE_PARENT_REMOVED, {});\n\t\t}\n\n\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.BEFORE_PARENT_CHANGED, {});\n\t\tthis.parent = parent;\n\t\tthis.digest();\n\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.AFTER_PARENT_CHANGED, {});\n\n\t\tif (parentAdded) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.AFTER_PARENT_ADDED, {});\n\t\t}\n\n\t\tif (parentRemoved) {\n\t\t\tthis.message(INTERNAL_CHANNEL_NAME, Events.AFTER_PARENT_REMOVED, {});\n\t\t}\n\t}\n\n\tprivate digest(guard?: Guard): void {\n\t\tthis.$apply(() => {\n\t\t\t// Intentionally do nothing\n\t\t}, [], guard);\n\t}\n\n\tprivate propagateDigest(guard: Guard): void {\n\t\tconst localGuard: GuardImpl = GuardImpl.up(guard) as GuardImpl;\n\n\t\tif (localGuard.seen(this.getGuard())) {\n\t\t\tthis.getLogger().trace(\"Breaking digest loop\");\n\t\t\treturn;\n\t\t}\n\n\t\tlocalGuard.mark(this.getGuard());\n\n\t\tif (this.getParent() && localGuard.isPropagateUp()) {\n\t\t\tthis.getParent().message(INTERNAL_DIRECT_CHANNEL_NAME, \"digest\", guard);\n\t\t} else {\n\t\t\tthis.getLogger().trace(\"Not propagating to parent\");\n\t\t}\n\t}\n\n}\n\nclass StageComponentInternals extends ComponentInternals {\n\n\tprotected render(): void {\n\t\tconst elements: NodeListOf<HTMLElement> = Properties.getWindow().document.querySelectorAll(this.getTemplate());\n\t\tconst eLength = ((elements) ? elements.length : 0);\n\t\tconst errMsg = (eLength !== 1) ? \"CSS selector MUST identify single HTMLElement: '%pattern%' - %qty% found\" : null;\n\n\t\tif (errMsg) {\n\t\t\tconst patSubObj = { \"%pattern%\": this.getTemplate(), \"%qty%\": eLength };\n\t\t\tconst error: SelectorError = new SelectorError(errMsg, patSubObj);\n\t\t\tthis.getLogger().fatal(error);\n\t\t\tthrow error;\n\t\t}\n\n\t\tconst element: HTMLElement = elements[0];\n\n\t\twhile (element.hasChildNodes()) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t}\n\n\t\tconst regionDiv: HTMLElement = Properties.getWindow().document.createElement(\"c:region\");\n\t\tregionDiv.setAttribute(\"name\", \"body\");\n\t\telement.appendChild(regionDiv);\n\t\tthis.setEl(element);\n\t}\n\n}\n\nclass StageComponent extends Component {\n\n\tconstructor(selector: string) {\n\t\tsuper(selector);\n\t}\n\n\tpublic setComponent(component: Component): StageComponent {\n\t\tthis.setChild(\"body\", component);\n\n\t\treturn this;\n\t}\n\n\tprotected ____internal$$cydran$$init____(template: string, config: ComponentConfig): void {\n\t\tthis[COMPONENT_INTERNALS_FIELD_NAME] = new StageComponentInternals(this, template, config);\n\t\tthis[COMPONENT_INTERNALS_FIELD_NAME][\"init\"]();\n\t}\n}\n\nStageComponent[\"prototype\"][MODULE_FIELD_NAME] = DEFAULT_MODULE;\n\ninterface ElementMediatorDependencies {\n\n\tmvvm: Mvvm;\n\n\tparent: ComponentInternals;\n\n\tel: HTMLElement;\n\n\texpression: string;\n\n\tmodel: any;\n\n\tprefix: string;\n\n}\n\nabstract class ElementMediator<M, E extends HTMLElement> implements Disposable {\n\n\tprivate logger: Logger;\n\n\t// tslint:disable-next-line\n\tprivate ____internal$$cydran____: ElementMediatorDependencies;\n\n\tprivate moduleInstance: Module;\n\n\tprivate mediator: ModelMediator<M>;\n\n\tprivate pubSub: PubSub;\n\n\tprivate domListeners: {\n\t\t[name: string]: any;\n\t};\n\n\tconstructor(dependencies: any) {\n\t\tthis.logger = LoggerFactory.getLogger(\"ElementMediator: \" + dependencies.prefix);\n\t\tthis.____internal$$cydran____ = dependencies;\n\t\tthis.domListeners = {};\n\t\tthis.pubSub = new PubSub(this, this.getModule());\n\t}\n\n\t/**\n\t * Dispose of ElementMediator when released.\n\t * + All event listeners will be removed.\n\t * + This element mediator will be unwired from any other DOM entanglements\n\t * + The mediator reference to the model is released/nulled\n\t * + Any value representation of this element mediator is released/nulled\n\t * + The [[Mvvm|mvvm]] refernce is released/nulled\n\t * + The parental reference is released/nulled\n\t */\n\tpublic dispose(): void {\n\t\tthis.removeDomListeners();\n\t\tthis.unwire();\n\t\tthis.____internal$$cydran____ = null;\n\t\tthis.mediator = null;\n\t}\n\n\t/**\n\t * Initialize this element mediator.\n\t */\n\tpublic init(): void {\n\t\tthis.mediator = this.mediate(this.getExpression());\n\t\tthis.wire();\n\t}\n\n\t/**\n\t * Get the active module instance reference by id\n\t * @return U\n\t */\n\tpublic get<U>(id: string): U {\n\t\treturn this.moduleInstance.get(id);\n\t}\n\n\t/**\n\t * Set the [[Module|module]] instance reference\n\t * @param {Module} moduleInstance\n\t */\n\tpublic setModule(moduleInstance: Module): void {\n\t\tthis.moduleInstance = moduleInstance;\n\t}\n\n\t/**\n\t * [message description]\n\t * @param {string} channelName [description]\n\t * @param {string} messageName [description]\n\t * @param {any}    payload     [description]\n\t */\n\tpublic message(channelName: string, messageName: string, payload: any): void {\n\t\tthis.pubSub.message(channelName, messageName, payload);\n\t}\n\n\t/**\n\t * Broadcast a message\n\t * @param {string} channelName [description]\n\t * @param {string} messageName [description]\n\t * @param {any}    payload     [description]\n\t */\n\tpublic broadcast(channelName: string, messageName: string, payload: any): void {\n\t\tthis.getModule().broadcast(channelName, messageName, payload);\n\t}\n\n\t/**\n\t * Broadcast a message in the Global context\n\t * @param {string} channelName [description]\n\t * @param {string} messageName [description]\n\t * @param {any}    payload     [description]\n\t */\n\tpublic broadcastGlobally(channelName: string, messageName: string, payload: any): void {\n\t\tModules.broadcast(channelName, messageName, payload);\n\t}\n\n\tprotected listenTo(channel: string, messageName: string, target: (payload: any) => void): void {\n\t\tthis.pubSub.on(messageName).forChannel(channel).invoke((payload: any) => {\n\t\t\ttarget.apply(this, [payload]);\n\t\t});\n\t}\n\n\tprotected listenToFramework(messageName: string, target: (payload: any) => void): void {\n\t\tthis.listenTo(INTERNAL_CHANNEL_NAME, messageName, target);\n\t}\n\n\tprotected bridge(name: string): void {\n\t\tconst listener = (event: Event) => {\n\t\t\tthis.message(\"dom\", name, event);\n\t\t};\n\n\t\tif (!this.domListeners[name]) {\n\t\t\tthis.domListeners[name] = listener;\n\t\t\tthis.getEl().addEventListener(name, listener, false);\n\t\t}\n\t}\n\n\t/**\n\t * Get the associated {HTMLElement html element} of this element mediator.\n\t * @return {HTMLElement} [description]\n\t */\n\tprotected getEl(): E {\n\t\treturn this.____internal$$cydran____.el as E;\n\t}\n\n\t/**\n\t * [getModule description]\n\t * @return {Module} [description]\n\t */\n\tprotected getModule(): Module {\n\t\treturn this[\"moduleInstance\"] as Module;\n\t}\n\n\t/**\n\t * [mediate description]\n\t * @param  {string}        expression [description]\n\t * @return {ModelMediator}            [description]\n\t */\n\tprotected mediate<T>(expression: string): ModelMediator<T> {\n\t\treturn this.____internal$$cydran____.mvvm.mediate(expression);\n\t}\n\n\t/**\n\t * [getModel description]\n\t * @return {any} [description]\n\t */\n\tprotected getModel(): any {\n\t\treturn this.____internal$$cydran____.model;\n\t}\n\n\t/**\n\t * [getParent description]\n\t * @return {Component} [description]\n\t */\n\tprotected getParent(): Component {\n\t\treturn this.____internal$$cydran____.parent.getComponent();\n\t}\n\n\t/**\n\t * [getMediator description]\n\t * @return {ModelMediator} [description]\n\t */\n\tprotected getModelMediator(): ModelMediator<M> {\n\t\treturn this.mediator;\n\t}\n\n\tprotected $apply(fn: Function, args: any[], guard?: Guard): any {\n\t\tif (this.____internal$$cydran____ && this.____internal$$cydran____.mvvm) {\n\t\t\tthis.____internal$$cydran____.mvvm.$apply(fn, args, guard);\n\t\t}\n\t}\n\n\t/**\n\t * Get the expression specified\n\t * @return {string} [description]\n\t */\n\tprotected getExpression(): string {\n\t\treturn this.____internal$$cydran____.expression;\n\t}\n\n\t/**\n\t * Gets the logger.\n\t * @return {Logger} logger instance\n\t */\n\tprotected getLogger(): Logger {\n\t\treturn this.logger;\n\t}\n\n\t/**\n\t * Wire the element mediator\n\t */\n\tprotected abstract wire(): void;\n\n\t/**\n\t * Unwire the element mediator\n\t */\n\tprotected abstract unwire(): void;\n\n\tprivate removeDomListeners(): void {\n\t\tfor (const name in this.domListeners) {\n\t\t\tif (!this.domListeners.hasOwnProperty(name)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst listener: any = this.domListeners[name];\n\n\t\t\tthis.getEl().removeEventListener(name, listener);\n\t\t}\n\n\t\tthis.domListeners = {};\n\t}\n\n}\n\nclass Region {\n\n\tprivate logger: Logger;\n\n\tprivate defaultEl: HTMLElement;\n\n\tprivate component: Component;\n\n\tprivate parent: ComponentInternals;\n\n\tprivate name: string;\n\n\tconstructor(name: string, parent: ComponentInternals) {\n\t\tthis.defaultEl = null;\n\t\tthis.component = null;\n\t\tthis.parent = parent;\n\t\tthis.name = name;\n\t\tthis.logger = LoggerFactory.getLogger(\"Region \" + this.name + \" for \" + parent.getId());\n\t}\n\n\tpublic setDefaultEl(defaultEl: HTMLElement): void {\n\t\tthis.defaultEl = defaultEl;\n\t}\n\n\tpublic setComponent(component: Component): void {\n\t\tthis.logger.trace(\"Setting component\");\n\n\t\tif (this.component === component) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (component !== null && this.component === null) {\n\t\t\tthis.component = component;\n\t\t\tconst newComponentEl: HTMLElement = component.getEl();\n\t\t\tconst parentElement: HTMLElement = this.defaultEl.parentElement;\n\t\t\tparentElement.replaceChild(newComponentEl, this.defaultEl);\n\t\t\tthis.component.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.parent.getComponent());\n\t\t} else if (component === null && this.component !== null) {\n\t\t\tthis.component.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", null);\n\t\t\tconst oldComponentEl: HTMLElement = this.component.getEl();\n\t\t\tthis.component = null;\n\t\t\tconst parentElement: HTMLElement = oldComponentEl.parentElement;\n\t\t\tparentElement.replaceChild(this.defaultEl, oldComponentEl);\n\t\t} else if (component !== null && this.component !== null) {\n\t\t\tthis.component.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", null);\n\t\t\tconst newComponentEl: HTMLElement = component.getEl();\n\t\t\tconst oldComponentEl: HTMLElement = this.component.getEl();\n\t\t\tconst parentElement: HTMLElement = oldComponentEl.parentElement;\n\t\t\tparentElement.replaceChild(newComponentEl, oldComponentEl);\n\t\t\tthis.component = component;\n\t\t\tthis.component.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.parent.getComponent());\n\t\t}\n\t}\n\n\tpublic hasComponent(): boolean {\n\t\treturn !!this.component;\n\t}\n\n\tpublic dispose() {\n\t\tif (this.component) {\n\t\t\tthis.component.dispose();\n\t\t}\n\n\t\tthis.setComponent(null);\n\t}\n\n}\n\nclass TextElementMediator extends ElementMediator<string, HTMLElement> {\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprotected onTargetChange(previous: any, current: any): void {\n\t\tconst replacement: string = ObjectUtils.encodeHtml(current);\n\t\tthis.getEl().innerHTML = replacement;\n\t}\n\n}\n\nclass EventElementMediator extends ElementMediator<any, HTMLElement> {\n\n\tprivate eventKey: string;\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tpublic handleEvent(event: Event): void {\n\t\tthis.$apply(() => {\n\t\t\tthis.getModelMediator().invoke(event);\n\t\t}, [event], null);\n\t}\n\n\tpublic wire(): void {\n\t\tthis.bridge(this.eventKey);\n\t\tthis.listenTo(\"dom\", this.eventKey, this.handleEvent);\n\t}\n\n\tpublic setEventKey(eventKey: string): void {\n\t\tthis.eventKey = eventKey;\n\t}\n\n}\n\nclass AttributeElementMediator extends ElementMediator<string, HTMLElement> {\n\n\tprivate attributeName: string;\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tpublic setAttributeName(attributeName: string): void {\n\t\tthis.attributeName = attributeName;\n\t}\n\n\tprotected onTargetChange(previous: string, current: string): void {\n\t\tthis.getEl().setAttribute(this.attributeName, current + \"\");\n\t}\n\n}\n\nclass Mvvm {\n\n\tpublic static register(name: string, supportedTags: string[], elementMediatorClass: any): void {\n\t\tif (!Mvvm.factories[name]) {\n\t\t\tMvvm.factories[name] = {};\n\t\t}\n\n\t\tfor (const supportedTag of supportedTags) {\n\t\t\tMvvm.factories[name][supportedTag] = elementMediatorClass;\n\t\t}\n\t}\n\n\tprivate static factories: {\n\t\t[elementMediatorType: string]: {\n\t\t\t[tag: string]: new () => ElementMediator<any, HTMLElement>;\n\t\t},\n\t} = {};\n\n\tprivate logger: Logger;\n\n\tprivate el: HTMLElement;\n\n\tprivate elementMediators: Array<ElementMediator<any, HTMLElement>>;\n\n\tprivate mediators: Array<ModelMediatorImpl<any>>;\n\n\tprivate model: any;\n\n\tprivate parent: ComponentInternals;\n\n\tprivate moduleInstance: Module;\n\n\tprivate elementMediatorPrefix: string;\n\n\tprivate eventElementMediatorPrefix: string;\n\n\tprivate externalAttributePrefix: string;\n\n\tprivate regionPrefix: string;\n\n\tprivate componentPrefix: string;\n\n\tprivate components: Component[];\n\n\tprivate scope: ScopeImpl;\n\n\tprivate regionLookupFn: (name: string) => Region;\n\n\tconstructor(model: any, moduleInstance: Module, prefix: string, scope: ScopeImpl) {\n\t\tthis.elementMediatorPrefix = prefix + \":\";\n\t\tthis.eventElementMediatorPrefix = prefix + \":on\";\n\t\tthis.externalAttributePrefix = prefix + \":property-\";\n\t\tthis.regionPrefix = prefix + \":region\";\n\t\tthis.componentPrefix = prefix + \":component\";\n\t\tthis.logger = LoggerFactory.getLogger(\"Mvvm\");\n\t\tthis.scope = new ScopeImpl(false);\n\t\tthis.scope.setParent(scope);\n\t\tthis.elementMediators = [];\n\t\tthis.mediators = [];\n\t\tthis.model = model;\n\t\tthis.moduleInstance = moduleInstance;\n\t\tthis.components = [];\n\t\tthis.scope.add(\"m\", () => this.model);\n\t\tthis.scope.add(\"model\", () => this.model);\n\t\tthis.scope.add(\"i\", () => this.parent.getData());\n\t\tthis.scope.add(\"item\", () => this.parent.getData());\n\t\tthis.scope.add(\"p\", () => this.parent.getComponent().getParent());\n\t\tthis.scope.add(\"parent\", () => this.parent.getComponent().getParent());\n\t\tthis.scope.add(\"e\", () => this.parent.getExternalCache());\n\t\tthis.scope.add(\"external\", () => this.parent.getExternalCache());\n\t}\n\n\tpublic init(el: HTMLElement, parent: ComponentInternals, regionLookupFn: (name: string) => Region): void {\n\t\tthis.el = el;\n\t\tthis.parent = parent;\n\t\tthis.regionLookupFn = regionLookupFn;\n\t\tthis.populateElementMediators();\n\t}\n\n\tpublic dispose(): void {\n\t\tfor (const elementMediator of this.elementMediators) {\n\t\t\telementMediator.dispose();\n\t\t}\n\n\t\tthis.elementMediators = [];\n\t\tthis.components = [];\n\n\t\tfor (const component of this.components) {\n\t\t\tcomponent.dispose();\n\t\t}\n\n\t\tthis.parent = null;\n\t}\n\n\tpublic mediate<T>(expression: string): ModelMediator<T> {\n\t\tconst mediator: ModelMediator<T> = new ModelMediatorImpl<T>(this.model, expression, this.scope);\n\t\tthis.mediators.push(mediator as ModelMediatorImpl<any>);\n\n\t\treturn mediator;\n\t}\n\n\tpublic digest(guard: Guard): void {\n\t\tconst localGuardDown: GuardImpl = GuardImpl.down(guard) as GuardImpl;\n\n\t\tlet remainingEvaluations: number = MAX_EVALUATIONS;\n\t\tlet pending: boolean = true;\n\n\t\twhile (pending && remainingEvaluations > 0) {\n\t\t\tremainingEvaluations--;\n\n\t\t\tconst changedMediators: Array<ModelMediator<any>> = [];\n\n\t\t\tfor (const mediator of this.mediators) {\n\t\t\t\tconst changed: boolean = mediator.evaluate(localGuardDown);\n\n\t\t\t\tif (changed) {\n\t\t\t\t\tchangedMediators.push(mediator);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (changedMediators.length === 0) {\n\t\t\t\tpending = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfor (const changedMediator of changedMediators) {\n\t\t\t\tchangedMediator.notifyWatcher(localGuardDown);\n\t\t\t}\n\t\t}\n\n\t\tif (remainingEvaluations === 0) {\n\t\t\t// TODO - Make this error handling better\n\t\t\tthrow new DigestLoopError(\"Loop detected in digest cycle.\");\n\t\t}\n\n\t\tfor (const mediator of this.mediators) {\n\t\t\tmediator.executeCallback(localGuardDown);\n\t\t}\n\t}\n\n\tpublic $apply(fn: Function, args: any[], guard?: Guard): any {\n\t\tconst localGuardUp: GuardImpl = GuardImpl.up(guard) as GuardImpl;\n\t\tlet result: any = null;\n\n\t\tthis.parent.importExternals();\n\n\t\ttry {\n\t\t\tresult = fn.apply(this.model, args);\n\t\t\tthis.digest(guard);\n\t\t} finally {\n\t\t\tthis.parent.exportExternals();\n\t\t}\n\n\t\tthis.parent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"propagateDigest\", localGuardUp);\n\n\t\tfor (const component of this.components) {\n\t\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"digest\", guard);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate populateElementMediators(): void {\n\t\tconst queue: HTMLElement[] = [this.el];\n\n\t\twhile (queue.length > 0) {\n\t\t\tthis.processChild(queue);\n\t\t}\n\t}\n\n\tprivate processChild(queue: HTMLElement[]): void {\n\t\tconst el: HTMLElement = queue.pop();\n\t\tconst EVT_NAME_ERR = \"Event expressor \\'%eventName%\\' MUST correspond to a valid event in the target environment: \\'\";\n\t\tconst regex = /^[A-Za-z]+$/;\n\t\tconst elName: string = el.tagName.toLowerCase();\n\n\t\tif (elName === this.regionPrefix) {\n\t\t\tconst regionName: string = el.getAttribute(\"name\");\n\t\t\tconst region: Region = this.regionLookupFn(regionName);\n\t\t\tregion.setDefaultEl(el as HTMLElement);\n\t\t\treturn;\n\t\t} else if (elName === this.componentPrefix) {\n\t\t\tconst componentName: string = el.getAttribute(\"name\");\n\t\t\tconst moduleName: string = el.getAttribute(\"module\");\n\t\t\tconst moduleToUse: Module = moduleName ? Modules.getModule(moduleName) : this.moduleInstance;\n\t\t\tconst component: Component = (moduleToUse || this.moduleInstance).get(componentName);\n\t\t\tel.parentElement.replaceChild(component.getEl(), el);\n\n\t\t\tfor (let i = el.attributes.length - 1; i >= 0; i--) {\n\t\t\t\tconst attributeName: string = el.attributes[i].name.toLowerCase();\n\t\t\t\tconst attributeValue: string = el.attributes[i].value;\n\n\t\t\t\tif (attributeName.indexOf(this.externalAttributePrefix) === 0) {\n\t\t\t\t\tconst propertyName: string = attributeName.substr(this.externalAttributePrefix.length);\n\t\t\t\t\tconst detail: ExternalAttributeDetail = {\n\t\t\t\t\t\tattributeName: propertyName,\n\t\t\t\t\t\texpression: attributeValue,\n\t\t\t\t\t};\n\n\t\t\t\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"addExternalAttribute\", detail);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParentScope\", this.scope);\n\t\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.parent.getComponent());\n\t\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setMode\", \"repeatable\");\n\t\t\tthis.components.push(component);\n\t\t\treturn;\n\t\t}\n\n\t\t// tslint:disable-next-line\n\t\tfor (let i = 0; i < el.children.length; i++) {\n\t\t\tqueue.push(el.children[i] as HTMLElement);\n\t\t}\n\n\t\tthis.processTextChildren(el.childNodes);\n\n\t\tfor (const name of el.getAttributeNames()) {\n\t\t\tconst expression: string = el.getAttribute(name);\n\t\t\tif (name.indexOf(this.eventElementMediatorPrefix) === 0) {\n\t\t\t\tconst eventName: string = name.substr(this.eventElementMediatorPrefix.length);\n\n\t\t\t\tif (!regex.test(eventName)) {\n\t\t\t\t\tthrow new MalformedOnEventError(EVT_NAME_ERR, { \"%eventName%\": eventName });\n\t\t\t\t}\n\n\t\t\t\tthis.addEventElementMediator(eventName.toLowerCase(), expression, el as HTMLElement);\n\t\t\t\tel.removeAttribute(name);\n\t\t\t} else if (name.indexOf(this.elementMediatorPrefix) === 0) {\n\t\t\t\tconst elementMediatorType: string = name.substr(this.elementMediatorPrefix.length);\n\t\t\t\tthis.addElementMediator(el.tagName.toLowerCase(), elementMediatorType, expression, el as HTMLElement);\n\t\t\t\tel.removeAttribute(name);\n\t\t\t} else if (expression.length > 4 && expression.indexOf(\"{{\") === 0 && expression.indexOf(\"}}\", expression.length - 2) !== -1) {\n\t\t\t\tconst trimmedExpression: string = expression.substring(2, expression.length - 2);\n\t\t\t\tthis.addAttributeElementMediator(name, trimmedExpression, el as HTMLElement);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate processTextChildren(children: NodeListOf<ChildNode>): void {\n\t\tconst discoveredNodes: ChildNode[] = [];\n\n\t\t// tslint:disable-next-line\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst child: ChildNode = children[i];\n\n\t\t\tif (TEXT_NODE_TYPE === child.nodeType) {\n\t\t\t\tdiscoveredNodes.push(child);\n\t\t\t}\n\t\t}\n\n\t\tfor (const node of discoveredNodes) {\n\t\t\tconst result: Node[] = this.splitChild(node);\n\n\t\t\tif (result.length > 1) {\n\t\t\t\tfor (const newNode of result) {\n\t\t\t\t\tnode.parentNode.insertBefore(newNode, node);\n\t\t\t\t}\n\n\t\t\t\tnode.remove();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate splitChild(node: Node): Node[] {\n\t\tconst source: string = node.textContent || \"\";\n\t\tconst sections: string[] = source.split(/(\\{\\{|\\}\\})/);\n\n\t\tif (sections.length < 2) {\n\t\t\treturn [node];\n\t\t}\n\n\t\tlet inside: boolean = false;\n\n\t\tconst collected: Node[] = [];\n\n\t\tfor (const section of sections) {\n\t\t\tswitch (section) {\n\t\t\t\tcase \"{{\":\n\t\t\t\t\tinside = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"}}\":\n\t\t\t\t\tinside = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (inside) {\n\t\t\t\t\t\tconst span: HTMLElement = Properties.getWindow().document.createElement(\"span\");\n\t\t\t\t\t\tspan.innerHTML = \"\";\n\t\t\t\t\t\tthis.addTextElementMediator(section, span);\n\t\t\t\t\t\tcollected.push(span);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst textNode: Text = Properties.getWindow().document.createTextNode(section);\n\t\t\t\t\t\tcollected.push(textNode);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn collected;\n\t}\n\n\tprivate addTextElementMediator(expression: string, el: HTMLElement): void {\n\t\tconst deps = { mvvm: this, parent: this.parent, el: el, expression: expression, model: this.model, prefix: \"Text\" };\n\t\tconst elementMediator: TextElementMediator = new TextElementMediator(deps);\n\t\telementMediator.setModule(this.moduleInstance);\n\t\telementMediator.init();\n\n\t\tthis.elementMediators.push(elementMediator);\n\t}\n\n\tprivate addEventElementMediator(eventName: string, expression: string, el: HTMLElement): void {\n\t\tconst deps = { mvvm: this, parent: this.parent, el: el, expression: expression, model: this.model, prefix: \"Event\" };\n\t\tconst elementMediator: EventElementMediator = new EventElementMediator(deps);\n\t\telementMediator.setModule(this.moduleInstance);\n\t\telementMediator.setEventKey(eventName);\n\t\telementMediator.init();\n\n\t\tthis.elementMediators.push(elementMediator);\n\t}\n\n\tprivate addAttributeElementMediator(attributeName: string, expression: string, el: HTMLElement): void {\n\t\tconst deps = { mvvm: this, parent: this.parent, el: el, expression: expression, model: this.model, prefix: \"Event\" };\n\t\tconst elementMediator: AttributeElementMediator = new AttributeElementMediator(deps);\n\t\telementMediator.setModule(this.moduleInstance);\n\t\telementMediator.setAttributeName(attributeName);\n\t\telementMediator.init();\n\n\t\tthis.elementMediators.push(elementMediator);\n\t}\n\n\tprivate addElementMediator(tag: string, elementMediatorType: string, attributeValue: string, el: HTMLElement): void {\n\t\tconst tags: { [tag: string]: new () => ElementMediator<any, HTMLElement>; } = Mvvm.factories[elementMediatorType];\n\t\tconst prefix: string = \"data-p-\" + elementMediatorType + \"-\"; // TODO - Determine if this is still correct\n\n\t\tlet elementMediator: ElementMediator<any, HTMLElement> = null;\n\n\t\tif (!tags) {\n\t\t\tthis.logger.error(\"Unsupported elementMediator type: \" + elementMediatorType + \".\");\n\t\t\treturn;\n\t\t}\n\n\t\tlet elementMediatorClass: any = tags[tag];\n\n\t\tif (!elementMediatorClass) {\n\t\t\telementMediatorClass = tags[\"*\"];\n\t\t}\n\n\t\tif (!elementMediatorClass) {\n\t\t\tthis.logger.error(\"Unsupported tag: \" + tag + \" for elementMediator \" + elementMediatorType + \".\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst deps = { mvvm: this, parent: this.parent, el: el, expression: attributeValue, model: this.model, prefix: prefix };\n\t\telementMediator = new elementMediatorClass(deps);\n\t\telementMediator.setModule(this.moduleInstance);\n\t\telementMediator.init();\n\n\t\tthis.elementMediators.push(elementMediator);\n\t}\n\n}\n\nexport {\n\tComponent,\n\tEvents,\n\tElementMediator,\n\tMvvm,\n\tStageComponent,\n\tModules,\n\tModuleImpl,\n\tElementMediatorDependencies,\n\tProperties,\n\tINTERNAL_CHANNEL_NAME,\n\tINTERNAL_DIRECT_CHANNEL_NAME,\n};\n","abstract class CydranError extends Error {\n\n\tprivate static doMsgFilling(msg: string, reps: any): string {\n\t\treturn msg.replace(/%\\w+%/g, (all: string) => (reps[all] + \"\") || all);\n\t}\n\n\tpublic readonly message: string;\n\n\t/**\n\t * Constructor\n\t *\n\t * @param msg string object specific to context\n\t * @param reps optional {key:value, <n^1>} object of named substitution values\n\t * @returns string filled in values in the mesage\n\t */\n\tconstructor(msg: string, reps?: any) {\n\t\tsuper();\n\n\t\tif (new.target === CydranError) {\n\t\t\tthrow TypeError(\"Direct instantiation of \" + new.target.name + \" is not allowed.\");\n\t\t}\n\n\t\tthis.message = (reps) ? CydranError.doMsgFilling(msg, reps) : msg;\n\t}\n\n}\n\nconst NEWI = \" needs to be instantiated with 'new'\";\n\nexport { CydranError, NEWI };\n","import Logger from \"./Logger\";\nimport LoggerImpl from \"./LoggerImpl\";\nimport LoggerService from \"./LoggerService\";\n\nclass LoggerFactory {\n\n\t/**\n\t * Get the named logger\n\t * @param name of the associated logger\n\t */\n\tpublic static getLogger(name: string): Logger {\n\t\treturn new LoggerImpl(name, LoggerService.INSTANCE);\n\t}\n\n}\n\nexport default LoggerFactory;\n","enum Level {\n\tTRACE,\n\tDEBUG,\n\tINFO,\n\tWARN,\n\tERROR,\n\tFATAL,\n\tDISABLE,\n}\n\nexport default Level;\n","/* tslint:disable */\n\nconst LARGE_ARRAY_SIZE = 200;\nconst FUNC_ERROR_TEXT = \"Expected a function\";\nconst HASH_UNDEFINED = \"__lodash_hash_undefined__\";\nconst CLONE_DEEP_FLAG = 1;\nconst CLONE_FLAT_FLAG = 2;\nconst CLONE_SYMBOLS_FLAG = 4;\nconst COMPARE_PARTIAL_FLAG = 1;\nconst COMPARE_UNORDERED_FLAG = 2;\nconst MAX_SAFE_INTEGER = 9007199254740991;\nconst argsTag = \"[object Arguments]\";\nconst arrayTag = \"[object Array]\";\nconst asyncTag = \"[object AsyncFunction]\";\nconst boolTag = \"[object Boolean]\";\nconst dateTag = \"[object Date]\";\nconst errorTag = \"[object Error]\";\nconst funcTag = \"[object Function]\";\nconst genTag = \"[object GeneratorFunction]\";\nconst mapTag = \"[object Map]\";\nconst numberTag = \"[object Number]\";\nconst nullTag = \"[object Null]\";\nconst objectTag = \"[object Object]\";\nconst promiseTag = \"[object Promise]\";\nconst proxyTag = \"[object Proxy]\";\nconst regexpTag = \"[object RegExp]\";\nconst setTag = \"[object Set]\";\nconst stringTag = \"[object String]\";\nconst symbolTag = \"[object Symbol]\";\nconst undefinedTag = \"[object Undefined]\";\nconst weakMapTag = \"[object WeakMap]\";\nconst arrayBufferTag = \"[object ArrayBuffer]\";\nconst dataViewTag = \"[object DataView]\";\nconst float32Tag = \"[object Float32Array]\";\nconst float64Tag = \"[object Float64Array]\";\nconst int8Tag = \"[object Int8Array]\";\nconst int16Tag = \"[object Int16Array]\";\nconst int32Tag = \"[object Int32Array]\";\nconst uint8Tag = \"[object Uint8Array]\";\nconst uint8ClampedTag = \"[object Uint8ClampedArray]\";\nconst uint16Tag = \"[object Uint16Array]\";\nconst uint32Tag = \"[object Uint32Array]\";\nconst reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\nconst reFlags = /\\w*$/;\nconst reIsHostCtor = /^\\[object .+?Constructor\\]$/;\nconst reIsUint = /^(?:0|[1-9]\\d*)$/;\nconst typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n\ttypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n\ttypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n\ttypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n\ttypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n\ttypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n\ttypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n\ttypedArrayTags[errorTag] = typedArrayTags[funcTag] =\n\ttypedArrayTags[mapTag] = typedArrayTags[numberTag] =\n\ttypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n\ttypedArrayTags[setTag] = typedArrayTags[stringTag] =\n\ttypedArrayTags[weakMapTag] = false;\nconst cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\n\tcloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n\tcloneableTags[boolTag] = cloneableTags[dateTag] =\n\tcloneableTags[float32Tag] = cloneableTags[float64Tag] =\n\tcloneableTags[int8Tag] = cloneableTags[int16Tag] =\n\tcloneableTags[int32Tag] = cloneableTags[mapTag] =\n\tcloneableTags[numberTag] = cloneableTags[objectTag] =\n\tcloneableTags[regexpTag] = cloneableTags[setTag] =\n\tcloneableTags[stringTag] = cloneableTags[symbolTag] =\n\tcloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n\tcloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\n\tcloneableTags[weakMapTag] = false;\nconst freeGlobal = typeof global === \"object\" && global && global.Object === Object && global;\nconst freeSelf = typeof self === \"object\" && self && self[\"Object\"] === Object && self;\nconst root = freeGlobal || freeSelf || Function(\"return this\")();\nconst freeExports = typeof exports === \"object\" && exports && !exports.nodeType && exports;\nconst freeModule = freeExports && typeof module === \"object\" && module && !module[\"nodeType\"] && module;\nconst moduleExports = freeModule && freeModule.exports === freeExports;\n\nfunction arrayEach(array: any[], iteratee: Function): any[] {\n\tconst length = array == null ? 0 : array.length;\n\n\tlet index = -1;\n\n\twhile (++index < length) {\n\t\tif (iteratee(array[index], index, array) === false) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn array;\n}\n\nfunction arrayFilter(array: any[], predicate: Function): any[] {\n\tconst length = array == null ? 0 : array.length;\n\tconst result = [];\n\n\tlet index = -1;\n\tlet resIndex = 0;\n\n\twhile (++index < length) {\n\t\tconst value = array[index];\n\n\t\tif (predicate(value, index, array)) {\n\t\t\tresult[resIndex++] = value;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction arrayPush(array: any[], values: any[]): any[] {\n\tconst length = values.length;\n\tconst offset = array.length;\n\n\tlet index = -1;\n\n\twhile (++index < length) {\n\t\tarray[offset + index] = values[index];\n\t}\n\n\treturn array;\n}\n\nfunction arraySome(array: any[], predicate: Function): boolean {\n\tconst length = array == null ? 0 : array.length;\n\tlet index = -1;\n\n\twhile (++index < length) {\n\t\tif (predicate(array[index], index, array)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction baseTimes(n: number, iteratee: Function): any[] {\n\tconst result = Array(n);\n\tlet index = -1;\n\n\twhile (++index < n) {\n\t\tresult[index] = iteratee(index);\n\t}\n\n\treturn result;\n}\n\nfunction cacheHas(cache: any, key: string): boolean {\n\treturn cache.has(key);\n}\n\nfunction getValue(object: any, key: string): any {\n\treturn object == null ? undefined : object[key];\n}\n\nfunction mapToArray(map: any): any[] {\n\tconst result = Array(map.size);\n\n\tlet index = -1;\n\n\tmap.forEach(function(value: any, key: string) {\n\t\tresult[++index] = [key, value];\n\t});\n\n\treturn result;\n}\n\nfunction overArg(func: Function, transform: Function): Function {\n\treturn function(arg: any) {\n\t\treturn func(transform(arg));\n\t};\n}\n\nfunction setToArray(set: any): any[] {\n\tconst result = Array(set.size);\n\n\tlet index = -1;\n\n\tset.forEach(function(value: any) {\n\t\tresult[++index] = value;\n\t});\n\n\treturn result;\n}\n\ninterface ContextType {\n\t[x: string]: any;\n\tArray: any;\n\tDate: any;\n\tError: any;\n\tFunction: any;\n\tMath: any;\n\tObject: any;\n\tRegExp: any;\n\tString: any;\n\tTypeError: any;\n\tBuffer: any;\n\tSymbol: any;\n\tUint8Array: any;\n\tclearTimeout: any;\n\tsetTimeout: any;\n\tisFinite: any;\n\tparseInt: any;\n}\n\nconst context: ContextType = root;\n\nconst arrayProto = Array.prototype;\nconst funcProto = Function.prototype;\nconst objectProto = Object.prototype;\nconst coreJsData = context[\"__core-js_shared__\"];\nconst funcToString = funcProto.toString;\nconst hasOwnProperty = objectProto.hasOwnProperty;\nconst maskSrcKey = (function() {\n\tconst uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || \"\");\n\n\treturn uid ? (\"Symbol(src)_1.\" + uid) : \"\";\n}());\n\nconst nativeObjectToString = objectProto.toString;\nconst reIsNative = RegExp(\"^\" + funcToString.call(hasOwnProperty).replace(reRegExpChar, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\");\n\nconst Buffer = moduleExports ? context.Buffer : undefined;\nconst Symbol = context.Symbol;\nconst Uint8Array = context.Uint8Array;\nconst allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\nconst getPrototype = overArg(Object.getPrototypeOf, Object);\nconst objectCreate = Object.create;\nconst propertyIsEnumerable = objectProto.propertyIsEnumerable;\nconst splice = arrayProto.splice;\nconst symToStringTag = Symbol ? Symbol.toStringTag : undefined;\nconst nativeGetSymbols = Object.getOwnPropertySymbols;\nconst nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\nconst nativeKeys = overArg(Object.keys, Object);\nconst DataView = getNative(context, \"DataView\");\nconst Map = getNative(context, \"Map\");\nconst Promise = getNative(context, \"Promise\");\nconst Set = getNative(context, \"Set\");\nconst WeakMap = getNative(context, \"WeakMap\");\nconst nativeCreate = getNative(Object, \"create\");\nconst dataViewCtorString = toSource(DataView);\nconst mapCtorString = toSource(Map);\nconst promiseCtorString = toSource(Promise);\nconst setCtorString = toSource(Set);\nconst weakMapCtorString = toSource(WeakMap);\nconst symbolProto = Symbol ? Symbol.prototype : undefined;\nconst symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\nconst baseCreate = (function() {\n\tfunction object() {\n\t\t// Intentionally do nothing\n\t}\n\n\treturn function(proto: any) {\n\t\tif (!isObject(proto)) {\n\t\t\treturn {};\n\t\t}\n\t\tif (objectCreate) {\n\t\t\treturn objectCreate(proto);\n\t\t}\n\t\tobject.prototype = proto;\n\t\tconst result = new object();\n\t\tobject.prototype = undefined;\n\t\treturn result;\n\t};\n}());\n\nclass Hash {\n\n\tpublic size: number;\n\n\tpublic __DATA__: any;\n\n\tconstructor(entries?: any[]) {\n\t\tlet index = -1;\n\t\tconst length = entries == null ? 0 : entries.length;\n\n\t\tthis.clear();\n\t\twhile (++index < length) {\n\t\t\tconst entry = entries[index];\n\t\t\tthis.set(entry[0], entry[1]);\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tthis.__DATA__ = nativeCreate ? nativeCreate(null) : {};\n\t\tthis.size = 0;\n\t}\n\n\tpublic delete(key: string): boolean {\n\t\tconst result = this.has(key) && delete this.__DATA__[key];\n\t\tthis.size -= result ? 1 : 0;\n\t\treturn result;\n\t}\n\n\tpublic get(key: string): any {\n\t\tconst data = this.__DATA__;\n\t\tif (nativeCreate) {\n\t\t\tconst result = data[key];\n\t\t\treturn result === HASH_UNDEFINED ? undefined : result;\n\t\t}\n\t\treturn hasOwnProperty.call(data, key) ? data[key] : undefined;\n\t}\n\n\tpublic has(key: string): boolean {\n\t\tconst data = this.__DATA__;\n\t\treturn nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n\t}\n\n\tpublic set(key: string, value: any): any {\n\t\tconst data = this.__DATA__;\n\t\tthis.size += this.has(key) ? 0 : 1;\n\t\tdata[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n\t\treturn this;\n\t}\n\n}\n\nclass ListCache {\n\n\tpublic size: number;\n\n\tpublic __DATA__: any;\n\n\tconstructor(entries?: any[]) {\n\t\tlet index = -1;\n\t\tconst length = entries == null ? 0 : entries.length;\n\n\t\tthis.clear();\n\n\t\twhile (++index < length) {\n\t\t\tconst entry = entries[index];\n\t\t\tthis.set(entry[0], entry[1]);\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tthis.__DATA__ = [];\n\t\tthis.size = 0;\n\t}\n\n\tpublic delete(key: string): boolean {\n\t\tconst data = this.__DATA__;\n\t\tconst index = assocIndexOf(data, key);\n\n\t\tif (index < 0) {\n\t\t\treturn false;\n\t\t}\n\t\tconst lastIndex = data.length - 1;\n\t\tif (index == lastIndex) {\n\t\t\tdata.pop();\n\t\t} else {\n\t\t\tsplice.call(data, index, 1);\n\t\t}\n\t\t--this.size;\n\t\treturn true;\n\t}\n\n\tpublic get(key: string): any {\n\t\tconst data = this.__DATA__;\n\t\tconst index = assocIndexOf(data, key);\n\n\t\treturn index < 0 ? undefined : data[index][1];\n\t}\n\n\tpublic has(key: string): boolean {\n\t\treturn assocIndexOf(this.__DATA__, key) > -1;\n\t}\n\n\tpublic set(key: string, value: any): any {\n\t\tconst data = this.__DATA__;\n\t\tconst index = assocIndexOf(data, key);\n\n\t\tif (index < 0) {\n\t\t\t++this.size;\n\t\t\tdata.push([key, value]);\n\t\t} else {\n\t\t\tdata[index][1] = value;\n\t\t}\n\t\treturn this;\n\t}\n\n}\n\nclass MapCache {\n\n\tpublic size: number;\n\n\tpublic __DATA__: any;\n\n\tconstructor(entries?: any[]) {\n\t\tlet index = -1;\n\t\tconst length = entries == null ? 0 : entries.length;\n\n\t\tthis.clear();\n\t\twhile (++index < length) {\n\t\t\tconst entry = entries[index];\n\t\t\tthis.set(entry[0], entry[1]);\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tthis.size = 0;\n\t\tthis.__DATA__ = {\n\t\t\thash: new Hash(),\n\t\t\tmap: new (Map || ListCache)(),\n\t\t\tstring: new Hash(),\n\t\t};\n\t}\n\n\tpublic delete(key: string): boolean {\n\t\tconst result = getMapData(this, key)[\"delete\"](key);\n\t\tthis.size -= result ? 1 : 0;\n\t\treturn result;\n\t}\n\n\tpublic get(key: string): any {\n\t\treturn getMapData(this, key).get(key);\n\t}\n\n\tpublic has(key: string): boolean {\n\t\treturn getMapData(this, key).has(key);\n\t}\n\n\tpublic set(key: string, value: any): any {\n\t\tconst data = getMapData(this, key);\n\t\tconst size = data.size;\n\n\t\tdata.set(key, value);\n\t\tthis.size += data.size == size ? 0 : 1;\n\t\treturn this;\n\t}\n\n}\n\nclass SetCache {\n\n\tpublic __DATA__: any;\n\n\tconstructor(values?: any[]) {\n\t\tlet index = -1;\n\t\tconst length = values == null ? 0 : values.length;\n\n\t\tthis.__DATA__ = new MapCache();\n\t\twhile (++index < length) {\n\t\t\tthis.add(values[index]);\n\t\t}\n\t}\n\n\tpublic push(value: any): any {\n\t\treturn this.add(value);\n\t}\n\n\tpublic add(value: any): any {\n\t\tthis.__DATA__.set(value, HASH_UNDEFINED);\n\t\treturn this;\n\t}\n\n\tpublic has(value: any): boolean {\n\t\treturn this.__DATA__.has(value);\n\t}\n\n}\n\nclass Stack {\n\n\tpublic __DATA__: any;\n\n\tpublic size: number;\n\n\tconstructor(entries?: any[]) {\n\t\tconst data = this.__DATA__ = new ListCache(entries);\n\t\tthis.size = data.size;\n\t}\n\n\tpublic clear(): void {\n\t\tthis.__DATA__ = new ListCache();\n\t\tthis.size = 0;\n\t}\n\n\tpublic delete(key: string): boolean {\n\t\tconst data = this.__DATA__;\n\t\tconst result = data[\"delete\"](key);\n\n\t\tthis.size = data.size;\n\t\treturn result;\n\t}\n\n\tpublic get(key: string): any {\n\t\treturn this.__DATA__.get(key);\n\t}\n\n\tpublic has(key: string): boolean {\n\t\treturn this.__DATA__.has(key);\n\t}\n\n\tpublic set(key: string, value: any): any {\n\t\tlet data = this.__DATA__;\n\t\tif (data instanceof ListCache) {\n\t\t\tconst pairs = data.__DATA__;\n\t\t\tif (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n\t\t\t\tpairs.push([key, value]);\n\t\t\t\tthis.size = ++data.size;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tdata = this.__DATA__ = new MapCache(pairs);\n\t\t}\n\t\tdata.set(key, value);\n\t\tthis.size = data.size;\n\t\treturn this;\n\t}\n\n}\n\nfunction arrayLikeKeys(value: any, inherited?: boolean): string[] {\n\tconst isArr = isArray(value);\n\tconst isArg = !isArr && isArguments(value);\n\tconst isBuff = !isArr && !isArg && isBuffer(value);\n\tconst isType = !isArr && !isArg && !isBuff && isTypedArray(value);\n\tconst skipIndexes = isArr || isArg || isBuff || isType;\n\tconst result = skipIndexes ? baseTimes(value.length, String) : [];\n\tconst length = result.length;\n\n\tfor (const key in value) {\n\t\tif ((inherited || hasOwnProperty.call(value, key)) &&\n\t\t\t!(skipIndexes && (\n\t\t\t\t// Safari 9 has enumerable `arguments.length` in strict mode.\n\t\t\t\tkey == \"length\" ||\n\t\t\t\t// Node.js 0.10 has enumerable non-index properties on buffers.\n\t\t\t\t(isBuff && (key == \"offset\" || key == \"parent\")) ||\n\t\t\t\t// PhantomJS 2 has enumerable non-index properties on typed arrays.\n\t\t\t\t(isType && (key == \"buffer\" || key == \"byteLength\" || key == \"byteOffset\")) ||\n\t\t\t\t// Skip index properties.\n\t\t\t\tisIndex(key, length)\n\t\t\t))) {\n\t\t\tresult.push(key);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction assignValue(object: any, key: string, value: any): void {\n\tconst objValue = object[key];\n\tif (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n\t\t(value === undefined && !(key in object))) {\n\t\tbaseAssignValue(object, key, value);\n\t}\n}\n\nfunction assocIndexOf(array: any[], key: any): number {\n\tlet length = array.length;\n\twhile (length--) {\n\t\tif (eq(array[length][0], key)) {\n\t\t\treturn length;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction baseAssign(object: any, source: any): any {\n\treturn object && copyObject(source, keys(source), object);\n}\n\nfunction baseAssignIn(object: any, source: any): any {\n\treturn object && copyObject(source, keysIn(source), object);\n}\n\nfunction baseAssignValue(object: any, key: string, value: any): void {\n\tif (key == \"__proto__\" && Object.defineProperty) {\n\t\tObject.defineProperty(object, key, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: value,\n\t\t\twritable: true,\n\t\t});\n\t} else {\n\t\tobject[key] = value;\n\t}\n}\n\nfunction baseClone(value: any, bitmask: number, customizer?: Function, key?: string, object?: any, stack?: any): any {\n\tlet result: any;\n\tconst isDeep = bitmask & CLONE_DEEP_FLAG;\n\tconst isFlat = bitmask & CLONE_FLAT_FLAG;\n\tconst isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n\tif (customizer) {\n\t\tresult = object ? customizer(value, key, object, stack) : customizer(value);\n\t}\n\tif (result !== undefined) {\n\t\treturn result;\n\t}\n\tif (!isObject(value)) {\n\t\treturn value;\n\t}\n\tconst isArr = isArray(value);\n\tif (isArr) {\n\t\tresult = initCloneArray(value);\n\t\tif (!isDeep) {\n\t\t\treturn copyArray(value, result);\n\t\t}\n\t} else {\n\t\tconst tag = getTag(value);\n\t\tconst isFunc = tag == funcTag || tag == genTag;\n\n\t\tif (isBuffer(value)) {\n\t\t\treturn cloneBuffer(value, !!isDeep);\n\t\t}\n\t\tif (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n\t\t\tresult = (isFlat || isFunc) ? {} : initCloneObject(value);\n\t\t\tif (!isDeep) {\n\t\t\t\treturn isFlat\n\t\t\t\t\t? copySymbolsIn(value, baseAssignIn(result, value))\n\t\t\t\t\t: copySymbols(value, baseAssign(result, value));\n\t\t\t}\n\t\t} else {\n\t\t\tif (!cloneableTags[tag]) {\n\t\t\t\treturn object ? value : {};\n\t\t\t}\n\t\t\tresult = initCloneByTag(value, tag, !!isDeep);\n\t\t}\n\t}\n\t// Check for circular references and return its corresponding clone.\n\tstack = (!stack) ? new Stack() : stack;\n\tconst stacked = stack.get(value);\n\tif (stacked) {\n\t\treturn stacked;\n\t}\n\tstack.set(value, result);\n\n\tif (isSet(value)) {\n\t\tvalue.forEach(function(subValue: any) {\n\t\t\tresult.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n\t\t});\n\t} else if (isMap(value)) {\n\t\tvalue.forEach(function(subValue: any, key: string) {\n\t\t\tresult.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n\t\t});\n\t}\n\n\tconst keysFunc = isFull ? (isFlat ? getAllKeysIn : getAllKeys) : (isFlat ? keysIn : keys);\n\tconst props = isArr ? undefined : keysFunc(value);\n\tarrayEach(props || value, function(subValue: any, key: string) {\n\t\tif (props) {\n\t\t\tkey = subValue;\n\t\t\tsubValue = value[key];\n\t\t}\n\t\t// Recursively populate clone (susceptible to call stack limits).\n\t\tassignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n\t});\n\treturn result;\n}\n\nfunction baseGetAllKeys(object: any, keysFunc: Function, symbolsFunc: Function): any[] {\n\tconst result = keysFunc(object);\n\treturn isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nfunction baseGetTag(value: any): string {\n\tif (value == null) {\n\t\treturn value === undefined ? undefinedTag : nullTag;\n\t}\n\treturn (symToStringTag && symToStringTag in Object(value))\n\t\t? getRawTag(value)\n\t\t: objectToString(value);\n}\n\nfunction baseIsArguments(value: any): boolean {\n\treturn isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nfunction baseIsEqual(value: any, other: any, bitmask?: number, customizer?: Function, stack?: any): boolean {\n\tif (value === other) {\n\t\treturn true;\n\t}\n\tif (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n\t\treturn value !== value && other !== other;\n\t}\n\treturn baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nfunction baseIsEqualDeep(object: any, other: any, bitmask: number, customizer: Function, equalFunc: Function, stack: any): boolean {\n\tlet objIsArr = isArray(object);\n\tconst othIsArr = isArray(other);\n\tlet objTag = objIsArr ? arrayTag : getTag(object);\n\tlet othTag = othIsArr ? arrayTag : getTag(other);\n\n\tobjTag = objTag == argsTag ? objectTag : objTag;\n\tothTag = othTag == argsTag ? objectTag : othTag;\n\n\tlet objIsObj = objTag == objectTag;\n\tconst othIsObj = othTag == objectTag;\n\tconst isSameTag = objTag == othTag;\n\n\tif (isSameTag && isBuffer(object)) {\n\t\tif (!isBuffer(other)) {\n\t\t\treturn false;\n\t\t}\n\t\tobjIsArr = true;\n\t\tobjIsObj = false;\n\t}\n\tif (isSameTag && !objIsObj) {\n\t\tstack = (!stack) ? new Stack() : stack;\n\t\treturn (objIsArr || isTypedArray(object))\n\t\t\t? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n\t\t\t: equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n\t}\n\tif (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n\t\tconst objIsWrapped = objIsObj && hasOwnProperty.call(object, \"__wrapped__\");\n\t\tconst othIsWrapped = othIsObj && hasOwnProperty.call(other, \"__wrapped__\");\n\n\t\tif (objIsWrapped || othIsWrapped) {\n\t\t\tconst objUnwrapped = objIsWrapped ? object.value() : object;\n\t\t\tconst othUnwrapped = othIsWrapped ? other.value() : other;\n\n\t\t\tstack = (!stack) ? new Stack() : stack;\n\t\t\treturn equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n\t\t}\n\t}\n\tif (!isSameTag) {\n\t\treturn false;\n\t}\n\tstack = (!stack) ? new Stack() : stack;\n\treturn equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nfunction baseIsMap(value: any): boolean {\n\treturn isObjectLike(value) && getTag(value) == mapTag;\n}\n\nfunction baseIsNative(value: any): boolean {\n\tif (!isObject(value) || isMasked(value)) {\n\t\treturn false;\n\t}\n\tconst pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n\treturn pattern.test(toSource(value));\n}\n\nfunction baseIsSet(value: any): boolean {\n\treturn isObjectLike(value) && getTag(value) == setTag;\n}\n\nfunction baseIsTypedArray(value: any): boolean {\n\treturn isObjectLike(value) &&\n\t\tisLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nfunction baseKeys(object: any): string[] {\n\tif (!isPrototype(object)) {\n\t\treturn nativeKeys(object);\n\t}\n\tconst result = [];\n\tfor (const key in Object(object)) {\n\t\tif (hasOwnProperty.call(object, key) && key != \"constructor\") {\n\t\t\tresult.push(key);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction baseKeysIn(object: any): string[] {\n\tif (!isObject(object)) {\n\t\treturn nativeKeysIn(object);\n\t}\n\tconst isProto = isPrototype(object);\n\tconst result = [];\n\n\tfor (const key in object) {\n\t\tif (!(key == \"constructor\" && (isProto || !hasOwnProperty.call(object, key)))) {\n\t\t\tresult.push(key);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction cloneBuffer(buffer: Buffer, isDeep: boolean): Buffer {\n\tif (isDeep) {\n\t\treturn buffer.slice();\n\t}\n\tconst length = buffer.length;\n\tconst result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n\tbuffer.copy(result);\n\treturn result;\n}\n\nfunction cloneArrayBuffer(arrayBuffer: ArrayBuffer): ArrayBuffer {\n\tconst ctor: any = arrayBuffer[\"constructor\"];\n\tconst result = new ctor(arrayBuffer.byteLength);\n\tnew Uint8Array(result).set(new Uint8Array(arrayBuffer));\n\treturn result;\n}\n\nfunction cloneDataView(dataView: any, isDeep: boolean): any {\n\tconst buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n\treturn new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nfunction cloneRegExp(regexp: any): any {\n\tconst result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n\tresult.lastIndex = regexp.lastIndex;\n\treturn result;\n}\n\nfunction cloneSymbol(symbol: any): any {\n\treturn symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nfunction cloneTypedArray(typedArray: any, isDeep: boolean): any {\n\tconst buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n\treturn new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nfunction copyArray(source: any[], array?: any[]): any[] {\n\tlet index = -1;\n\tconst length = source.length;\n\n\tarray = (!array) ? Array(length) : array;\n\twhile (++index < length) {\n\t\tarray[index] = source[index];\n\t}\n\treturn array;\n}\n\nfunction copyObject(source: any, props: string[], object?: any, customizer?: Function): any {\n\tconst isNew = !object;\n\tobject = (isNew) ? {} : object;\n\n\tlet index = -1;\n\tconst length = props.length;\n\n\twhile (++index < length) {\n\t\tconst key = props[index];\n\n\t\tlet newValue = customizer\n\t\t\t? customizer(object[key], source[key], key, object, source)\n\t\t\t: undefined;\n\n\t\tif (newValue === undefined) {\n\t\t\tnewValue = source[key];\n\t\t}\n\t\tif (isNew) {\n\t\t\tbaseAssignValue(object, key, newValue);\n\t\t} else {\n\t\t\tassignValue(object, key, newValue);\n\t\t}\n\t}\n\treturn object;\n}\n\nfunction copySymbols(source: any, object: any): any {\n\treturn copyObject(source, getSymbols(source), object);\n}\n\nfunction copySymbolsIn(source: any, object: any): any {\n\treturn copyObject(source, getSymbolsIn(source), object);\n}\n\nfunction equalArrays(array: any[], other: any[], bitmask: number, customizer: Function, equalFunc: Function, stack: any): boolean {\n\tconst isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n\tconst arrLength = array.length;\n\tconst othLength = other.length;\n\n\tif (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n\t\treturn false;\n\t}\n\t// Assume cyclic values are equal.\n\tconst stacked = stack.get(array);\n\tif (stacked && stack.get(other)) {\n\t\treturn stacked == other;\n\t}\n\tlet index = -1;\n\tlet result = true;\n\tconst seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache() : undefined;\n\n\tstack.set(array, other);\n\tstack.set(other, array);\n\n\t// Ignore non-index properties.\n\twhile (++index < arrLength) {\n\t\tconst arrValue = array[index];\n\t\tconst othValue = other[index];\n\n\t\tlet compared;\n\t\tif (customizer) {\n\t\t\tcompared = isPartial\n\t\t\t\t? customizer(othValue, arrValue, index, other, array, stack)\n\t\t\t\t: customizer(arrValue, othValue, index, array, other, stack);\n\t\t}\n\t\tif (compared !== undefined) {\n\t\t\tif (compared) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tresult = false;\n\t\t\tbreak;\n\t\t}\n\t\t// Recursively compare arrays (susceptible to call stack limits).\n\t\tif (seen) {\n\t\t\tif (!arraySome(other, function(othValue: any, othIndex: any) {\n\t\t\t\tif (!cacheHas(seen, othIndex) &&\n\t\t\t\t\t(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n\t\t\t\t\treturn seen.push(othIndex);\n\t\t\t\t}\n\t\t\t})) {\n\t\t\t\tresult = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if (!(\n\t\t\tarrValue === othValue ||\n\t\t\tequalFunc(arrValue, othValue, bitmask, customizer, stack)\n\t\t)) {\n\t\t\tresult = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\tstack[\"delete\"](array);\n\tstack[\"delete\"](other);\n\treturn result;\n}\n\nfunction equalByTag(object: any, other: any, tag: string, bitmask: number, customizer: Function, equalFunc: Function, stack: any): boolean {\n\tswitch (tag) {\n\t\tcase dataViewTag:\n\t\t\tif ((object.byteLength != other.byteLength) ||\n\t\t\t\t(object.byteOffset != other.byteOffset)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tobject = object.buffer;\n\t\t\tother = other.buffer;\n\n\t\tcase arrayBufferTag:\n\t\t\tif ((object.byteLength != other.byteLength) ||\n\t\t\t\t!equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\n\t\tcase boolTag:\n\t\tcase dateTag:\n\t\tcase numberTag:\n\t\t\t// Coerce booleans to `1` or `0` and dates to milliseconds.\n\t\t\t// Invalid dates are coerced to `NaN`.\n\t\t\treturn eq(+object, +other);\n\n\t\tcase errorTag:\n\t\t\treturn object.name == other.name && object.message == other.message;\n\n\t\tcase regexpTag:\n\t\tcase stringTag:\n\t\t\t// Coerce regexes to strings and treat strings, primitives and objects,\n\t\t\t// as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n\t\t\t// for more details.\n\t\t\treturn object == (other + \"\");\n\n\t\tcase mapTag:\n\t\t\tlet convert = mapToArray;\n\n\t\tcase setTag:\n\t\t\tconst isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n\t\t\tconvert = (!convert) ? setToArray : convert;\n\n\t\t\tif (object.size != other.size && !isPartial) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Assume cyclic values are equal.\n\t\t\tconst stacked = stack.get(object);\n\t\t\tif (stacked) {\n\t\t\t\treturn stacked == other;\n\t\t\t}\n\t\t\tbitmask |= COMPARE_UNORDERED_FLAG;\n\n\t\t\t// Recursively compare objects (susceptible to call stack limits).\n\t\t\tstack.set(object, other);\n\t\t\tconst result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n\t\t\tstack[\"delete\"](object);\n\t\t\treturn result;\n\n\t\tcase symbolTag:\n\t\t\tif (symbolValueOf) {\n\t\t\t\treturn symbolValueOf.call(object) == symbolValueOf.call(other);\n\t\t\t}\n\t}\n\treturn false;\n}\n\nfunction equalObjects(object: any, other: any, bitmask: number, customizer: Function, equalFunc: Function, stack: any): boolean {\n\tconst isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n\tconst objProps = getAllKeys(object);\n\tconst objLength = objProps.length;\n\tconst othProps = getAllKeys(other);\n\tconst othLength = othProps.length;\n\n\tif (objLength != othLength && !isPartial) {\n\t\treturn false;\n\t}\n\tlet index = objLength;\n\twhile (index--) {\n\t\tconst key = objProps[index];\n\t\tif (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t// Assume cyclic values are equal.\n\tconst stacked = stack.get(object);\n\tif (stacked && stack.get(other)) {\n\t\treturn stacked == other;\n\t}\n\tlet result = true;\n\tstack.set(object, other);\n\tstack.set(other, object);\n\n\tlet skipCtor: boolean = !!isPartial;\n\twhile (++index < objLength) {\n\t\tconst key = objProps[index];\n\t\tconst objValue = object[key];\n\t\tconst othValue = other[key];\n\n\t\tlet compared;\n\t\tif (customizer) {\n\t\t\tcompared = isPartial\n\t\t\t\t? customizer(othValue, objValue, key, other, object, stack)\n\t\t\t\t: customizer(objValue, othValue, key, object, other, stack);\n\t\t}\n\t\t// Recursively compare objects (susceptible to call stack limits).\n\t\tif (!(compared === undefined\n\t\t\t? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n\t\t\t: compared\n\t\t)) {\n\t\t\tresult = false;\n\t\t\tbreak;\n\t\t}\n\t\tskipCtor = (!skipCtor) ? key == \"constructor\" : skipCtor;\n\t}\n\tif (result && !skipCtor) {\n\t\tconst objCtor = object.constructor;\n\t\tconst othCtor = other.constructor;\n\n\t\t// Non `Object` object instances with different constructors are not equal.\n\t\tif (objCtor != othCtor &&\n\t\t\t(\"constructor\" in object && \"constructor\" in other) &&\n\t\t\t!(typeof objCtor == \"function\" && objCtor instanceof objCtor &&\n\t\t\t\ttypeof othCtor == \"function\" && othCtor instanceof othCtor)) {\n\t\t\tresult = false;\n\t\t}\n\t}\n\tstack[\"delete\"](object);\n\tstack[\"delete\"](other);\n\treturn result;\n}\n\nfunction getAllKeys(object: any): string[] {\n\treturn baseGetAllKeys(object, keys, getSymbols);\n}\n\nfunction getAllKeysIn(object: any): string[] {\n\treturn baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nfunction getMapData(map: any, key: string): any {\n\tconst data = map.__DATA__;\n\n\treturn isKeyable(key) ? data[typeof key === \"string\" ? \"string\" : \"hash\"]\n\t\t: data.map;\n}\n\nfunction getNative(object: any, key: string): any {\n\tconst value = getValue(object, key);\n\treturn baseIsNative(value) ? value : undefined;\n}\n\nfunction getRawTag(value: any): string {\n\tconst isOwn = hasOwnProperty.call(value, symToStringTag);\n\tconst tag = value[symToStringTag];\n\n\tlet unmasked = false;\n\n\ttry {\n\t\tvalue[symToStringTag] = undefined;\n\t\tunmasked = true;\n\t} catch (e) {\n\t\t// Intentionally do nothing\n\t}\n\n\tconst result = nativeObjectToString.call(value);\n\n\tif (unmasked) {\n\t\tif (isOwn) {\n\t\t\tvalue[symToStringTag] = tag;\n\t\t} else {\n\t\t\tdelete value[symToStringTag];\n\t\t}\n\t}\n\n\treturn result;\n}\n\nconst getSymbols: (source: any) => string[] = !nativeGetSymbols ? stubArray : function(object) {\n\tif (object == null) {\n\t\treturn [];\n\t}\n\tobject = Object(object);\n\treturn arrayFilter(nativeGetSymbols(object), function(symbol: any) {\n\t\treturn propertyIsEnumerable.call(object, symbol);\n\t});\n};\n\nconst getSymbolsIn: (source: any) => string[] = !nativeGetSymbols ? stubArray : function(object) {\n\tconst result = [];\n\n\twhile (object) {\n\t\tarrayPush(result, getSymbols(object));\n\t\tobject = getPrototype(object);\n\t}\n\n\treturn result;\n};\n\nlet getTag: (source: any) => string = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) !== dataViewTag) ||\n\t(Map && getTag(new Map()) !== mapTag) ||\n\t(Promise && getTag(Promise.resolve()) !== promiseTag) ||\n\t(Set && getTag(new Set()) !== setTag) ||\n\t(WeakMap && getTag(new WeakMap()) !== weakMapTag)) {\n\tgetTag = function(value) {\n\t\tconst result = baseGetTag(value);\n\t\tconst Ctor = result === objectTag ? value.constructor : undefined;\n\t\tconst ctorString = Ctor ? toSource(Ctor) : \"\";\n\n\t\tif (ctorString) {\n\t\t\tswitch (ctorString) {\n\t\t\t\tcase dataViewCtorString: return dataViewTag;\n\t\t\t\tcase mapCtorString: return mapTag;\n\t\t\t\tcase promiseCtorString: return promiseTag;\n\t\t\t\tcase setCtorString: return setTag;\n\t\t\t\tcase weakMapCtorString: return weakMapTag;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n}\n\nfunction initCloneArray(array: any): any[] {\n\tconst length = array.length;\n\tconst result = new array.constructor(length);\n\n\t// Add properties assigned by `RegExp#exec`.\n\tif (length && typeof array[0] === \"string\" && hasOwnProperty.call(array, \"index\")) {\n\t\tresult.index = array.index;\n\t\tresult.input = array.input;\n\t}\n\treturn result;\n}\n\nfunction initCloneObject(object: any): any {\n\treturn (typeof object.constructor === \"function\" && !isPrototype(object))\n\t\t? baseCreate(getPrototype(object))\n\t\t: {};\n}\n\nfunction initCloneByTag(object: any, tag: string, isDeep: boolean): any {\n\tconst Ctor = object.constructor;\n\n\tswitch (tag) {\n\t\tcase arrayBufferTag:\n\t\t\treturn cloneArrayBuffer(object);\n\n\t\tcase boolTag:\n\t\tcase dateTag:\n\t\t\treturn new Ctor(+object);\n\n\t\tcase dataViewTag:\n\t\t\treturn cloneDataView(object, isDeep);\n\n\t\tcase float32Tag: case float64Tag:\n\t\tcase int8Tag: case int16Tag: case int32Tag:\n\t\tcase uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n\t\t\treturn cloneTypedArray(object, isDeep);\n\n\t\tcase mapTag:\n\t\t\treturn new Ctor();\n\n\t\tcase numberTag:\n\t\tcase stringTag:\n\t\t\treturn new Ctor(object);\n\n\t\tcase regexpTag:\n\t\t\treturn cloneRegExp(object);\n\n\t\tcase setTag:\n\t\t\treturn new Ctor();\n\n\t\tcase symbolTag:\n\t\t\treturn cloneSymbol(object);\n\t}\n}\n\nfunction isIndex(value: any, length?: number): boolean {\n\tconst type = typeof value;\n\tlength = length == null ? MAX_SAFE_INTEGER : length;\n\n\treturn !!length &&\n\t\t(type === \"number\" ||\n\t\t\t(type !== \"symbol\" && reIsUint.test(value))) &&\n\t\t(value > -1 && value % 1 === 0 && value < length);\n}\n\nfunction isKeyable(value: any): boolean {\n\tconst type = typeof value;\n\n\treturn (type === \"string\" || type === \"number\" || type === \"symbol\" || type === \"boolean\")\n\t\t? (value !== \"__proto__\")\n\t\t: (value === null);\n}\n\nfunction isMasked(func: Function): boolean {\n\treturn !!maskSrcKey && (maskSrcKey in func);\n}\n\nfunction isPrototype(value: any): boolean {\n\tconst Ctor = value && value.constructor;\n\tconst proto = (typeof Ctor === \"function\" && Ctor.prototype) || objectProto;\n\n\treturn value === proto;\n}\n\nfunction nativeKeysIn(object: any): any[] {\n\tconst result = [];\n\n\tif (object != null) {\n\t\t/* tslint:disable-next-line */\n\t\tfor (const key in Object(object)) {\n\t\t\tresult.push(key);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction objectToString(value: any): string {\n\treturn nativeObjectToString.call(value);\n}\n\nfunction toSource(func: Function): string {\n\tif (func != null) {\n\t\ttry {\n\t\t\treturn funcToString.call(func);\n\t\t} catch (e) {\n\t\t\t// Intentionally do nothing\n\t\t}\n\t\ttry {\n\t\t\treturn (func + \"\");\n\t\t} catch (e) {\n\t\t\t// Intentionally do nothing\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction memoize(func: Function, resolver: Function): Function {\n\tif (typeof func !== \"function\" || (resolver != null && typeof resolver !== \"function\")) {\n\t\tthrow new TypeError(FUNC_ERROR_TEXT);\n\t}\n\n\tconst memoized = function() {\n\t\tconst args = arguments;\n\t\tconst key = resolver ? resolver.apply(this, args) : args[0];\n\t\tconst cache = memoized[\"cache\"];\n\n\t\tif (cache.has(key)) {\n\t\t\treturn cache.get(key);\n\t\t}\n\n\t\tconst result = func.apply(this, args);\n\t\tmemoized[\"cache\"] = cache.set(key, result) || cache;\n\n\t\treturn result;\n\t};\n\n\tmemoized[\"cache\"] = new (memoize.Cache || MapCache)();\n\n\treturn memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nfunction cloneDeep(value: any): any {\n\treturn baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nfunction eq(value: any, other: any): boolean {\n\treturn value === other || (value !== value && other !== other);\n}\n\nconst isArguments: (value: any) => boolean = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n\treturn isObjectLike(value) && hasOwnProperty.call(value, \"callee\") && !propertyIsEnumerable.call(value, \"callee\");\n};\n\nconst isArray: (value: any) => boolean = Array.isArray;\n\nfunction isArrayLike(value: any): boolean {\n\treturn value != null && isLength(value.length) && !isFunction(value);\n}\n\nconst isBuffer: (value: any) => boolean = nativeIsBuffer || stubFalse;\n\nfunction isEqual(value: any, other: any): boolean {\n\treturn baseIsEqual(value, other);\n}\n\nfunction isFunction(value: any): boolean {\n\tif (!isObject(value)) {\n\t\treturn false;\n\t}\n\n\tconst tag = baseGetTag(value);\n\n\treturn tag === funcTag || tag === genTag || tag === asyncTag || tag === proxyTag;\n}\n\nfunction isLength(value: any): boolean {\n\treturn typeof value === \"number\" && value > -1 && value % 1 === 0 && value <= MAX_SAFE_INTEGER;\n}\n\nfunction isObject(value: any): boolean {\n\tconst type = typeof value;\n\treturn value != null && (type === \"object\" || type === \"function\");\n}\n\nfunction isObjectLike(value: any): boolean {\n\treturn value != null && typeof value === \"object\";\n}\n\nconst isMap: (value: any) => boolean = baseIsMap;\n\nconst isSet: (value: any) => boolean = baseIsSet;\n\nconst isTypedArray: (value: any) => boolean = baseIsTypedArray;\n\nfunction keys(object: any): string[] {\n\treturn isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nfunction keysIn(object: any): string[] {\n\treturn isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nfunction stubArray(): any[] {\n\treturn [];\n}\n\nfunction stubFalse(): boolean {\n\treturn false;\n}\n\nconst encodeHtmlMap: any = {\n\t'\"': \"&quot;\",\n\t\"&\": \"&amp;\",\n\t\"'\": \"&#39;\",\n\t\"<\": \"&lt;\",\n\t\">\": \"&gt;\",\n};\n\nfunction lookupEncodeHtmlMap(key: string): string {\n\treturn encodeHtmlMap[key];\n}\n\nfunction encodeHtml(source: string): string {\n\treturn (source === null) ? null : (source + \"\").replace(/[&\"'<>]/g, lookupEncodeHtmlMap);\n}\n\nexport default {\n\tclone: function(source: any) {\n\t\treturn cloneDeep(source);\n\t},\n\tequals: function(first: any, second: any): boolean {\n\t\treturn isEqual(first, second);\n\t},\n\tencodeHtml: encodeHtml\n};\n","interface ComponentConfig {\n\n\tgetMetadata(key: string): any;\n\n\tgetPrefix(): string;\n\n\tgetAttributes(): string[];\n\n}\n\nclass ComponentConfigImpl implements ComponentConfig {\n\n\tprivate metadata: any;\n\n\tprivate attributes: string[];\n\n\tprivate prefix: string;\n\n\tconstructor() {\n\t\tthis.metadata = {};\n\t\tthis.attributes = [];\n\t\tthis.prefix = \"c\";\n\t}\n\n\tpublic getMetadata(key: string): any {\n\t\treturn (key) ? this.metadata[key] : null;\n\t}\n\n\tpublic getPrefix(): string {\n\t\treturn this.prefix;\n\t}\n\n\tpublic getAttributes(): string[] {\n\t\treturn this.attributes.slice();\n\t}\n\n\tpublic withMetadata(name: string, value: any): void {\n\t\tthis.metadata[name] = value;\n\t}\n\n\tpublic withAttribute(name: string): void {\n\t\tthis.attributes.push(name);\n\t}\n\n\tpublic withPrefix(prefix: string): void {\n\t\tthis.prefix = prefix;\n\t}\n\n}\n\nclass ComponentConfigBuilder {\n\n\tprivate instance: ComponentConfigImpl;\n\n\tconstructor() {\n\t\tthis.instance = new ComponentConfigImpl();\n\t}\n\n\tpublic withMetadata(name: string, value: any): ComponentConfigBuilder {\n\t\tthis.instance.withMetadata(name, value);\n\n\t\treturn this;\n\t}\n\n\tpublic withAttribute(name: string): ComponentConfigBuilder {\n\t\tthis.instance.withAttribute(name);\n\n\t\treturn this;\n\t}\n\n\tpublic withPrefix(prefix: string): ComponentConfigBuilder {\n\t\tthis.instance.withPrefix(prefix);\n\n\t\treturn this;\n\t}\n\n\tpublic build(): ComponentConfig {\n\t\treturn this.instance;\n\t}\n\n}\n\nexport { ComponentConfig, ComponentConfigBuilder };\n","import Logger from \"./logger/Logger\";\nimport LoggerFactory from \"./logger/LoggerFactory\";\nimport ScopeImpl from \"./ScopeImpl\";\n\nclass Getter<T> {\n\n\tprivate expression: string;\n\n\tprivate logger: Logger;\n\n\tconstructor(expression: string) {\n\t\tthis.expression = expression;\n\t\tthis.logger = LoggerFactory.getLogger(\"Getter: \" + expression);\n\t}\n\n\tpublic get(scope: ScopeImpl): T {\n\t\tconst code: string = '\"use strict\"; ' + scope.getCode() + \" return (\" + this.expression + \");\";\n\t\tlet value: any = null;\n\n\t\ttry {\n\t\t\tvalue = Function(code).apply({}, [scope.getItems()]);\n\t\t} catch (e) {\n\t\t\tthis.logInvocationError(code, e);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tprivate logInvocationError(code: string, e: Error) {\n\t\tthis.logger.error(\"\\nAn exception (\" + e.name + \") was thrown invoking the element mediator expression: \" + this.expression\n\t\t\t + \"\\n\\nIn context:\\n\" + code + \"\\n\\nException message: \" + e.message + \"\\n\\n\", e);\n\t}\n\n}\n\nexport default Getter;\n","import Level from \"./Level\";\nimport Logger from \"./Logger\";\nimport LoggerService from \"./LoggerService\";\n\nconst LOGGER_NAME_LENGTH = 20;\n\nclass LoggerImpl implements Logger {\n\n\tprivate name: string;\n\n\tprivate loggerService: LoggerService;\n\n\tconstructor(name: string, loggerService: LoggerService) {\n\t\tif (name.length < LOGGER_NAME_LENGTH) {\n\t\t\tlet count: number = LOGGER_NAME_LENGTH - name.length;\n\n\t\t\twhile (count > 0) {\n\t\t\t\tname = name + \" \";\n\t\t\t\t--count;\n\t\t\t}\n\t\t}\n\n\t\tthis.name = name;\n\t\tthis.loggerService = loggerService;\n\t}\n\n\tpublic trace(payload: any, error?: Error): void {\n\t\tthis.loggerService.log(this, Level.TRACE, payload, error);\n\t}\n\n\tpublic ifTrace(payloadFn: () => any, error?: Error): void {\n\t\tif (this.isTrace()) {\n\t\t\tthis.trace(payloadFn(), error);\n\t\t}\n\t}\n\n\tpublic debug(payload: any, error?: Error): void {\n\t\tthis.loggerService.log(this, Level.DEBUG, payload, error);\n\t}\n\n\tpublic ifDebug(payloadFn: () => any, error?: Error): void {\n\t\tif (this.isDebug()) {\n\t\t\tthis.debug(payloadFn(), error);\n\t\t}\n\t}\n\n\tpublic info(payload: any, error?: Error): void {\n\t\tthis.loggerService.log(this, Level.INFO, payload, error);\n\t}\n\n\tpublic ifInfo(payloadFn: () => any, error?: Error): void {\n\t\tif (this.isInfo()) {\n\t\t\tthis.info(payloadFn(), error);\n\t\t}\n\t}\n\n\tpublic warn(payload: any, error?: Error): void {\n\t\tthis.loggerService.log(this, Level.WARN, payload, error);\n\t}\n\n\tpublic ifWarn(payloadFn: () => any, error?: Error): void {\n\t\tif (this.isWarn()) {\n\t\t\tthis.warn(payloadFn(), error);\n\t\t}\n\t}\n\n\tpublic error(payload: any, error?: Error): void {\n\t\tthis.loggerService.log(this, Level.ERROR, payload, error);\n\t}\n\n\tpublic ifError(payloadFn: () => any, error?: Error): void {\n\t\tif (this.isError()) {\n\t\t\tthis.error(payloadFn(), error);\n\t\t}\n\t}\n\n\tpublic fatal(payload: any, error?: Error): void {\n\t\tthis.loggerService.log(this, Level.FATAL, payload, error);\n\t}\n\n\tpublic ifFatal(payloadFn: () => any, error?: Error): void {\n\t\tif (this.isFatal()) {\n\t\t\tthis.fatal(payloadFn(), error);\n\t\t}\n\t}\n\n\tpublic isTrace(): boolean {\n\t\treturn this.loggerService.isTrace();\n\t}\n\n\tpublic isDebug(): boolean {\n\t\treturn this.loggerService.isDebug();\n\t}\n\n\tpublic isInfo(): boolean {\n\t\treturn this.loggerService.isInfo();\n\t}\n\n\tpublic isWarn(): boolean {\n\t\treturn this.loggerService.isWarn();\n\t}\n\n\tpublic isError(): boolean {\n\t\treturn this.loggerService.isError();\n\t}\n\n\tpublic isFatal(): boolean {\n\t\treturn this.loggerService.isFatal();\n\t}\n\n\tpublic isDisable(): boolean {\n\t\treturn this.loggerService.isDisable();\n\t}\n\n\tpublic getName(): string {\n\t\treturn this.name;\n\t}\n\n}\n\nexport default LoggerImpl;\n","import ConsoleOutputStrategy from \"./ConsoleOutputStrategy\";\nimport Level from \"./Level\";\nimport LevelUtils from \"./LevelUtils\";\nimport Logger from \"./Logger\";\nimport LoggerImpl from \"./LoggerImpl\";\nimport OutputStrategy from \"./OutputStrategy\";\n\nclass LoggerService {\n\n\tpublic static INSTANCE: LoggerService = new LoggerService();\n\n\tprivate level: Level;\n\n\tprivate outputStrategy: OutputStrategy;\n\n\tprivate logger: LoggerImpl;\n\n\tconstructor() {\n\t\tthis.level = Level.INFO;\n\t\tthis.outputStrategy = new ConsoleOutputStrategy();\n\t\tthis.logger = new LoggerImpl(\"LoggerService\", this);\n\t}\n\n\tpublic log(logger: Logger, level: Level, payload: any, errorStack?: Error | boolean): void {\n\t\tif (level >= this.level && level !== Level.DISABLE) {\n\t\t\tthis.outputStrategy.log(logger, level, payload, errorStack);\n\t\t}\n\t}\n\n\tpublic setLevel(level: Level): void {\n\t\tthis.level = level;\n\t\tthis.log(this.logger, Level.DEBUG, \"Logging level: \" + LevelUtils.stringValueOf(level));\n\t}\n\n\tpublic isTrace(): boolean {\n\t\treturn (Level.TRACE >= this.level);\n\t}\n\n\tpublic isDebug(): boolean {\n\t\treturn (Level.DEBUG >= this.level);\n\t}\n\n\tpublic isInfo(): boolean {\n\t\treturn (Level.INFO >= this.level);\n\t}\n\n\tpublic isWarn(): boolean {\n\t\treturn (Level.WARN >= this.level);\n\t}\n\n\tpublic isError(): boolean {\n\t\treturn (Level.ERROR >= this.level);\n\t}\n\n\tpublic isFatal(): boolean {\n\t\treturn (Level.FATAL >= this.level);\n\t}\n\n\tpublic isDisable(): boolean {\n\t\treturn (Level.DISABLE >= this.level);\n\t}\n\n}\n\nexport default LoggerService;\n","import Logger from \"./logger/Logger\";\nimport LoggerFactory from \"./logger/LoggerFactory\";\nimport ScopeImpl from \"./ScopeImpl\";\n\nclass Setter<T> {\n\n\tprivate expression: string;\n\n\tprivate logger: Logger;\n\n\tconstructor(expression: string) {\n\t\tthis.expression = expression;\n\t\tthis.logger = LoggerFactory.getLogger(\"Setter: \" + expression);\n\t}\n\n\tpublic set(scope: ScopeImpl, value: T): void {\n\t\tconst code: string = '\"use strict\"; ' + scope.getCode() + \" \" + this.expression + \" = arguments[1];\";\n\n\t\ttry {\n\t\t\tFunction(code).apply({}, [scope.getItems(), value]);\n\t\t} catch (e) {\n\t\t\tthis.logInvocationError(code, e);\n\t\t}\n\t}\n\n\tprivate logInvocationError(code: string, e: Error) {\n\t\tthis.logger.error(\"\\nAn exception (\" + e.name + \") was thrown invoking the element mediator expression: \" + this.expression\n\t\t\t + \"\\n\\nIn context:\\n\" + code + \"\\n\\nException message: \" + e.message + \"\\n\\n\", e);\n\t}\n\n}\n\nexport default Setter;\n","import { ForChannelContinuation, OnContinuation } from \"../Continuation\";\nimport { INTERNAL_CHANNEL_NAME, Modules } from \"../Core\";\nimport Disposable from \"../Disposable\";\nimport Module from \"../Module\";\nimport Listener from \"./Listener\";\nimport ListenerImpl from \"./ListenerImpl\";\n\n// TODO - Refactor into common constants\nconst INTERNAL_DIRECT_CHANNEL_NAME: string = \"Cydran$$Direct$$Internal$$Channel\";\n\nclass PubSub implements Disposable {\n\n\tprivate listeners: Listener[];\n\n\tprivate listenersByChannel: {};\n\n\tprivate moduleInstance: Module;\n\n\tprivate context: any;\n\n\tprivate globalEnabled: boolean;\n\n\tconstructor(context: any, moduleInstance?: Module) {\n\t\tthis.globalEnabled = false;\n\t\tthis.listeners = [];\n\t\tthis.listenersByChannel = {};\n\t\tthis.context = context;\n\t\tthis.moduleInstance = (moduleInstance) ? moduleInstance : Modules.getModule(\"DEFAULT\");\n\t}\n\n\tpublic message(channelName: string, messageName: string, payload: any): void {\n\t\tif (INTERNAL_DIRECT_CHANNEL_NAME === channelName) {\n\t\t\tif (messageName === \"enableGlobal\") {\n\t\t\t\tthis.enableGlobal();\n\t\t\t} else if (messageName === \"disableGlobal\") {\n\t\t\t\tthis.disableGlobal();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.listeners.forEach((listener) => {\n\t\t\t\tif (channelName === listener.getChannelName()) {\n\t\t\t\t\tlistener.receive(messageName, payload);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic broadcast(channelName: string, messageName: string, payload: any): void {\n\t\tthis.moduleInstance.broadcast(channelName, messageName, payload);\n\t}\n\n\tpublic broadcastGlobally(channelName: string, messageName: string, payload: any): void {\n\t\tModules.broadcast(channelName, messageName, payload);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.disableGlobal();\n\t\tthis.listeners = [];\n\t\tthis.listenersByChannel = {};\n\t}\n\n\tpublic on(messageName: string): OnContinuation {\n\t\tconst mine: PubSub = this;\n\t\treturn {\n\t\t\tforChannel: (channel: string) => {\n\t\t\t\treturn {\n\t\t\t\t\tinvoke: (target: (payload: any) => void) => {\n\t\t\t\t\t\tmine.listenTo(channel, messageName, target);\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t},\n\t\t\tinvoke: (target: (payload: any) => void) => {\n\t\t\t\tmine.listenTo(INTERNAL_CHANNEL_NAME, messageName, target);\n\t\t\t},\n\t\t};\n\t}\n\n\tprivate listenTo(channel: string, messageName: string, target: (payload: any) => void): void {\n\t\tlet listener: Listener = this.listenersByChannel[channel];\n\n\t\tif (!listener) {\n\t\t\tlistener = new ListenerImpl(channel, this.context);\n\n\t\t\tif (this.globalEnabled) {\n\t\t\t\tthis.moduleInstance.message(INTERNAL_DIRECT_CHANNEL_NAME, \"addListener\", listener);\n\t\t\t}\n\n\t\t\tthis.listeners.push(listener);\n\t\t}\n\t\tlistener.register(messageName, target);\n\t}\n\n\tprivate enableGlobal(): void {\n\t\tif (this.globalEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const listener of this.listeners) {\n\t\t\tthis.moduleInstance.message(INTERNAL_DIRECT_CHANNEL_NAME, \"addListener\", listener);\n\t\t}\n\n\t\tthis.globalEnabled = true;\n\t}\n\n\tprivate disableGlobal(): void {\n\t\tif (!this.globalEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const listener of this.listeners) {\n\t\t\tthis.moduleInstance.message(INTERNAL_DIRECT_CHANNEL_NAME, \"removeListener\", listener);\n\t\t}\n\n\t\tthis.globalEnabled = false;\n\t}\n}\n\nexport default PubSub;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import Level from \"./logger/Level\";\nimport LoggerService from \"./logger/LoggerService\";\n\nclass CydranConfig {\n\n\tconstructor() {\n\t\tif (!(this instanceof CydranConfig)) {\n\t\t\tthrow TypeError(new.target.name + \" should be an instance of Config\");\n\t\t}\n\t}\n\n\tpublic useTrace(): void {\n\t\tLoggerService.INSTANCE.setLevel(Level.TRACE);\n\t}\n\n\tpublic useDebug(): void {\n\t\tLoggerService.INSTANCE.setLevel(Level.DEBUG);\n\t}\n\n\tpublic useInfo(): void {\n\t\tLoggerService.INSTANCE.setLevel(Level.INFO);\n\t}\n\n\tpublic useWarn(): void {\n\t\tLoggerService.INSTANCE.setLevel(Level.WARN);\n\t}\n\n\tpublic useError(): void {\n\t\tLoggerService.INSTANCE.setLevel(Level.ERROR);\n\t}\n\n\tpublic useFatal(): void {\n\t\tLoggerService.INSTANCE.setLevel(Level.FATAL);\n\t}\n\n\tpublic useDisable(): void {\n\t\tLoggerService.INSTANCE.setLevel(Level.DISABLE);\n\t}\n}\n\nexport default CydranConfig;\n","import { ComponentConfigBuilder } from \"./ComponentConfig\";\nimport { Component, ElementMediator, Events, Modules } from \"./Core\";\nimport * as CydranConfig from \"./CydranConfig\";\nimport Logger from \"./logger/Logger\";\nimport LoggerFactory from \"./logger/LoggerFactory\";\nimport \"./mediator/\";\nimport \"./messaging/\";\nimport PubSub from \"./messaging/PubSub\";\nimport RegistryStrategy from \"./RegistryStrategy\";\nimport Stage from \"./Stage\";\n\nconst CYDRAN_KEY: string = \"cydran\";\nconst ORIGINAL_CYDRAN: any = window[CYDRAN_KEY];\n\nfunction noConflict() {\n\tconst currentCydran: any = window[CYDRAN_KEY];\n\twindow[CYDRAN_KEY] = ORIGINAL_CYDRAN;\n\n\treturn currentCydran;\n}\n\nexport {\n\tComponentConfigBuilder,\n\tComponent,\n\tEvents,\n\tStage,\n\tElementMediator,\n\tLogger,\n\tLoggerFactory,\n\tCydranConfig,\n\tPubSub,\n\tRegistryStrategy,\n\tModules,\n\tnoConflict,\n};\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass DigestLoopError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) { throw (new.target + NEWI); }\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default DigestLoopError;\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass MalformedOnEventError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) { throw (new.target + NEWI); }\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default MalformedOnEventError;\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass SelectorError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) { throw (new.target + NEWI); }\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default SelectorError;\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass SetComponentError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) { throw (new.target + NEWI); }\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default SetComponentError;\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass TemplateError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) { throw (new.target + NEWI); }\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default TemplateError;\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass UnknownRegionError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) { throw (new.target + NEWI); }\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default UnknownRegionError;\n","import Getter from \"./Getter\";\nimport ScopeImpl from \"./ScopeImpl\";\nimport Setter from \"./Setter\";\n\nclass ExternalMediator<T> {\n\n\tprivate getter: Getter<T>;\n\n\tprivate setter: Setter<T>;\n\n\tconstructor(expression: string) {\n\t\tthis.getter = new Getter(expression);\n\t\tthis.setter = new Setter(expression);\n\t}\n\n\tpublic get(scope: ScopeImpl): T {\n\t\treturn this.getter.get(scope);\n\t}\n\n\tpublic set(scope: ScopeImpl, value: T): void {\n\t\tthis.setter.set(scope, value);\n\t}\n\n}\n\nexport default ExternalMediator;\n","import Level from \"./Level\";\nimport Logger from \"./Logger\";\nimport OutputStrategy from \"./OutputStrategy\";\n\nclass ConsoleOutputStrategy implements OutputStrategy {\n\n\tprivate static getNow(): string {\n\t\tconst now = new Date();\n\n\t\treturn now.getUTCFullYear()\n\t\t\t+ \"-\"\n\t\t\t+ now.getUTCMonth()\n\t\t\t+ \":\"\n\t\t\t+ now.getUTCDate()\n\t\t\t+ \":\"\n\t\t\t+ now.getUTCHours()\n\t\t\t+ \":\"\n\t\t\t+ now.getUTCMinutes()\n\t\t\t+ \":\"\n\t\t\t+ now.getUTCSeconds()\n\t\t\t+ \":\"\n\t\t\t+ now.getUTCMilliseconds();\n\t}\n\n\tpublic log(logger: Logger, level: Level, payload: any, stacked?: Error | boolean): void {\n\n\t\tif (level !== Level.DISABLE) {\n\t\t\tconst wkTStamp = ConsoleOutputStrategy.getNow();\n\t\t\tconst preamble: string = wkTStamp + \" \" + level + \" [\" + logger.getName() + \"]\";\n\n\t\t\tconst shortArgs: boolean = payload instanceof Error;\n\t\t\tconst printFullStack: boolean = !(stacked instanceof Error) ? (null !== stacked ? stacked : false) : false;\n\n\t\t\tif (level >= Level.WARN) {\n\t\t\t\tconst logMsg: string = (shortArgs ? payload.stack : payload);\n\t\t\t\tlet errMsg: string;\n\t\t\t\tif (stacked instanceof Error) {\n\t\t\t\t\terrMsg = stacked.stack;\n\t\t\t\t} else {\n\t\t\t\t\terrMsg = !shortArgs ? \"- FYI ONLY: \" : \"\";\n\t\t\t\t}\n\n\t\t\t\tconst secondPreamble = (shortArgs ? \"\" : ((stacked) ? \" - %s\" : \"\"));\n\n\t\t\t\tswitch (level) {\n\t\t\t\t\tcase Level.WARN:\n\t\t\t\t\t\t// tslint:disable-next-line\n\t\t\t\t\t\tconsole.warn(\"%c\" + preamble + secondPreamble, \"color:#ff9400;\", logMsg, errMsg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Level.ERROR:\n\t\t\t\t\tcase Level.FATAL:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// tslint:disable-next-line\n\t\t\t\t\t\tconsole.error(preamble + secondPreamble, logMsg, errMsg);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch (level) {\n\t\t\t\t\tcase Level.TRACE:\n\t\t\t\t\t\tif (printFullStack) {\n\t\t\t\t\t\t\t// tslint:disable-next-line\n\t\t\t\t\t\t\tconsole.trace(\"%c\" + preamble, \"color:#00752d;\", payload);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// tslint:disable-next-line\n\t\t\t\t\t\t\tconsole.info(\"%c\" + preamble, \"color:#ff9400;\", payload);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Level.DEBUG:\n\t\t\t\t\t\t// tslint:disable-next-line\n\t\t\t\t\t\tconsole.debug(\"%c\" + preamble, \"color:#00752d;\", payload);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Level.INFO:\n\t\t\t\t\t\t// tslint:disable-next-line\n\t\t\t\t\t\tconsole.info(\"%c\" + preamble, \"color:#2d57ca;\", payload);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// tslint:disable-next-line\n\t\t\t\t\t\tconsole.log(preamble, payload);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nexport default ConsoleOutputStrategy;\n","import Level from \"./Level\";\n\nclass LevelUtils {\n\n\tpublic static valueOf(lvl: string): Level {\n\t\treturn Level[lvl];\n\t}\n\n\tpublic static stringValueOf(lvl: Level): string {\n\t\treturn Level[lvl];\n\t}\n\n\tpublic static getKeys(): String[] {\n\t\tconst keys: String[] = [];\n\t\tfor (const k of Object.keys(Level)) {\n\t\t\tif (this.rx.test(k)) {\n\t\t\t\tkeys[k] = this.stringValueOf(Number.parseInt(k, 10));\n\t\t\t}\n\t\t}\n\t\treturn keys;\n\t}\n\n\tpublic static values(): Level[] {\n\t\treturn this.getKeys().map((key: string) => {\n\t\t\treturn Level[key];\n\t\t});\n\t}\n\n\tpublic static size(): number {\n\t\treturn this.getKeys().length;\n\t}\n\n\tprivate static readonly rx = /\\d+/;\n}\n\nexport default LevelUtils;\n","\nclass GuardGenerator {\n\n\tpublic static readonly INSTANCE: GuardGenerator = new GuardGenerator();\n\n\tprivate static readonly MAX_VALUE: number = 9007199254740989;\n\n\tprivate major: number;\n\n\tprivate minor: number;\n\n\tprivate micro: number;\n\n\tconstructor() {\n\t\tthis.major = 0;\n\t\tthis.minor = 0;\n\t\tthis.micro = 0;\n\t}\n\n\tpublic generate(): string {\n\t\tconst result: string = this.major + \"-\" + this.minor + \"-\" + this.micro;\n\n\t\tthis.micro++;\n\n\t\tif (this.micro > GuardGenerator.MAX_VALUE) {\n\t\t\tthis.micro = 0;\n\t\t\tthis.minor++;\n\t\t}\n\n\t\tif (this.minor > GuardGenerator.MAX_VALUE) {\n\t\t\tthis.minor = 0;\n\t\t\tthis.major++;\n\t\t}\n\n\t\treturn result;\n\t}\n\n}\n\nexport default GuardGenerator;\n","import Guard from \"./Guard\";\n\ninterface ValueMap {\n\n\t[key: string]: string;\n\n}\n\nclass GuardImpl implements Guard {\n\n\tpublic static up(original: Guard): Guard {\n\t\treturn original || new GuardImpl(true);\n\t}\n\n\tpublic static down(original: Guard): Guard {\n\t\treturn original || new GuardImpl(false);\n\t}\n\n\tprivate propagateUp: boolean;\n\n\tprivate state: ValueMap;\n\n\tconstructor(propagateUp: boolean) {\n\t\tthis.state = {};\n\t\tthis.propagateUp = !!propagateUp;\n\t}\n\n\tpublic mark(value: string): void {\n\t\tif (value) {\n\t\t\tthis.state[value] = value;\n\t\t}\n\t}\n\n\tpublic seen(value: string): boolean {\n\t\treturn (value && this.state[value]) ? true : false;\n\t}\n\n\tpublic isPropagateUp(): boolean {\n\t\treturn this.propagateUp;\n\t}\n\n\tpublic isPropagateDown(): boolean {\n\t\treturn !this.propagateUp;\n\t}\n\n}\n\nexport default GuardImpl;\n","import Listener from \"./Listener\";\n\nclass ListenerImpl implements Listener {\n\n\tprivate context: any;\n\n\tprivate channelName;\n\n\tprivate mappings: {\n\t\t[messageName: string]: Array<(payload: any) => void>;\n\t};\n\n\tconstructor(channelName: string, context: any) {\n\t\tthis.mappings = {};\n\t\tthis.channelName = channelName;\n\t\tthis.context = context;\n\t}\n\n\tpublic receive(messageName: string, payload: any): void {\n\t\tconst mappings: Array<(payload: any) => void> = this.mappings[messageName];\n\n\t\tif (!mappings) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const mapping of mappings) {\n\t\t\tmapping.call(this.context, payload);\n\t\t}\n\t}\n\n\tpublic register(messageName: string, fn: (payload: any) => void): void {\n\t\tif (!this.mappings[messageName]) {\n\t\t\tthis.mappings[messageName] = [];\n\t\t}\n\n\t\tthis.mappings[messageName].push(fn);\n\t}\n\n\tpublic getChannelName(): string {\n\t\treturn this.channelName;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.mappings = {};\n\t\tthis.context = null;\n\t}\n\n}\n\nexport default ListenerImpl;\n","import Getter from \"./Getter\";\nimport Guard from \"./Guard\";\nimport Invoker from \"./Invoker\";\nimport Logger from \"./logger/Logger\";\nimport LoggerFactory from \"./logger/LoggerFactory\";\nimport ModelMediator from \"./ModelMediator\";\nimport ObjectUtils from \"./ObjectUtils\";\nimport ScopeImpl from \"./ScopeImpl\";\nimport Setter from \"./Setter\";\n\nconst DEFAULT_REDUCER: (input: any) => any = (input) => input;\n\nclass ModelMediatorImpl<T> implements ModelMediator<T> {\n\n\tprivate logger: Logger;\n\n\tprivate model: any;\n\n\tprivate expression: string;\n\n\tprivate previous: T;\n\n\tprivate previousFragment: any;\n\n\tprivate watchPrevious: T;\n\n\tprivate watchCurrent: T;\n\n\tprivate watchDispatchPending: boolean;\n\n\tprivate scope: ScopeImpl;\n\n\tprivate context: any;\n\n\tprivate digested: boolean = false;\n\n\tprivate target: (previous: T, current: T, guard: Guard) => void;\n\n\tprivate digestCallback: (guard: Guard) => void;\n\n\tprivate digestCallbackContext: any;\n\n\tprivate reducerFn: (input: T) => any;\n\n\tprivate invoker: Invoker;\n\n\tprivate getter: Getter<T>;\n\n\tprivate setter: Setter<T>;\n\n\tconstructor(model: any, expression: string, scope: ScopeImpl) {\n\t\tthis.logger = LoggerFactory.getLogger(\"ModelMediator: \" + expression);\n\t\tthis.model = model;\n\t\tthis.expression = expression;\n\t\tthis.scope = scope;\n\t\tthis.previous = null;\n\t\tthis.context = {};\n\t\tthis.digestCallbackContext = {};\n\t\tthis.target = null;\n\t\tthis.digestCallback = null;\n\t\tthis.watchDispatchPending = false;\n\t\tthis.reducerFn = DEFAULT_REDUCER;\n\t\tthis.invoker = new Invoker(expression);\n\t\tthis.getter = new Getter(expression);\n\t\tthis.setter = new Setter(expression);\n\t}\n\n\tpublic invoke(...args: any[]): void {\n\t\tthis.invoker.invoke(this.scope, args);\n\t}\n\n\tpublic get(): T {\n\t\treturn this.getter.get(this.scope);\n\t}\n\n\tpublic set(value: T): void {\n\t\tthis.setter.set(this.scope, value);\n\t}\n\n\tpublic evaluate(guard: Guard): boolean {\n\t\tif (!this.target) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check for opts out of digestion\n\t\tlet changed: boolean = false;\n\t\tconst value: T = this.get();\n\t\tconst valueFragment: any = this.reducerFn(value);\n\n\t\tif (this.digested) {\n\t\t\tif (ObjectUtils.equals(this.previousFragment, valueFragment)) {\n\t\t\t\tthis.logger.trace(\"Not different.\");\n\t\t\t} else {\n\t\t\t\tif (this.logger.isTrace()) {\n\t\t\t\t\tthis.logger.trace({ current: value, previous: this.previous });\n\t\t\t\t}\n\n\t\t\t\tthis.logger.trace(\"Invoking listener\");\n\t\t\t\tthis.swap(value, valueFragment);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.swap(value, valueFragment);\n\t\t\tchanged = true;\n\t\t\tthis.digested = true;\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tpublic notifyWatcher(guard: Guard): void {\n\t\tif (this.watchDispatchPending) {\n\t\t\tthis.target.apply(this.context, [this.watchPrevious, this.watchCurrent, guard]);\n\t\t\tthis.watchDispatchPending = false;\n\t\t}\n\t}\n\n\tpublic watch(context: any, target: (previous: T, current: T, guard: Guard) => void): void {\n\t\tthis.context = context;\n\t\tthis.target = target;\n\t}\n\n\tpublic onDigest(context: any, digestCallback: (guard: Guard) => void): void {\n\t\tthis.digestCallbackContext = context;\n\t\tthis.digestCallback = digestCallback;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.model = null;\n\t\tthis.previous = null;\n\t\tthis.context = null;\n\t\tthis.target = null;\n\t\tthis.digestCallbackContext = null;\n\t\tthis.digestCallback = null;\n\t\tthis.watchPrevious = null;\n\t\tthis.watchCurrent = null;\n\t\tthis.watchDispatchPending = false;\n\t}\n\n\tpublic executeCallback(guard: Guard): void {\n\t\tif (this.digestCallback !== null) {\n\t\t\tthis.digestCallback.call(this.digestCallbackContext, guard);\n\t\t}\n\t}\n\n\tpublic setReducer(reducerFn: (input: T) => any): void {\n\t\tthis.reducerFn = (reducerFn === null) ? DEFAULT_REDUCER : reducerFn;\n\t}\n\n\tprotected getExpression(): string {\n\t\treturn this.expression;\n\t}\n\n\tprivate swap(value: T, valueFragment: any): void {\n\t\tconst newPrevious: T = ObjectUtils.clone(value);\n\t\tconst newPreviousFragment: any = ObjectUtils.clone(valueFragment);\n\t\tthis.watchPrevious = this.previous;\n\t\tthis.watchCurrent = value;\n\t\tthis.watchDispatchPending = true;\n\t\tthis.previous = newPrevious;\n\t\tthis.previousFragment = newPreviousFragment;\n\t}\n\n\tprivate logInvocationError(code: string, e: Error) {\n\t\tthis.logger.error(\"\\nAn exception (\" + e.name + \") was thrown invoking the element mediator expression: \" + this.expression\n\t\t\t + \"\\n\\nIn context:\\n\" + code + \"\\n\\nException message: \" + e.message + \"\\n\\n\", e);\n\t}\n\n}\n\nexport default ModelMediatorImpl;\n","import Logger from \"./logger/Logger\";\nimport LoggerFactory from \"./logger/LoggerFactory\";\nimport ScopeImpl from \"./ScopeImpl\";\n\nclass Invoker {\n\n\tprivate expression: string;\n\n\tprivate logger: Logger;\n\n\tconstructor(expression: string) {\n\t\tthis.expression = expression;\n\t\tthis.logger = LoggerFactory.getLogger(\"Invoker: \" + expression);\n\t}\n\n\tpublic invoke(scope: ScopeImpl, ...args: any[]): void {\n\t\tconst code: string = '\"use strict\"; ' + scope.getCode() + \" var args = arguments[1]; (\" + this.expression + \");\";\n\n\t\ttry {\n\t\t\tFunction(code).apply({}, [scope.getItems(), args]);\n\t\t} catch (e) {\n\t\t\tthis.logInvocationError(code, e);\n\t\t}\n\t}\n\n\tprivate logInvocationError(code: string, e: Error) {\n\t\tthis.logger.error(\"\\nAn exception (\" + e.name + \") was thrown invoking the element mediator expression: \" + this.expression\n\t\t\t + \"\\n\\nIn context:\\n\" + code + \"\\n\\nException message: \" + e.message + \"\\n\\n\", e);\n\t}\n\n}\n\nexport default Invoker;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","class Properties {\n\n\tpublic static setWindow(window: Window): void {\n\t\tProperties.window = window;\n\t}\n\n\tpublic static getWindow(): Window {\n\t\treturn Properties.window;\n\t}\n\n\tprivate static window: Window;\n\n}\n\nProperties.setWindow(global[\"window\"]);\n\nexport default Properties;\n","import RegistrationError from \"./error/RegistrationError\";\nimport Register from \"./Register\";\nimport RegistryStrategy from \"./RegistryStrategy\";\n\ninterface Factories {\n\n\t[id: string]: Factory<any>;\n\n}\n\ninterface Factory<T> {\n\n\tget(): T;\n\n}\n\nclass DefaultRegistryStrategyImpl implements RegistryStrategy, Register {\n\n\tprivate factories: Factories;\n\n\tconstructor() {\n\t\tthis.factories = {};\n\t}\n\n\tpublic get<T>(id: string): T {\n\t\tlet instance: T = null;\n\n\t\tif (this.factories[id]) {\n\t\t\tinstance = this.factories[id].get();\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tpublic registerConstant(id: string, instance: any): void {\n\t\tthis.registerFactory(id, new ConstantFactory(instance));\n\t}\n\n\tpublic registerPrototype(id: string, classInstance: any): void {\n\t\tthis.registerFactory(id, new PrototypeFactory(classInstance));\n\t}\n\n\tpublic registerSingleton(id: string, classInstance: any): void {\n\t\tthis.registerFactory(id, new SingletonFactory(classInstance));\n\t}\n\n\tprivate registerFactory(id: string, factory: Factory<any>): void {\n\t\tif (id && factory) {\n\t\t\tif (this.factories[id]) {\n\t\t\t\tthrow new RegistrationError(\"'%id%' key is considered unique and already exists\", {\"%id%\": id});\n\t\t\t}\n\t\t\tthis.factories[id] = factory;\n\t\t}\n\t}\n}\n\nexport interface Registry extends Register {\n\n\tget<T>(id: string): T;\n\n\taddStrategy(strategy: RegistryStrategy): void;\n\n}\n\nexport class RegistryImpl implements Registry {\n\n\tpublic static INSTANCE: RegistryImpl = new RegistryImpl();\n\n\tprivate strategies: RegistryStrategy[];\n\n\tprivate defaultStrategy: DefaultRegistryStrategyImpl;\n\n\tconstructor() {\n\t\tthis.defaultStrategy = new DefaultRegistryStrategyImpl();\n\t\tthis.strategies = [this.defaultStrategy];\n\t}\n\n\tpublic get<T>(id: string): T {\n\t\tlet i: number = 0;\n\n\t\tlet instance: T = null;\n\n\t\twhile (!instance && i < this.strategies.length) {\n\t\t\tinstance = this.strategies[i].get(id);\n\t\t\ti++;\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tpublic registerConstant(id: string, instance: any): Registry {\n\t\tthis.defaultStrategy.registerConstant(id, instance);\n\t\treturn this;\n\t}\n\n\tpublic registerPrototype(id: string, classInstance: any): Registry {\n\t\tthis.defaultStrategy.registerPrototype(id, classInstance);\n\t\treturn this;\n\t}\n\n\tpublic registerSingleton(id: string, classInstance: any): Registry {\n\t\tthis.defaultStrategy.registerSingleton(id, classInstance);\n\t\treturn this;\n\t}\n\n\tpublic addStrategy(strategy: RegistryStrategy): void {\n\t\tif (strategy) {\n\t\t\tthis.strategies.push(strategy);\n\t\t}\n\t}\n\n}\n\nclass ConstantFactory<T> implements Factory<T> {\n\n\tprivate instance: T;\n\n\tconstructor(instance: T) {\n\t\tthis.instance = instance;\n\t}\n\n\tpublic get(): T {\n\t\treturn this.instance;\n\t}\n\n}\n\nclass PrototypeFactory<T> implements Factory<T> {\n\n\tprivate classInstance: any;\n\n\tconstructor(classInstance: any) {\n\t\tthis.classInstance = classInstance;\n\t}\n\n\tpublic get(): T {\n\t\treturn new this.classInstance();\n\t}\n\n}\n\nclass SingletonFactory<T> implements Factory<T> {\n\n\tprivate classInstance: any;\n\n\tprivate instance: T;\n\n\tconstructor(classInstance: any) {\n\t\tthis.classInstance = classInstance;\n\t}\n\n\tpublic get(): T {\n\t\tif (!this.instance) {\n\t\t\tthis.instance = new this.classInstance();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n}\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass RegistrationError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) { throw (new.target + NEWI); }\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default RegistrationError;\n","import ScopeError from \"./error/ScopeError\";\nimport Scope from \"./Scope\";\n\ninterface ScopeMap {\n\n\t[name: string]: any;\n\n}\n\ninterface ScopeSet {\n\n\t[name: string]: string;\n\n}\n\nconst EXCLUSIONS: ScopeSet = {\n\ti: \"i\",\n\titem: \"item\",\n\tm: \"m\",\n\tmodel: \"model\",\n\tp: \"p\",\n\tparent: \"parent\",\n};\n\nconst VALID_KEY_REGEX: RegExp = new RegExp(/^[a-zA-Z\\$\\_][a-zA-Z0-9\\$\\_]*$/);\n\nclass ScopeImpl implements Scope {\n\n\tprivate code: string;\n\n\tprivate children: ScopeImpl[];\n\n\tprivate localItems: ScopeMap;\n\n\tprivate items: ScopeMap;\n\n\tprivate parent: ScopeImpl;\n\n\tprivate restricted: boolean;\n\n\tconstructor(restricted?: boolean) {\n\t\tthis.children = [];\n\t\tthis.localItems = {};\n\t\tthis.items = {};\n\t\tthis.code = \"\";\n\t\tthis.parent = null;\n\t\tthis.restricted = (restricted === null || restricted === undefined) ? true : restricted;\n\t}\n\n\tpublic setParent(parent: ScopeImpl): void {\n\t\tif (!parent) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.parent) {\n\t\t\tthis.parent.removeChild(this);\n\t\t}\n\n\t\tthis.parent = parent;\n\t\tthis.parent.addChild(this);\n\t\tthis.refresh();\n\t}\n\n\tpublic addChild(child: ScopeImpl): void {\n\t\tif (child) {\n\t\t\tthis.children.push(child);\n\t\t}\n\t}\n\n\tpublic removeChild(child: ScopeImpl): void {\n\t\tconst index: number = this.children.indexOf(child);\n\n\t\tif (index >= 0) {\n\t\t\tthis.children.splice(index, 1);\n\t\t}\n\t}\n\n\tpublic getItems(): ScopeMap {\n\t\treturn this.items;\n\t}\n\n\tpublic getCode(): string {\n\t\treturn this.code;\n\t}\n\n\tpublic add(name: string, item: any): void {\n\t\tthis.checkName(name);\n\t\tthis.localItems[name] = item;\n\t\tthis.refresh();\n\t\tthis.refreshChildren();\n\t}\n\n\tpublic remove(name: string): void {\n\t\tthis.checkName(name);\n\t\tdelete this.localItems[name];\n\t\tthis.refresh();\n\t\tthis.refreshChildren();\n\t}\n\n\tprivate checkName(name: string): void {\n\t\tif (!VALID_KEY_REGEX.test(name)) {\n\t\t\tthrow new ScopeError(\"Only objects with names containing letters and numbers and starting with a letter are allowed.\");\n\t\t}\n\n\t\tif (this.restricted && EXCLUSIONS[name]) {\n\t\t\tthrow new ScopeError(name + \" is a reserved name in the scope.\");\n\t\t}\n\t}\n\n\tprivate refresh(): void {\n\t\tthis.items = {};\n\n\t\tif (this.parent) {\n\t\t\tconst parentItems: ScopeMap = this.parent.getItems();\n\n\t\t\tfor (const key in parentItems) {\n\t\t\t\tif (parentItems.hasOwnProperty(key)) {\n\t\t\t\t\tthis.items[key] = parentItems[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const key in this.localItems) {\n\t\t\tif (this.localItems.hasOwnProperty(key)) {\n\t\t\t\tthis.items[key] = this.localItems[key];\n\t\t\t}\n\t\t}\n\n\t\tthis.refreshCode();\n\t}\n\n\tprivate refreshCode(): void {\n\t\tthis.code = \"\";\n\n\t\tfor (const key in this.items) {\n\t\t\tif (this.items.hasOwnProperty(key)) {\n\t\t\t\tconst statement: string = \"var \" + key + \" = arguments[0]['\" + key + \"'];\\n\";\n\t\t\t\tthis.code += statement;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate refreshChildren(): void {\n\t\tfor (const child of this.children) {\n\t\t\tchild.refresh();\n\t\t}\n\t}\n\n}\n\nexport default ScopeImpl;\n","import { CydranError, NEWI } from \"./AbstractCydranError\";\n\nclass ScopeError extends CydranError {\n\n\tconstructor(msg: string, reps?: any) {\n\t\tif (!new.target) {\n\t\t\tthrow (new.target + NEWI);\n\t\t}\n\n\t\tsuper(msg, reps);\n\t}\n\n}\n\nexport default ScopeError;\n","const MAX_SAFE_INTEGER: number = 9007199254740989;\n\nclass SequenceGenerator {\n\n\tpublic static INSTANCE: SequenceGenerator = new SequenceGenerator();\n\n\tprivate value: number;\n\n\tconstructor() {\n\t\tthis.value = 0;\n\t}\n\n\tpublic next(): number {\n\t\tif (this.value >= MAX_SAFE_INTEGER) {\n\t\t\tthis.value = -1;\n\t\t}\n\n\t\tthis.value++;\n\n\t\treturn this.value;\n\t}\n\n}\n\nexport default SequenceGenerator;\n","import { Mvvm } from \"../Core\";\n\nimport Checked from \"./Checked\";\nMvvm.register(Checked.KEY, [\"input\"], Checked);\n\nimport CSSClass from \"./CSSClass\";\nMvvm.register(CSSClass.KEY, [\"*\"], CSSClass);\n\nimport Content from \"./Content\";\nMvvm.register(Content.KEY, [\"*\"], Content);\n\nimport Enabled from \"./Enabled\";\nMvvm.register(Enabled.KEY, [\"*\"], Enabled);\n\nimport ReadOnly from \"./ReadOnly\";\nMvvm.register(ReadOnly.KEY, [\"*\"], ReadOnly);\n\nimport Style from \"./Style\";\nMvvm.register(Style.KEY, [\"*\"], Style);\n\nimport ForceFocus from \"./ForceFocus\";\nMvvm.register(ForceFocus.KEY, [\"*\"], ForceFocus);\n\nimport MultiSelectValueModel from \"./MultiSelectValueModel\";\nMvvm.register(MultiSelectValueModel.KEY, [\"select\"], MultiSelectValueModel);\n\nimport ValuedModel from \"./ValuedModel\";\nMvvm.register(ValuedModel.KEY, [\"textarea\"], ValuedModel);\n\nimport InputValueModel from \"./InputValueModel\";\nMvvm.register(InputValueModel.KEY, [\"input\"], InputValueModel);\n\nimport Visible from \"./Visible\";\nMvvm.register(Visible.KEY, [\"*\"], Visible);\n\nimport Repeat from \"./Repeat\";\nMvvm.register(\"repeat\", [\"*\"], Repeat);\n\nexport { };\n","import { ElementMediator } from \"../Core\";\n\n/**\n *\n */\nclass Checked extends ElementMediator<boolean, HTMLInputElement> {\n\n\tpublic static readonly KEY: string = \"checked\";\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprotected onTargetChange(previous: boolean, current: boolean): void {\n\t\tthis.getEl().checked = !current;\n\t}\n}\n\nexport default Checked;\n","import { ElementMediator } from \"../Core\";\n\nclass CSSClass extends ElementMediator<any, HTMLElement> {\n\n\tpublic static readonly KEY: string = \"class\";\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprivate onTargetChange(previous: any, current: any): void {\n\t\tconst oldClasses: string[] = (this.getEl().className || \"\").trim().split(\" \");\n\t\tconst newClasses: string[] = [];\n\t\tconst map: any = current || {};\n\n\t\tfor (const value of oldClasses) {\n\t\t\tif (!map.hasOwnProperty(value)) {\n\t\t\t\tnewClasses.push(value);\n\t\t\t}\n\t\t}\n\n\t\tfor (const key in map) {\n\t\t\tif (map.hasOwnProperty(key) && !!map[key]) {\n\t\t\t\tnewClasses.push(key);\n\t\t\t}\n\t\t}\n\n\t\tthis.getEl().className = newClasses.join(\" \");\n\t}\n\n}\n\nexport default CSSClass;\n","import { ElementMediator } from \"../Core\";\nimport ObjectUtils from \"../ObjectUtils\";\n\nclass Content extends ElementMediator<string, HTMLElement> {\n\n\tpublic static readonly KEY: string = \"content\";\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprotected onTargetChange(previous: string, current: string): void {\n\t\tthis.getEl().innerHTML = ObjectUtils.encodeHtml(current);\n\t}\n\n}\n\nexport default Content;\n","import { ElementMediator } from \"../Core\";\n\nclass Enabled extends ElementMediator<boolean, HTMLInputElement> {\n\n\tpublic static readonly KEY: string = \"enabled\";\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprotected onTargetChange(previous: boolean, current: boolean): void {\n\t\tthis.getEl().disabled = !current;\n\t}\n\n}\n\nexport default Enabled;\n","import { ElementMediator } from \"../Core\";\n\nclass ReadOnly extends ElementMediator<boolean, HTMLInputElement> {\n\n\tpublic static readonly KEY: string = \"readonly\";\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprotected onTargetChange(previous: boolean, current: boolean): void {\n\t\tthis.getEl().readOnly = current;\n\t}\n\n}\n\nexport default ReadOnly;\n","import { ElementMediator } from \"../Core\";\n\nclass Style extends ElementMediator<any, HTMLElement> {\n\n\tpublic static readonly KEY: string = \"style\";\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprotected onTargetChange(previous: any, current: any): void {\n\t\tif (current === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const key in current) {\n\t\t\tif (!current.hasOwnProperty(key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.getEl().style[key] = current[key];\n\t\t}\n\t}\n\n}\n\nexport default Style;\n","import { ElementMediator } from \"../Core\";\n\n\nclass ForceFocus extends ElementMediator<boolean, HTMLElement> {\n\n\tpublic static readonly KEY: string = \"force-focus\";\n\n\tprivate shouldFocus: boolean;\n\n\tpublic wire(): void {\n\t\tthis.bridge(\"focusout\");\n\t\tthis.listenTo(\"dom\", \"focusout\", this.handleFocusout);\n\t\tthis.shouldFocus = false;\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tpublic handleFocusout(event: Event): void {\n\t\tif (this.shouldFocus) {\n\t\t\tthis.getEl().focus();\n\t\t}\n\t}\n\n\tprotected onTargetChange(previous: boolean, current: boolean): void {\n\t\tthis.shouldFocus = current;\n\t}\n\n}\n\nexport default ForceFocus;\n","import { ElementMediator } from \"../Core\";\n\n/**\n *\n */\nclass MultiSelectValueModel extends ElementMediator<string | string[], HTMLSelectElement> {\n\n\tpublic static readonly KEY: string = \"model\";\n\n\tpublic wire(): void {\n\t\tthis.bridge(\"input\");\n\t\tthis.listenTo(\"dom\", \"input\", this.handleInput);\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tpublic handleInput(event: Event): void {\n\t\tif (this.getEl().multiple) {\n\t\t\tconst selectedValues: Array<string|number> = [];\n\n\t\t\tfor (let i = 0; i < this.getEl().selectedOptions.length; i++) {\n\t\t\t\tconst optValue: string = this.getEl().selectedOptions.item(i).getAttribute(\"value\");\n\t\t\t\tselectedValues.push(optValue);\n\t\t\t}\n\n\t\t\tthis.$apply(() => {\n\t\t\t\tthis.getModelMediator().set(selectedValues);\n\t\t\t}, [], null);\n\t\t} else {\n\t\t\tthis.$apply(() => {\n\t\t\t\tthis.getModelMediator().set(this.getEl()[\"value\"]);\n\t\t\t}, [], null);\n\t\t}\n\t}\n\n\tprotected onTargetChange(previous: string | string[], current: string | string[]): void {\n\t\tif (this.getEl().multiple) {\n\t\t\tcurrent = (current === null) ? [] : current;\n\n\t\t\tfor (let i = 0; i < this.getEl().options.length; i++) {\n\t\t\t\tconst element: HTMLOptionElement = this.getEl().options.item(i);\n\t\t\t\telement.selected = current.includes(element.value);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.getEl().value = current as string;\n\t\t}\n\t}\n\n}\n\nexport default MultiSelectValueModel;\n","import { ElementMediator } from \"../Core\";\n\n/**\n *\n */\nclass ValuedModel extends ElementMediator<string, HTMLInputElement> {\n\n\tpublic static readonly KEY: string = \"model\";\n\n\tpublic wire(): void {\n\t\tthis.bridge(\"input\");\n\t\tthis.listenTo(\"dom\", \"input\", this.handleInput);\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tpublic handleInput(event: Event): void {\n\t\tthis.$apply(() => {\n\t\t\tthis.getModelMediator().set(this.getEl().value);\n\t\t}, [], null);\n\t}\n\n\tprotected onTargetChange(previous: string, current: string): void {\n\t\tthis.getEl().value = current;\n\t}\n\n}\n\nexport default ValuedModel;\n","import { ElementMediator } from \"../Core\";\n\n/**\n *\n */\nclass InputValueModel extends ElementMediator<string, HTMLInputElement> {\n\n\tpublic static readonly KEY: string = \"model\";\n\n\tpublic wire(): void {\n\t\tthis.bridge(\"input\");\n\t\tconst isRadio: boolean = this.getEl().type.toLowerCase() === \"radio\";\n\t\tthis.listenTo(\"dom\", \"input\", (isRadio ? this.handleRadioInput : this.handleInput));\n\t\tthis.getModelMediator().watch(this, (isRadio ? this.onRadioTargetChange : this.onTargetChange));\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tpublic handleInput(event: Event): void {\n\t\tthis.$apply(() => {\n\t\t\tthis.getModelMediator().set(this.getEl().value);\n\t\t}, [], null);\n\t}\n\n\tpublic handleRadioInput(event: Event): void {\n\t\tif (this.getEl().checked) {\n\t\t\tthis.$apply(() => {\n\t\t\t\tthis.getModelMediator().set(this.getEl().value);\n\t\t\t}, [], null);\n\t\t}\n\t}\n\n\tprotected onTargetChange(previous: string, current: string): void {\n\t\tthis.getEl().value = current;\n\t}\n\n\tprotected onRadioTargetChange(previous: string, current: string): void {\n\t\tif (this.getEl().value === current) {\n\t\t\tthis.getEl().checked = true;\n\t\t}\n\t}\n\n}\n\nexport default InputValueModel;\n","import { ElementMediator } from \"../Core\";\n\n/**\n *\n */\nclass Visible extends ElementMediator<boolean, HTMLElement> {\n\n\tpublic static readonly KEY: string = \"visible\";\n\n\tpublic wire(): void {\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t}\n\n\tpublic unwire(): void {\n\t\t// Intentionally do nothing\n\t}\n\n\tprotected onTargetChange(previous: boolean, current: boolean): void {\n\t\tthis.getEl().hidden = !current;\n\t}\n\n}\n\nexport default Visible;\n","import { Component, ElementMediator, INTERNAL_DIRECT_CHANNEL_NAME, Properties } from \"../Core\";\nimport Guard from \"../Guard\";\nimport LoggerFactory from \"../logger/LoggerFactory\";\nimport ObjectUtils from \"../ObjectUtils\";\n\nconst LOGGER = LoggerFactory.getLogger(\"RepeatElementMediator\");\nconst DEFAULT_ID_KEY: string = \"id\";\nconst DOCUMENT: Document = Properties.getWindow().document;\n\ninterface ElementMediatorValues {\n\n\tidKey: string;\n\n\titem: string;\n\n\tempty: string;\n\n\tfirst: string;\n\n\tlast: string;\n\n\titems: any[];\n\n}\n\ninterface ComponentMap {\n\n\t[id: string]: Component;\n\n}\n\n/**\n *\n */\nclass Repeat extends ElementMediator<ElementMediatorValues, HTMLElement> {\n\n\tprivate idKey: string;\n\n\tprivate itemComponentName: string;\n\n\tprivate map: ComponentMap;\n\n\tprivate empty: Component;\n\n\tprivate first: Component;\n\n\tprivate last: Component;\n\n\tprivate ids: string[];\n\n\tprivate itemTemplate: string;\n\n\tprivate initialized: boolean = false;\n\n\tpublic wire(): void {\n\t\tthis.map = {};\n\t\tthis.empty = null;\n\t\tthis.ids = [];\n\t\tthis.itemTemplate = null;\n\t\tthis.getModelMediator().setReducer((input) => input.items);\n\t\tthis.getModelMediator().watch(this, this.onTargetChange);\n\t\tthis.getModelMediator().onDigest(this, this.onDigest);\n\t}\n\n\tpublic unwire(): void {\n\t\tif (this.empty) {\n\t\t\tthis.empty.dispose();\n\t\t}\n\n\t\tif (this.first) {\n\t\t\tthis.first.dispose();\n\t\t}\n\n\t\tif (this.last) {\n\t\t\tthis.last.dispose();\n\t\t}\n\n\t\tfor (const key in this.map) {\n\t\t\tif (this.map.hasOwnProperty(key)) {\n\t\t\t\tconst component: Component = this.map[key];\n\t\t\t\tcomponent.dispose();\n\t\t\t}\n\t\t}\n\n\t\tthis.empty = null;\n\t\tthis.map = {};\n\t}\n\n\tprotected onDigest(guard: Guard): void {\n\t\tif (guard.isPropagateDown()) {\n\t\t\tfor (const id of this.ids) {\n\t\t\t\tthis.map[id].message(INTERNAL_DIRECT_CHANNEL_NAME, \"digest\", guard);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.getLogger().trace(\"Not propagating to children\");\n\t\t}\n\t}\n\n\tprotected onTargetChange(previous: ElementMediatorValues, current: ElementMediatorValues, guard: Guard): void {\n\t\tif (!this.initialized) {\n\t\t\tconst children: HTMLCollection = this.getEl().children;\n\n\t\t\t// tslint:disable-next-line\n\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\tconst child: ChildNode = children[i];\n\n\t\t\t\tif (\"template\" === child.nodeName.toLowerCase()) {\n\t\t\t\t\tconst template: HTMLElement = child as HTMLElement;\n\n\t\t\t\t\tif (template.innerHTML) {\n\t\t\t\t\t\tconst markup: string = template.innerHTML.trim();\n\t\t\t\t\t\tconst type: string = template.getAttribute(\"type\");\n\n\t\t\t\t\t\tif (\"empty\" === type) {\n\t\t\t\t\t\t\tthis.empty = new Component(markup);\n\t\t\t\t\t\t\tthis.empty.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.getParent());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\"first\" === type) {\n\t\t\t\t\t\t\tthis.first = new Component(markup);\n\t\t\t\t\t\t\tthis.first.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.getParent());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\"after\" === type) {\n\t\t\t\t\t\t\tthis.last = new Component(markup);\n\t\t\t\t\t\t\tthis.last.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.getParent());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\"item\" === type) {\n\t\t\t\t\t\t\tthis.itemTemplate = markup;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.idKey = current.idKey || DEFAULT_ID_KEY;\n\t\t\tthis.itemComponentName = current.item;\n\n\t\t\tif (current.empty && !this.empty) {\n\t\t\t\tthis.empty = this.getComponent(current.empty);\n\t\t\t\tthis.empty.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.getParent());\n\t\t\t}\n\n\t\t\tif (current.first && !this.first) {\n\t\t\t\tthis.first = this.getComponent(current.first);\n\t\t\t\tthis.first.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.getParent());\n\t\t\t}\n\n\t\t\tif (current.last && !this.last) {\n\t\t\t\tthis.last = this.getComponent(current.last);\n\t\t\t\tthis.last.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.getParent());\n\t\t\t}\n\n\t\t\tif (this.empty) {\n\t\t\t\tthis.initAsRepeatable(this.empty);\n\t\t\t}\n\n\t\t\tif (this.first) {\n\t\t\t\tthis.initAsRepeatable(this.first);\n\t\t\t}\n\n\t\t\tif (this.last) {\n\t\t\t\tthis.initAsRepeatable(this.last);\n\t\t\t}\n\n\t\t\tthis.initialized = true;\n\t\t}\n\n\t\tconst newIds: string[] = [];\n\n\t\tfor (const item of current.items) {\n\t\t\tconst id: string = item[this.idKey] + \"\";\n\t\t\tnewIds.push(id);\n\t\t}\n\n\t\tif (!ObjectUtils.equals(this.ids, newIds)) {\n\t\t\tconst newMap: ComponentMap = {};\n\t\t\tconst components: Component[] = [];\n\n\t\t\tfor (const item of current.items) {\n\t\t\t\tconst id: string = item[this.idKey] + \"\";\n\t\t\t\tconst component: Component = this.map[id] ? this.map[id] : this.create(item);\n\t\t\t\tnewMap[id] = component;\n\t\t\t\tcomponents.push(component);\n\t\t\t\tdelete this.map[id];\n\t\t\t}\n\n\t\t\tfor (const key in this.map) {\n\t\t\t\tif (this.map.hasOwnProperty(key)) {\n\t\t\t\t\tconst component: Component = this.map[key];\n\t\t\t\t\tcomponent.dispose();\n\t\t\t\t\tdelete this.map[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.map = newMap;\n\t\t\tconst el: HTMLElement = this.getEl();\n\n\t\t\twhile (el.firstChild) {\n\t\t\t\tel.removeChild(el.firstChild);\n\t\t\t}\n\n\t\t\tif (components.length === 0) {\n\t\t\t\tif (this.empty) {\n\t\t\t\t\tel.appendChild(this.empty.getEl());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst fragment: DocumentFragment = DOCUMENT.createDocumentFragment();\n\n\t\t\t\tif (this.first) {\n\t\t\t\t\tfragment.appendChild(this.first.getEl());\n\t\t\t\t}\n\n\t\t\t\tfor (const component of components) {\n\t\t\t\t\tfragment.appendChild(component.getEl());\n\t\t\t\t}\n\n\t\t\t\tif (this.last) {\n\t\t\t\t\tfragment.appendChild(this.last.getEl());\n\t\t\t\t}\n\n\t\t\t\tel.appendChild(fragment);\n\t\t\t}\n\t\t}\n\n\t\tfor (const id of newIds) {\n\t\t\tthis.map[id].message(INTERNAL_DIRECT_CHANNEL_NAME, \"digest\", guard);\n\t\t}\n\n\t\tthis.ids = newIds;\n\t}\n\n\tprivate getComponent(name: string): Component {\n\t\treturn this.getParent().get(name);\n\t}\n\n\tprivate create(data: any): Component {\n\t\tconst component: Component = (this.itemTemplate === null)\n\t\t\t? this.getComponent(this.itemComponentName)\n\t\t\t: new Component(this.itemTemplate);\n\n\t\tthis.initAsRepeatable(component);\n\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setData\", data);\n\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", this.getParent());\n\n\t\treturn component;\n\t}\n\n\tprivate initAsRepeatable(component: Component): void {\n\t\tcomponent.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setMode\", \"repeatable\");\n\t}\n\n}\n\nexport default Repeat;\n","import { Component, INTERNAL_DIRECT_CHANNEL_NAME, StageComponent } from \"./Core\";\nimport CydranConfig from \"./CydranConfig\";\nimport DomUtils from \"./DomUtils\";\nimport Logger from \"./logger/Logger\";\nimport LoggerFactory from \"./logger/LoggerFactory\";\n\nclass Stage {\n\n\tprivate started: boolean;\n\n\tprivate rootSelector: string;\n\n\tprivate logger: Logger;\n\n\tprivate initializers: Array<(() => void)>;\n\n\tprivate root: StageComponent;\n\n\tconstructor(rootSelector: string) {\n\t\tthis.logger = LoggerFactory.getLogger(\"Stage\");\n\t\tthis.started = false;\n\t\tthis.rootSelector = rootSelector;\n\t\tthis.initializers = [];\n\t\tthis.root = null;\n\t}\n\n\tpublic withInitializer(callback: () => void): Stage {\n\t\tthis.initializers.push(callback);\n\n\t\treturn this;\n\t}\n\n\tpublic start(): void {\n\t\tthis.logger.debug(\"Start Requested\");\n\n\t\tif (this.started) {\n\t\t\tthis.logger.debug(\"Aleady Started\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logger.debug(\"Cydran Starting\");\n\n\t\tDomUtils.domReady(() => this.domReady());\n\t}\n\n\tpublic setComponent(component: Component): Stage {\n\t\tthis.root.setChild(\"body\", component);\n\n\t\treturn this;\n\t}\n\n\tpublic get<T>(id: string): T {\n\t\treturn this.root.get(id);\n\t}\n\n\tpublic getConfig(): CydranConfig {\n\t\treturn new CydranConfig();\n\t}\n\n\tprivate domReady(): void {\n\t\tthis.logger.debug(\"DOM Ready\");\n\t\tthis.root = new StageComponent(this.rootSelector);\n\t\tthis.root.message(INTERNAL_DIRECT_CHANNEL_NAME, \"setParent\", null);\n\t\tthis.started = true;\n\t\tthis.logger.debug(\"Running initializers\");\n\n\t\tfor (const initializer of this.initializers) {\n\t\t\tinitializer.apply(this);\n\t\t}\n\n\t\tthis.logger.debug(\"Startup Complete\");\n\t}\n\n}\n\nexport default Stage;\n","import { Properties } from \"./Core\";\n// TODO - Refactor this\n\nconst domReady = function(callback) {\n\tlet ready = false;\n\tconst WIN = Properties.getWindow();\n\tconst DOC = WIN.document;\n\n\tconst detach = function() {\n\t\tif (DOC.addEventListener) {\n\t\t\tDOC.removeEventListener(\"DOMContentLoaded\", completed);\n\t\t\tWIN.removeEventListener(\"load\", completed);\n\t\t} else {\n\t\t\tWIN[\"detachEvent\"](\"onreadystatechange\", completed);\n\t\t\tWIN[\"detachEvent\"](\"onload\", completed);\n\t\t}\n\t};\n\n\tconst completed = function() {\n\t\tif (!ready && (DOC.addEventListener || event.type === \"load\" || DOC.readyState === \"complete\")) {\n\t\t\tready = true;\n\t\t\tdetach();\n\t\t\tcallback();\n\t\t}\n\t};\n\n\tif (DOC.readyState === \"complete\") {\n\t\tcallback();\n\t} else if (DOC.addEventListener) {\n\t\tDOC.addEventListener(\"DOMContentLoaded\", completed);\n\t\tWIN.addEventListener(\"load\", completed);\n\t} else {\n\t\tDOC[\"attachEvent\"](\"onreadystatechange\", completed);\n\t\tWIN[\"attachEvent\"](\"onload\", completed);\n\n\t\tlet top = false;\n\n\t\ttry {\n\t\t\ttop = (WIN.frameElement == null && DOC.documentElement) ? true : false;\n\t\t} catch (e) {\n\t\t\t// Intentionally do nothing\n\t\t}\n\n\t\tif (top && top[\"doScroll\"]) {\n\t\t\t(function scrollCheck() {\n\t\t\t\tif (ready) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\ttop[\"doScroll\"](\"left\");\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn setTimeout(scrollCheck, 50);\n\t\t\t\t}\n\n\t\t\t\tready = true;\n\t\t\t\tdetach();\n\t\t\t\tcallback();\n\t\t\t})();\n\t\t}\n\t}\n};\n\nconst result = {\n\tdomReady: domReady,\n};\n\nexport default result;\n"],"sourceRoot":""}