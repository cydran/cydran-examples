/*!
 * Cydran <http://cydran.io/>
 * Copyright The Cydran Team and other contributors <http://cydran.io/>
 * Released under MIT license <http://cydran.io/license>
 * Based on Lodash 4.17.15 <https://lodash.com/license>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cydran=e():t.cydran=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=i(n(14)),u=i(n(15)),c=i(n(16)),l=i(n(17)),p=i(n(18)),f=i(n(19)),h=i(n(20)),d=i(n(23)),g=i(n(24)),_=i(n(2)),y=i(n(10)),v=i(n(26)),m=i(n(4)),E=i(n(29));e.Properties=E.default;var b=n(30),w=i(n(32)),A=i(n(34)),C="Cydran$$Direct$$Internal$$Channel";e.INTERNAL_DIRECT_CHANNEL_NAME=C;var M="Cydran$$Internal$$Channel";e.INTERNAL_CHANNEL_NAME=M;var O="____internal$$cydran$$module____",P={AFTER_CHILD_ADDED:"AFTER_CHILD_ADDED",AFTER_CHILD_CHANGED:"AFTER_CHILD_CHANGED",AFTER_CHILD_REMOVED:"AFTER_CHILD_REMOVED",AFTER_PARENT_ADDED:"AFTER_PARENT_ADDED",AFTER_PARENT_CHANGED:"AFTER_PARENT_CHANGED",AFTER_PARENT_REMOVED:"AFTER_PARENT_REMOVED",BEFORE_CHILD_ADDED:"BEFORE_CHILD_ADDED",BEFORE_CHILD_CHANGED:"BEFORE_CHILD_CHANGED",BEFORE_CHILD_REMOVED:"BEFORE_CHILD_REMOVED",BEFORE_DISPOSE:"BEFORE_DISPOSE",BEFORE_PARENT_ADDED:"BEFORE_PARENT_ADDED",BEFORE_PARENT_CHANGED:"BEFORE_PARENT_CHANGED",BEFORE_PARENT_REMOVED:"BEFORE_PARENT_REMOVED"};e.Events=P;var D=(new s.ComponentConfigBuilder).build(),T=function(){function t(){this.logger=_.default.getLogger("Broker"),this.listeners={}}return t.prototype.broadcast=function(t,e,n){if(this.logger.trace({channelName:t,messageName:e,payload:n}),this.listeners[t])for(var r=0,o=this.listeners[t];r<o.length;r++){o[r].receive(e,n)}else this.logger.trace("no listeners for channel, returning")},t.prototype.addListener=function(t){var e=t.getChannelName();this.listeners[e]||(this.listeners[e]=[]);var n=this.listeners[e];this.contains(n,t)||n.push(t)},t.prototype.removeListener=function(t){var e=t.getChannelName(),n=this.listeners[e];n&&(this.remove(n,t),0===n.length&&delete this.listeners[e])},t.prototype.dispose=function(){this.listeners={}},t.prototype.contains=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},t.prototype.remove=function(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}},t}(),N={},x=function(){function t(t,e){this.name=t,this.registry=new b.RegistryImpl,this.broker=new T,this.scope=new w.default,e&&this.scope.setParent(e)}return t.prototype.getLogger=function(){return _.default.getLogger(this.name)},t.prototype.getName=function(){return this.name},t.prototype.associate=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){e.prototype[O]=t})),this},t.prototype.disassociate=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){e.prototype[O]=t})),this},t.prototype.clear=function(){return this},t.prototype.broadcast=function(t,e,n){this.broker.broadcast(t,e,n)},t.prototype.message=function(t,e,n){t===C&&("addListener"===e?this.addListener(n):"removeListener"===e&&this.removeListener(n))},t.prototype.get=function(t){var e=this.registry.get(t);return e||(e=L.get(t)),e},t.prototype.getLocal=function(t){return this.registry.get(t)},t.prototype.getScope=function(){return this.scope},t.prototype.registerConstant=function(t,e){try{this.registry.registerConstant(t,e)}catch(t){this.logError(t)}return this},t.prototype.registerPrototype=function(t,e){try{this.registry.registerPrototype(t,e)}catch(t){this.logError(t)}return this},t.prototype.registerSingleton=function(t,e){try{this.registry.registerSingleton(t,e)}catch(t){this.logError(t)}return this},t.prototype.addStrategy=function(t){return this.registry.addStrategy(t),this},t.prototype.expose=function(t){return N[t]=this.name,this},t.prototype.addListener=function(t){this.broker.addListener(t)},t.prototype.removeListener=function(t){this.broker.removeListener(t)},t.prototype.logError=function(t){this.getLogger().error(t)},t}();e.ModuleImpl=x;var j=new x("DEFAULT"),L=function(){function t(){}return t.getModule=function(e){return t.modules[e]||(t.modules[e]=new x(e,j.getScope())),t.modules[e]},t.getDefaultModule=function(){return this.getModule("DEFAULT")},t.forEach=function(e){for(var n in t.modules){if(t.modules.hasOwnProperty(n))e(t.modules[n])}},t.broadcast=function(e,n,r){t.forEach((function(t){return t.broadcast(e,n,r)}))},t.registerConstant=function(t,e){this.getDefaultModule().registerConstant(t,e)},t.registerPrototype=function(t,e){this.getDefaultModule().registerPrototype(t,e)},t.registerSingleton=function(t,e){this.getDefaultModule().registerSingleton(t,e)},t.registerElementMediator=function(t,e,n){try{G.register(t,e,n)}catch(t){this.logger.error(t.message)}},t.getScope=function(){return this.getDefaultModule().getScope()},t.get=function(e){var n=null;return N[e]&&(n=t.getModule(e).getLocal(e)),n||(n=j.getLocal(e)),n},t.logger=_.default.getLogger("Modules:static"),t.modules={DEFAULT:j},t}();e.Modules=L;!function(){function t(t){this.factory=t}t.prototype.get=function(t){return this.instance||(this.instance=this.factory(t)),this.instance}}();var R=function(){function t(t,e){this.____internal$$cydran$$init____(t,e)}return t.prototype.metadata=function(){var t=this.____internal$$cydran____;return{get:function(e){return t.getMetadata(e)},has:function(e){return t.hasMetadata(e)}}},t.prototype.hasRegion=function(t){return this.____internal$$cydran____.hasRegion(t)},t.prototype.setChild=function(t,e){this.____internal$$cydran____.setChild(t,e)},t.prototype.setChildFromRegistry=function(t,e,n){this.____internal$$cydran____.setChildFromRegistry(t,e,n)},t.prototype.message=function(t,e,n){this.____internal$$cydran____.message(t,e,n)},t.prototype.dispose=function(){this.____internal$$cydran____.dispose()},t.prototype.getParent=function(){return this.____internal$$cydran____.getParent()},t.prototype.getEl=function(){return this.____internal$$cydran____.getEl()},t.prototype.get=function(t){return this.____internal$$cydran____.get(t)},t.prototype.scope=function(){return this.____internal$$cydran____.getScope()},t.prototype.reset=function(){this.init()},t.prototype.init=function(){},t.prototype.getItem=function(){return this.____internal$$cydran____.getData()},t.prototype.getExternals=function(){return this.____internal$$cydran____.getExternalCache()},t.prototype.broadcast=function(t,e,n){this.____internal$$cydran____.broadcast(t,e,n)},t.prototype.broadcastGlobally=function(t,e,n){this.____internal$$cydran____.broadcastGlobally(t,e,n)},t.prototype.$apply=function(t,e){this.____internal$$cydran____.$apply(t,e)},t.prototype.watch=function(t,e){this.____internal$$cydran____.watch(t,e)},t.prototype.on=function(t){var e=this;return{forChannel:function(n){return{invoke:function(r){e.____internal$$cydran____.on(r,t,n)}}},invoke:function(n){e.____internal$$cydran____.on(n,t,M)}}},t.prototype.getLogger=function(){return this.____internal$$cydran____.getLogger()},t.prototype.____internal$$cydran$$init____=function(t,e){this.____internal$$cydran____=new I(this,t,e),this.____internal$$cydran____.init()},t}();e.Component=R,R.prototype[O]=j;var I=function(){function t(t,e,n){if("string"!=typeof e)throw new p.default("Template must be a non-null string");this.config=n||D,this.guard=d.default.INSTANCE.generate(),this.id=A.default.INSTANCE.next(),this.logger=_.default.getLogger(t.constructor.name+" Component "+this.id),this.parent=null,this.component=t,this.prefix=this.config.getPrefix().toLowerCase(),this.template=e.trim(),this.scope=new w.default,this.externalMediators={},this.externalCache={},this.externalFields={};for(var r=0,o=this.config.getAttributes();r<o.length;r++){var i=o[r];this.externalize(i)}this.flags={repeatable:!1},this.getModule()&&this.scope.setParent(this.getModule().getScope()),this.regions={},this.pubSub=new y.default(this.component,this.getModule())}return t.prototype.init=function(){var t=this;this.component.reset(),this.mvvm=new G(this.component,this.getModule(),this.prefix,this.scope),this.render(),this.mvvm.init(this.el,this,(function(e){return t.getRegion(e)}))},t.prototype.hasMetadata=function(t){return!!this.getMetadata(t)},t.prototype.getMetadata=function(t){return this.config.getMetadata(t)},t.prototype.hasRegion=function(t){return!!this.regions[t]},t.prototype.$apply=function(t,e,n){var r=g.default.down(n);r.seen(this.guard)?this.getLogger().trace("Breaking digest loop"):(r.mark(this.guard),this.mvvm.$apply(t,e,r))},t.prototype.setChild=function(t,e){if(!this.hasRegion(t))throw new f.default("Region '%rName%' is unkown and must be declared in component template.",{"%rName%":t});var n=this.getRegion(t).hasComponent(),r=!(null===e||n),o=!(null!==e||!n);r&&this.message(M,P.BEFORE_CHILD_ADDED,{name:t}),o&&this.message(M,P.BEFORE_CHILD_REMOVED,{name:t}),this.message(M,P.BEFORE_CHILD_CHANGED,{name:t}),this.getRegion(t).setComponent(e),this.message(M,P.AFTER_CHILD_CHANGED,{name:t}),r&&this.message(M,P.AFTER_CHILD_ADDED,{name:t}),o&&this.message(M,P.AFTER_CHILD_REMOVED,{name:t})},t.prototype.setChildFromRegistry=function(t,e,n){var r=this.get(e);if(!r&&n&&(r=this.get(n)),r)this.setChild(t,r);else{var o=new l.default("Unable to set component %cName% on region %name%",{"%cName%":e,"%name%":t});this.getLogger().error(o)}},t.prototype.message=function(t,e,n){if(t===C)if("propagateDigest"===e)this.flags.repeatable&&this.propagateDigest(n);else if("setMode"===e)switch(n){case"repeatable":this.flags.repeatable=!0;break;default:this.flags.repeatable=!1}else"digest"===e?this.digest(n):"setParent"===e?this.setParent(n):"setParentScope"===e?this.setParentScope(n):"setData"===e?this.setData(n):"addExternalAttribute"===e&&this.addExternalAttribute(n);else this.pubSub.message(t,e,n)},t.prototype.broadcast=function(t,e,n){this.getModule().broadcast(t,e,n)},t.prototype.broadcastGlobally=function(t,e,n){L.broadcast(t,e,n)},t.prototype.dispose=function(){this.message(M,P.BEFORE_DISPOSE,{}),this.pubSub.dispose(),this.parent=null,this.parentScope=null,this.scope=null},t.prototype.getId=function(){return this.id},t.prototype.getEl=function(){return this.el},t.prototype.getComponent=function(){return this.component},t.prototype.get=function(t){return this.getModule().get(t)},t.prototype.getPrefix=function(){return this.prefix},t.prototype.getScope=function(){return this.scope},t.prototype.watch=function(t,e){this.mvvm.mediate(t).watch(this,e)},t.prototype.on=function(t,e,n){var r=this,o=n||M;this.pubSub.on(e).forChannel(o).invoke((function(e){r.$apply(t,[e])}))},t.prototype.getLogger=function(){return this.logger},t.prototype.getModule=function(){return this.component[O]},t.prototype.getParent=function(){return this.parent},t.prototype.setData=function(t){this.data=t},t.prototype.getData=function(){return this.data},t.prototype.importExternals=function(){for(var t in this.externalCache={},this.externalMediators)if(this.externalMediators.hasOwnProperty(t)){var e=this.externalMediators[t];this.externalCache[t]=e.get(this.parentScope)}},t.prototype.exportExternals=function(){for(var t in this.externalMediators){if(this.externalMediators.hasOwnProperty(t))this.externalMediators[t].set(this.parentScope,this.externalCache[t])}this.externalCache={}},t.prototype.getExternalCache=function(){return this.externalCache},t.prototype.getGuard=function(){return this.guard},t.prototype.getRegion=function(t){return this.regions[t]||(this.getLogger().trace("Creating region "+t),this.regions[t]=new k(t,this)),this.regions[t]},t.prototype.getTemplate=function(){return this.template},t.prototype.render=function(){this.getLogger().trace("Rendering");var t=E.default.getWindow().document.createElement("template");t.insertAdjacentHTML("afterbegin",this.template.trim());var e=t.childElementCount;if(1!==e){var n={"%count%":""+e,"%template%":this.template},r=new p.default("Component template must have a single top level element, but had %count% top level elements:\n\n%template%\n\n",n);throw this.getLogger().fatal(r),r}this.el=t.firstElementChild},t.prototype.setEl=function(t){this.el=t},t.prototype.externalize=function(t){var e=t.toLowerCase(),n=e;this.externalFields[e]=n},t.prototype.addExternalAttribute=function(t){var e=this.externalFields[t.attributeName];e&&(this.externalMediators[e]=new h.default(t.expression))},t.prototype.setParentScope=function(t){this.parentScope=t},t.prototype.setParent=function(t){null===t?(this.pubSub.message(C,"disableGlobal",{}),this.getLogger().trace("Clearing parent view")):this.pubSub.message(C,"enableGlobal",{});var e=!(null===t||null!==this.parent),n=!(null!==t||null===this.parent);e&&this.message(M,P.BEFORE_PARENT_ADDED,{}),n&&this.message(M,P.BEFORE_PARENT_REMOVED,{}),this.message(M,P.BEFORE_PARENT_CHANGED,{}),this.parent=t,this.digest(),this.message(M,P.AFTER_PARENT_CHANGED,{}),e&&this.message(M,P.AFTER_PARENT_ADDED,{}),n&&this.message(M,P.AFTER_PARENT_REMOVED,{})},t.prototype.digest=function(t){this.$apply((function(){}),[],t)},t.prototype.propagateDigest=function(t){var e=g.default.up(t);e.seen(this.getGuard())?this.getLogger().trace("Breaking digest loop"):(e.mark(this.getGuard()),this.getParent()&&e.isPropagateUp()?this.getParent().message(C,"digest",t):this.getLogger().trace("Not propagating to parent"))},t}(),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=E.default.getWindow().document.querySelectorAll(this.getTemplate()),e=t?t.length:0,n=1!==e?"CSS selector MUST identify single HTMLElement: '%pattern%' - %qty% found":null;if(n){var r={"%pattern%":this.getTemplate(),"%qty%":e},o=new c.default(n,r);throw this.getLogger().fatal(o),o}for(var i=t[0];i.hasChildNodes();)i.removeChild(i.firstChild);var s=E.default.getWindow().document.createElement("c:region");s.setAttribute("name","body"),i.appendChild(s),this.setEl(i)},e}(I),S=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.setComponent=function(t){return this.setChild("body",t),this},e.prototype.____internal$$cydran$$init____=function(t,e){this.____internal$$cydran____=new $(this,t,e),this.____internal$$cydran____.init()},e}(R);e.StageComponent=S,S.prototype[O]=j;var F=function(){function t(t){this.logger=_.default.getLogger("ElementMediator: "+t.prefix),this.____internal$$cydran____=t,this.domListeners={},this.pubSub=new y.default(this,this.getModule())}return t.prototype.dispose=function(){this.removeDomListeners(),this.unwire(),this.____internal$$cydran____=null,this.mediator=null},t.prototype.init=function(){this.mediator=this.mediate(this.getExpression()),this.wire()},t.prototype.get=function(t){return this.moduleInstance.get(t)},t.prototype.setModule=function(t){this.moduleInstance=t},t.prototype.message=function(t,e,n){this.pubSub.message(t,e,n)},t.prototype.broadcast=function(t,e,n){this.getModule().broadcast(t,e,n)},t.prototype.broadcastGlobally=function(t,e,n){L.broadcast(t,e,n)},t.prototype.listenTo=function(t,e,n){var r=this;this.pubSub.on(e).forChannel(t).invoke((function(t){n.apply(r,[t])}))},t.prototype.listenToFramework=function(t,e){this.listenTo(M,t,e)},t.prototype.bridge=function(t){var e=this,n=function(n){e.message("dom",t,n)};this.domListeners[t]||(this.domListeners[t]=n,this.getEl().addEventListener(t,n,!1))},t.prototype.getEl=function(){return this.____internal$$cydran____.el},t.prototype.getModule=function(){return this.moduleInstance},t.prototype.mediate=function(t){return this.____internal$$cydran____.mvvm.mediate(t)},t.prototype.getModel=function(){return this.____internal$$cydran____.model},t.prototype.getParent=function(){return this.____internal$$cydran____.parent.getComponent()},t.prototype.getModelMediator=function(){return this.mediator},t.prototype.$apply=function(t,e,n){this.____internal$$cydran____&&this.____internal$$cydran____.mvvm&&this.____internal$$cydran____.mvvm.$apply(t,e,n)},t.prototype.getExpression=function(){return this.____internal$$cydran____.expression},t.prototype.getLogger=function(){return this.logger},t.prototype.removeDomListeners=function(){for(var t in this.domListeners)if(this.domListeners.hasOwnProperty(t)){var e=this.domListeners[t];this.getEl().removeEventListener(t,e)}this.domListeners={}},t}();e.ElementMediator=F;var k=function(){function t(t,e){this.defaultEl=null,this.component=null,this.parent=e,this.name=t,this.logger=_.default.getLogger("Region "+this.name+" for "+e.getId())}return t.prototype.setDefaultEl=function(t){this.defaultEl=t},t.prototype.setComponent=function(t){if(this.logger.trace("Setting component"),this.component!==t)if(null!==t&&null===this.component){this.component=t;var e=t.getEl();this.defaultEl.parentElement.replaceChild(e,this.defaultEl),this.component.message(C,"setParent",this.parent.getComponent())}else if(null===t&&null!==this.component){this.component.message(C,"setParent",null);var n=this.component.getEl();this.component=null,n.parentElement.replaceChild(this.defaultEl,n)}else if(null!==t&&null!==this.component){this.component.message(C,"setParent",null);e=t.getEl();(n=this.component.getEl()).parentElement.replaceChild(e,n),this.component=t,this.component.message(C,"setParent",this.parent.getComponent())}},t.prototype.hasComponent=function(){return!!this.component},t.prototype.dispose=function(){this.component&&this.component.dispose(),this.setComponent(null)},t}(),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){var n=m.default.encodeHtml(e);this.getEl().innerHTML=n},e}(F),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.unwire=function(){},e.prototype.handleEvent=function(t){var e=this;this.$apply((function(){e.getModelMediator().invoke(t)}),[t],null)},e.prototype.wire=function(){this.bridge(this.eventKey),this.listenTo("dom",this.eventKey,this.handleEvent)},e.prototype.setEventKey=function(t){this.eventKey=t},e}(F),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.setAttributeName=function(t){this.attributeName=t},e.prototype.onTargetChange=function(t,e){this.getEl().setAttribute(this.attributeName,e+"")},e}(F),G=function(){function t(t,e,n,r){var o=this;this.elementMediatorPrefix=n+":",this.eventElementMediatorPrefix=n+":on",this.externalAttributePrefix=n+":property-",this.regionPrefix=n+":region",this.componentPrefix=n+":component",this.logger=_.default.getLogger("Mvvm"),this.scope=new w.default(!1),this.scope.setParent(r),this.elementMediators=[],this.mediators=[],this.model=t,this.moduleInstance=e,this.components=[],this.scope.add("m",(function(){return o.model})),this.scope.add("model",(function(){return o.model})),this.scope.add("i",(function(){return o.parent.getData()})),this.scope.add("item",(function(){return o.parent.getData()})),this.scope.add("p",(function(){return o.parent.getComponent().getParent()})),this.scope.add("parent",(function(){return o.parent.getComponent().getParent()})),this.scope.add("e",(function(){return o.parent.getExternalCache()})),this.scope.add("external",(function(){return o.parent.getExternalCache()}))}return t.register=function(e,n,r){t.factories[e]||(t.factories[e]={});for(var o=0,i=n;o<i.length;o++){var s=i[o];t.factories[e][s]=r}},t.prototype.init=function(t,e,n){this.el=t,this.parent=e,this.regionLookupFn=n,this.populateElementMediators()},t.prototype.dispose=function(){for(var t=0,e=this.elementMediators;t<e.length;t++){e[t].dispose()}this.elementMediators=[],this.components=[];for(var n=0,r=this.components;n<r.length;n++){r[n].dispose()}this.parent=null},t.prototype.mediate=function(t){var e=new v.default(this.model,t,this.scope);return this.mediators.push(e),e},t.prototype.digest=function(t){for(var e=g.default.down(t),n=1e4,r=!0;r&&n>0;){n--;for(var o=[],i=0,s=this.mediators;i<s.length;i++){(f=s[i]).evaluate(e)&&o.push(f)}if(0===o.length){r=!1;break}for(var u=0,c=o;u<c.length;u++){c[u].notifyWatcher(e)}}if(0===n)throw new a.default("Loop detected in digest cycle.");for(var l=0,p=this.mediators;l<p.length;l++){var f;(f=p[l]).executeCallback(e)}},t.prototype.$apply=function(t,e,n){var r=g.default.up(n),o=null;this.parent.importExternals();try{o=t.apply(this.model,e),this.digest(n)}finally{this.parent.exportExternals()}this.parent.message(C,"propagateDigest",r);for(var i=0,s=this.components;i<s.length;i++){s[i].message(C,"digest",n)}return o},t.prototype.populateElementMediators=function(){for(var t=[this.el];t.length>0;)this.processChild(t)},t.prototype.processChild=function(t){var e=t.pop(),n=/^[A-Za-z]+$/,r=e.tagName.toLowerCase();if(r!==this.regionPrefix){if(r===this.componentPrefix){var o=e.getAttribute("name"),i=e.getAttribute("module"),s=((i?L.getModule(i):this.moduleInstance)||this.moduleInstance).get(o);e.parentElement.replaceChild(s.getEl(),e);for(var a=e.attributes.length-1;a>=0;a--){var c=e.attributes[a].name.toLowerCase(),l=e.attributes[a].value;if(0===c.indexOf(this.externalAttributePrefix)){var p={attributeName:c.substr(this.externalAttributePrefix.length),expression:l};s.message(C,"addExternalAttribute",p)}}return s.message(C,"setParentScope",this.scope),s.message(C,"setParent",this.parent.getComponent()),s.message(C,"setMode","repeatable"),void this.components.push(s)}for(a=0;a<e.children.length;a++)t.push(e.children[a]);this.processTextChildren(e.childNodes);for(var f=0,h=e.getAttributeNames();f<h.length;f++){var d=h[f],g=e.getAttribute(d);if(0===d.indexOf(this.eventElementMediatorPrefix)){var _=d.substr(this.eventElementMediatorPrefix.length);if(!n.test(_))throw new u.default("Event expressor '%eventName%' MUST correspond to a valid event in the target environment: '",{"%eventName%":_});this.addEventElementMediator(_.toLowerCase(),g,e),e.removeAttribute(d)}else if(0===d.indexOf(this.elementMediatorPrefix)){var y=d.substr(this.elementMediatorPrefix.length);this.addElementMediator(e.tagName.toLowerCase(),y,g,e),e.removeAttribute(d)}else if(g.length>4&&0===g.indexOf("{{")&&-1!==g.indexOf("}}",g.length-2)){var v=g.substring(2,g.length-2);this.addAttributeElementMediator(d,v,e)}}}else{var m=e.getAttribute("name");this.regionLookupFn(m).setDefaultEl(e)}},t.prototype.processTextChildren=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];3===r.nodeType&&e.push(r)}for(var o=0,i=e;o<i.length;o++){var s=i[o],a=this.splitChild(s);if(a.length>1){for(var u=0,c=a;u<c.length;u++){var l=c[u];s.parentNode.insertBefore(l,s)}s.remove()}}},t.prototype.splitChild=function(t){var e=(t.textContent||"").split(/(\{\{|\}\})/);if(e.length<2)return[t];for(var n=!1,r=[],o=0,i=e;o<i.length;o++){var s=i[o];switch(s){case"{{":n=!0;break;case"}}":n=!1;break;default:if(n){var a=E.default.getWindow().document.createElement("span");a.innerHTML="",this.addTextElementMediator(s,a),r.push(a)}else{var u=E.default.getWindow().document.createTextNode(s);r.push(u)}}}return r},t.prototype.addTextElementMediator=function(t,e){var n={mvvm:this,parent:this.parent,el:e,expression:t,model:this.model,prefix:"Text"},r=new H(n);r.setModule(this.moduleInstance),r.init(),this.elementMediators.push(r)},t.prototype.addEventElementMediator=function(t,e,n){var r={mvvm:this,parent:this.parent,el:n,expression:e,model:this.model,prefix:"Event"},o=new B(r);o.setModule(this.moduleInstance),o.setEventKey(t),o.init(),this.elementMediators.push(o)},t.prototype.addAttributeElementMediator=function(t,e,n){var r={mvvm:this,parent:this.parent,el:n,expression:e,model:this.model,prefix:"Event"},o=new z(r);o.setModule(this.moduleInstance),o.setAttributeName(t),o.init(),this.elementMediators.push(o)},t.prototype.addElementMediator=function(e,n,r,o){var i=t.factories[n],s="data-p-"+n+"-",a=null;if(i){var u=i[e];if(u||(u=i["*"]),u)(a=new u({mvvm:this,parent:this.parent,el:o,expression:r,model:this.model,prefix:s})).setModule(this.moduleInstance),a.init(),this.elementMediators.push(a);else this.logger.error("Unsupported tag: "+e+" for elementMediator "+n+".")}else this.logger.error("Unsupported elementMediator type: "+n+".")},t.factories={},t}();e.Mvvm=G},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,r){var o=this.constructor,i=t.call(this)||this;if(o===e)throw TypeError("Direct instantiation of "+o.name+" is not allowed.");return i.message=r?e.doMsgFilling(n,r):n,i}return o(e,t),e.doMsgFilling=function(t,e){return t.replace(/%\w+%/g,(function(t){return e[t]+""||t}))},e}(Error);e.CydranError=i;e.NEWI=" needs to be instantiated with 'new'"},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(7)),i=r(n(8)),s=function(){function t(){}return t.getLogger=function(t){return new o.default(t,i.default.INSTANCE)},t}();e.default=s},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.TRACE=0]="TRACE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.FATAL=5]="FATAL",t[t.DISABLE=6]="DISABLE"}(r||(r={})),e.default=r},function(t,e,n){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var r=1,o=2,i=4,s=1,a=2,u=9007199254740991,c="[object Arguments]",l="[object Array]",p="[object AsyncFunction]",f="[object Boolean]",h="[object Date]",d="[object Error]",g="[object Function]",_="[object GeneratorFunction]",y="[object Map]",v="[object Number]",m="[object Null]",E="[object Object]",b="[object Proxy]",w="[object RegExp]",A="[object Set]",C="[object String]",M="[object Symbol]",O="[object Undefined]",P="[object WeakMap]",D="[object ArrayBuffer]",T="[object DataView]",N="[object Float32Array]",x="[object Float64Array]",j="[object Int8Array]",L="[object Int16Array]",R="[object Int32Array]",I="[object Uint8Array]",$="[object Uint8ClampedArray]",S="[object Uint16Array]",F="[object Uint32Array]",k=/\w*$/,H=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,z={};z[N]=z[x]=z[j]=z[L]=z[R]=z[I]=z[$]=z[S]=z[F]=!0,z[c]=z[l]=z[D]=z[f]=z[T]=z[h]=z[d]=z[g]=z[y]=z[v]=z[E]=z[w]=z[A]=z[C]=z[P]=!1;var G={};G[c]=G[l]=G[D]=G[T]=G[f]=G[h]=G[N]=G[x]=G[j]=G[L]=G[R]=G[y]=G[v]=G[E]=G[w]=G[A]=G[C]=G[M]=G[I]=G[$]=G[S]=G[F]=!0,G[d]=G[g]=G[P]=!1;var U="object"==typeof t&&t&&t.Object===Object&&t,W="object"==typeof self&&self&&self.Object===Object&&self,K=U||W||Function("return this")(),Y=e&&!e.nodeType&&e,V=Y&&"object"==typeof n&&n&&!n.nodeType&&n,q=V&&V.exports===Y;function X(t,e){for(var n=e.length,r=t.length,o=-1;++o<n;)t[r+o]=e[o];return t}function Z(t){var e=Array(t.size),n=-1;return t.forEach((function(t,r){e[++n]=[r,t]})),e}function J(t,e){return function(n){return t(e(n))}}function Q(t){var e=Array(t.size),n=-1;return t.forEach((function(t){e[++n]=t})),e}var tt,et=K,nt=Array.prototype,rt=Function.prototype,ot=Object.prototype,it=et["__core-js_shared__"],st=rt.toString,at=ot.hasOwnProperty,ut=(tt=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||""))?"Symbol(src)_1."+tt:"",ct=ot.toString,lt=RegExp("^"+st.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=q?et.Buffer:void 0,ft=et.Symbol,ht=et.Uint8Array,dt=pt?pt.allocUnsafe:void 0,gt=J(Object.getPrototypeOf,Object),_t=Object.create,yt=ot.propertyIsEnumerable,vt=nt.splice,mt=ft?ft.toStringTag:void 0,Et=Object.getOwnPropertySymbols,bt=pt?pt.isBuffer:void 0,wt=J(Object.keys,Object),At=ie(et,"DataView"),Ct=ie(et,"Map"),Mt=ie(et,"Promise"),Ot=ie(et,"Set"),Pt=ie(et,"WeakMap"),Dt=ie(Object,"create"),Tt=pe(At),Nt=pe(Ct),xt=pe(Mt),jt=pe(Ot),Lt=pe(Pt),Rt=ft?ft.prototype:void 0,It=Rt?Rt.valueOf:void 0,$t=function(){function t(){}return function(e){if(!me(e))return{};if(_t)return _t(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),St=function(){function t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}return t.prototype.clear=function(){this.__DATA__=Dt?Dt(null):{},this.size=0},t.prototype.delete=function(t){var e=this.has(t)&&delete this.__DATA__[t];return this.size-=e?1:0,e},t.prototype.get=function(t){var e=this.__DATA__;if(Dt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return at.call(e,t)?e[t]:void 0},t.prototype.has=function(t){var e=this.__DATA__;return Dt?void 0!==e[t]:at.call(e,t)},t.prototype.set=function(t,e){var n=this.__DATA__;return this.size+=this.has(t)?0:1,n[t]=Dt&&void 0===e?"__lodash_hash_undefined__":e,this},t}(),Ft=function(){function t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}return t.prototype.clear=function(){this.__DATA__=[],this.size=0},t.prototype.delete=function(t){var e=this.__DATA__,n=Ut(e,t);return!(n<0)&&(n==e.length-1?e.pop():vt.call(e,n,1),--this.size,!0)},t.prototype.get=function(t){var e=this.__DATA__,n=Ut(e,t);return n<0?void 0:e[n][1]},t.prototype.has=function(t){return Ut(this.__DATA__,t)>-1},t.prototype.set=function(t,e){var n=this.__DATA__,r=Ut(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},t}(),kt=function(){function t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}return t.prototype.clear=function(){this.size=0,this.__DATA__={hash:new St,map:new(Ct||Ft),string:new St}},t.prototype.delete=function(t){var e=oe(this,t).delete(t);return this.size-=e?1:0,e},t.prototype.get=function(t){return oe(this,t).get(t)},t.prototype.has=function(t){return oe(this,t).has(t)},t.prototype.set=function(t,e){var n=oe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},t}(),Ht=function(){function t(t){var e=-1,n=null==t?0:t.length;for(this.__DATA__=new kt;++e<n;)this.add(t[e])}return t.prototype.push=function(t){return this.add(t)},t.prototype.add=function(t){return this.__DATA__.set(t,"__lodash_hash_undefined__"),this},t.prototype.has=function(t){return this.__DATA__.has(t)},t}(),Bt=function(){function t(t){var e=this.__DATA__=new Ft(t);this.size=e.size}return t.prototype.clear=function(){this.__DATA__=new Ft,this.size=0},t.prototype.delete=function(t){var e=this.__DATA__,n=e.delete(t);return this.size=e.size,n},t.prototype.get=function(t){return this.__DATA__.get(t)},t.prototype.has=function(t){return this.__DATA__.has(t)},t.prototype.set=function(t,e){var n=this.__DATA__;if(n instanceof Ft){var r=n.__DATA__;if(!Ct||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__DATA__=new kt(r)}return n.set(t,e),this.size=n.size,this},t}();function zt(t,e){var n=de(t),r=!n&&he(t),o=!n&&!r&&_e(t),i=!n&&!r&&!o&&Ae(t),s=n||r||o||i,a=s?function(t,e){for(var n=Array(t),r=-1;++r<t;)n[r]=e(r);return n}(t.length,String):[],u=a.length;for(var c in t)!e&&!at.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ce(c,u))||a.push(c);return a}function Gt(t,e,n){var r=t[e];at.call(t,e)&&fe(r,n)&&(void 0!==n||e in t)||Wt(t,e,n)}function Ut(t,e){for(var n=t.length;n--;)if(fe(t[n][0],e))return n;return-1}function Wt(t,e,n){"__proto__"==e&&Object.defineProperty?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kt(t,e,n,s,a,u){var l,p=e&r,d=e&o,m=e&i;if(n&&(l=a?n(t,s,a,u):n(t)),void 0!==l)return l;if(!me(t))return t;var b=de(t);if(b){if(l=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&at.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!p)return function(t,e){var n=-1,r=t.length;e=e||Array(r);for(;++n<r;)e[n]=t[n];return e}(t,l)}else{var O=ue(t),P=O==g||O==_;if(_e(t))return function(t,e){if(e)return t.slice();var n=t.length,r=dt?dt(n):new t.constructor(n);return t.copy(r),r}(t,!!p);if(O==E||O==c||P&&!a){if(l=d||P?{}:function(t){return"function"!=typeof t.constructor||le(t)?{}:$t(gt(t))}(t),!p)return d?function(t,e){return te(t,ae(t),e)}(t,function(t,e){return t&&te(e,Me(e),t)}(l,t)):function(t,e){return te(t,se(t),e)}(t,function(t,e){return t&&te(e,Ce(e),t)}(l,t))}else{if(!G[O])return a?t:{};l=function(t,e,n){var r=t.constructor;switch(e){case D:return Qt(t);case f:case h:return new r(+t);case T:return function(t,e){var n=e?Qt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case x:case j:case L:case R:case I:case $:case S:case F:return function(t,e){var n=e?Qt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case y:return new r;case v:case C:return new r(t);case w:return function(t){var e=new t.constructor(t.source,k.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new r;case M:return o=t,It?Object(It.call(o)):{}}var o}(t,O,!!p)}}var H=(u=u||new Bt).get(t);if(H)return H;u.set(t,l),we(t)?t.forEach((function(r){l.add(Kt(r,e,n,r,t,u))})):be(t)&&t.forEach((function(r,o){l.set(o,Kt(r,e,n,o,t,u))}));var B=b?void 0:(m?d?re:ne:d?Me:Ce)(t);return function(t,e){for(var n=null==t?0:t.length,r=-1;++r<n&&!1!==e(t[r],r,t););}(B||t,(function(r,o){B&&(r=t[o=r]),Gt(l,o,Kt(r,e,n,o,t,u))})),l}function Yt(t,e,n){var r=e(t);return de(t)?r:X(r,n(t))}function Vt(t){return null==t?void 0===t?O:m:mt&&mt in Object(t)?function(t){var e=at.call(t,mt),n=t[mt],r=!1;try{t[mt]=void 0,r=!0}catch(t){}var o=ct.call(t);r&&(e?t[mt]=n:delete t[mt]);return o}(t):function(t){return ct.call(t)}(t)}function qt(t){return Ee(t)&&Vt(t)==c}function Xt(t,e,n,r,o){return t===e||(null==t||null==e||!Ee(t)&&!Ee(e)?t!=t&&e!=e:function(t,e,n,r,o,i){var u=de(t),p=de(e),g=u?l:ue(t),_=p?l:ue(e),m=(g=g==c?E:g)==E,b=(_=_==c?E:_)==E,O=g==_;if(O&&_e(t)){if(!_e(e))return!1;u=!0,m=!1}if(O&&!m)return i=i||new Bt,u||Ae(t)?ee(t,e,n,r,o,i):function(t,e,n,r,o,i,u){switch(n){case T:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!i(new ht(t),new ht(e)));case f:case h:case v:return fe(+t,+e);case d:return t.name==e.name&&t.message==e.message;case w:case C:return t==e+"";case y:var c=Z;case A:var l=r&s;if(c=c||Q,t.size!=e.size&&!l)return!1;var p=u.get(t);if(p)return p==e;r|=a,u.set(t,e);var g=ee(c(t),c(e),r,o,i,u);return u.delete(t),g;case M:if(It)return It.call(t)==It.call(e)}return!1}(t,e,g,n,r,o,i);if(!(n&s)){var P=m&&at.call(t,"__wrapped__"),N=b&&at.call(e,"__wrapped__");if(P||N){var x=P?t.value():t,j=N?e.value():e;return i=i||new Bt,o(x,j,n,r,i)}}if(!O)return!1;return i=i||new Bt,function(t,e,n,r,o,i){var a=n&s,u=ne(t),c=u.length,l=ne(e).length;if(c!=l&&!a)return!1;var p=c;for(;p--;){var f=u[p];if(!(a?f in e:at.call(e,f)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var d=!0;i.set(t,e),i.set(e,t);var g=!!a;for(;++p<c;){f=u[p];var _=t[f],y=e[f],v=void 0;if(r&&(v=a?r(y,_,f,e,t,i):r(_,y,f,t,e,i)),!(void 0===v?_===y||o(_,y,n,r,i):v)){d=!1;break}g=g||"constructor"==f}if(d&&!g){var m=t.constructor,E=e.constructor;m!=E&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof E&&E instanceof E)&&(d=!1)}return i.delete(t),i.delete(e),d}(t,e,n,r,o,i)}(t,e,n,r,Xt,o))}function Zt(t){return!(!me(t)||(e=t,ut&&ut in e))&&(ye(t)?lt:H).test(pe(t));var e}function Jt(t){if(!me(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=le(t),n=[];for(var r in t)("constructor"!=r||!e&&at.call(t,r))&&n.push(r);return n}function Qt(t){var e=new(0,t.constructor)(t.byteLength);return new ht(e).set(new ht(t)),e}function te(t,e,n,r){var o=!n;n=o?{}:n;for(var i=-1,s=e.length;++i<s;){var a=e[i],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),o?Wt(n,a,u):Gt(n,a,u)}return n}function ee(t,e,n,r,o,i){var u=n&s,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var p=i.get(t);if(p&&i.get(e))return p==e;var f=-1,h=!0,d=n&a?new Ht:void 0;i.set(t,e),i.set(e,t);for(var g=function(){var s=t[f],a=e[f],c=void 0;if(r&&(c=u?r(a,s,f,e,t,i):r(s,a,f,t,e,i)),void 0!==c)return c?"continue":(h=!1,"break");if(d){if(!function(t,e){for(var n=null==t?0:t.length,r=-1;++r<n;)if(e(t[r],r,t))return!0;return!1}(e,(function(t,e){if(a=e,!d.has(a)&&(s===t||o(s,t,n,r,i)))return d.push(e);var a})))return h=!1,"break"}else if(s!==a&&!o(s,a,n,r,i))return h=!1,"break"};++f<c;){if("break"===g())break}return i.delete(t),i.delete(e),h}function ne(t){return Yt(t,Ce,se)}function re(t){return Yt(t,Me,ae)}function oe(t,e){var n,r,o=t.__DATA__;return("string"===(r=typeof(n=e))||"number"===r||"symbol"===r||"boolean"===r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function ie(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Zt(n)?n:void 0}var se=Et?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=null==t?0:t.length,r=[],o=-1,i=0;++o<n;){var s=t[o];e(s,o,t)&&(r[i++]=s)}return r}(Et(t),(function(e){return yt.call(t,e)})))}:Oe,ae=Et?function(t){for(var e=[];t;)X(e,se(t)),t=gt(t);return e}:Oe,ue=Vt;function ce(t,e){var n=typeof t;return!!(e=null==e?u:e)&&("number"===n||"symbol"!==n&&B.test(t))&&t>-1&&t%1==0&&t<e}function le(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ot)}function pe(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function fe(t,e){return t===e||t!=t&&e!=e}(At&&ue(new At(new ArrayBuffer(1)))!==T||Ct&&ue(new Ct)!==y||Mt&&"[object Promise]"!==ue(Mt.resolve())||Ot&&ue(new Ot)!==A||Pt&&ue(new Pt)!==P)&&(ue=function(t){var e=Vt(t),n=e===E?t.constructor:void 0,r=n?pe(n):"";if(r)switch(r){case Tt:return T;case Nt:return y;case xt:return"[object Promise]";case jt:return A;case Lt:return P}return e});var he=qt(function(){return arguments}())?qt:function(t){return Ee(t)&&at.call(t,"callee")&&!yt.call(t,"callee")},de=Array.isArray;function ge(t){return null!=t&&ve(t.length)&&!ye(t)}var _e=bt||function(){return!1};function ye(t){if(!me(t))return!1;var e=Vt(t);return e===g||e===_||e===p||e===b}function ve(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}function me(t){var e=typeof t;return null!=t&&("object"===e||"function"===e)}function Ee(t){return null!=t&&"object"==typeof t}var be=function(t){return Ee(t)&&ue(t)==y},we=function(t){return Ee(t)&&ue(t)==A},Ae=function(t){return Ee(t)&&ve(t.length)&&!!z[Vt(t)]};function Ce(t){return ge(t)?zt(t):function(t){if(!le(t))return wt(t);var e=[];for(var n in Object(t))at.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}function Me(t){return ge(t)?zt(t,!0):Jt(t)}function Oe(){return[]}var Pe={'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;"};function De(t){return Pe[t]}e.default={clone:function(t){return Kt(t,r|i)},equals:function(t,e){return Xt(t,e)},encodeHtml:function(t){return null===t?null:(t+"").replace(/[&"'<>]/g,De)}}}).call(this,n(11),n(28)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.metadata={},this.attributes=[],this.prefix="c"}return t.prototype.getMetadata=function(t){return t?this.metadata[t]:null},t.prototype.getPrefix=function(){return this.prefix},t.prototype.getAttributes=function(){return this.attributes.slice()},t.prototype.withMetadata=function(t,e){this.metadata[t]=e},t.prototype.withAttribute=function(t){this.attributes.push(t)},t.prototype.withPrefix=function(t){this.prefix=t},t}(),o=function(){function t(){this.instance=new r}return t.prototype.withMetadata=function(t,e){return this.instance.withMetadata(t,e),this},t.prototype.withAttribute=function(t){return this.instance.withAttribute(t),this},t.prototype.withPrefix=function(t){return this.instance.withPrefix(t),this},t.prototype.build=function(){return this.instance},t}();e.ComponentConfigBuilder=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(2)),i=function(){function t(t){this.expression=t,this.logger=o.default.getLogger("Getter: "+t)}return t.prototype.get=function(t){var e='"use strict"; '+t.getCode()+" return ("+this.expression+");",n=null;try{n=Function(e).apply({},[t.getItems()])}catch(t){this.logInvocationError(e,t)}return n},t.prototype.logInvocationError=function(t,e){this.logger.error("\nAn exception ("+e.name+") was thrown invoking the element mediator expression: "+this.expression+"\n\nIn context:\n"+t+"\n\nException message: "+e.message+"\n\n",e)},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(3)),i=20,s=function(){function t(t,e){if(t.length<i)for(var n=i-t.length;n>0;)t+=" ",--n;this.name=t,this.loggerService=e}return t.prototype.trace=function(t,e){this.loggerService.log(this,o.default.TRACE,t,e)},t.prototype.ifTrace=function(t,e){this.isTrace()&&this.trace(t(),e)},t.prototype.debug=function(t,e){this.loggerService.log(this,o.default.DEBUG,t,e)},t.prototype.ifDebug=function(t,e){this.isDebug()&&this.debug(t(),e)},t.prototype.info=function(t,e){this.loggerService.log(this,o.default.INFO,t,e)},t.prototype.ifInfo=function(t,e){this.isInfo()&&this.info(t(),e)},t.prototype.warn=function(t,e){this.loggerService.log(this,o.default.WARN,t,e)},t.prototype.ifWarn=function(t,e){this.isWarn()&&this.warn(t(),e)},t.prototype.error=function(t,e){this.loggerService.log(this,o.default.ERROR,t,e)},t.prototype.ifError=function(t,e){this.isError()&&this.error(t(),e)},t.prototype.fatal=function(t,e){this.loggerService.log(this,o.default.FATAL,t,e)},t.prototype.ifFatal=function(t,e){this.isFatal()&&this.fatal(t(),e)},t.prototype.isTrace=function(){return this.loggerService.isTrace()},t.prototype.isDebug=function(){return this.loggerService.isDebug()},t.prototype.isInfo=function(){return this.loggerService.isInfo()},t.prototype.isWarn=function(){return this.loggerService.isWarn()},t.prototype.isError=function(){return this.loggerService.isError()},t.prototype.isFatal=function(){return this.loggerService.isFatal()},t.prototype.isDisable=function(){return this.loggerService.isDisable()},t.prototype.getName=function(){return this.name},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(21)),i=r(n(3)),s=r(n(22)),a=r(n(7)),u=function(){function t(){this.level=i.default.INFO,this.outputStrategy=new o.default,this.logger=new a.default("LoggerService",this)}return t.prototype.log=function(t,e,n,r){e>=this.level&&e!==i.default.DISABLE&&this.outputStrategy.log(t,e,n,r)},t.prototype.setLevel=function(t){this.level=t,this.log(this.logger,i.default.DEBUG,"Logging level: "+s.default.stringValueOf(t))},t.prototype.isTrace=function(){return i.default.TRACE>=this.level},t.prototype.isDebug=function(){return i.default.DEBUG>=this.level},t.prototype.isInfo=function(){return i.default.INFO>=this.level},t.prototype.isWarn=function(){return i.default.WARN>=this.level},t.prototype.isError=function(){return i.default.ERROR>=this.level},t.prototype.isFatal=function(){return i.default.FATAL>=this.level},t.prototype.isDisable=function(){return i.default.DISABLE>=this.level},t.INSTANCE=new t,t}();e.default=u},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(2)),i=function(){function t(t){this.expression=t,this.logger=o.default.getLogger("Setter: "+t)}return t.prototype.set=function(t,e){var n='"use strict"; '+t.getCode()+" "+this.expression+" = arguments[1];";try{Function(n).apply({},[t.getItems(),e])}catch(t){this.logInvocationError(n,t)}},t.prototype.logInvocationError=function(t,e){this.logger.error("\nAn exception ("+e.name+") was thrown invoking the element mediator expression: "+this.expression+"\n\nIn context:\n"+t+"\n\nException message: "+e.message+"\n\n",e)},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=r(n(25)),s=function(){function t(t,e){this.globalEnabled=!1,this.listeners=[],this.listenersByChannel={},this.context=t,this.moduleInstance=e||o.Modules.getModule("DEFAULT")}return t.prototype.message=function(t,e,n){"Cydran$$Direct$$Internal$$Channel"===t?"enableGlobal"===e?this.enableGlobal():"disableGlobal"===e&&this.disableGlobal():this.listeners.forEach((function(r){t===r.getChannelName()&&r.receive(e,n)}))},t.prototype.broadcast=function(t,e,n){this.moduleInstance.broadcast(t,e,n)},t.prototype.broadcastGlobally=function(t,e,n){o.Modules.broadcast(t,e,n)},t.prototype.dispose=function(){this.disableGlobal(),this.listeners=[],this.listenersByChannel={}},t.prototype.on=function(t){var e=this;return{forChannel:function(n){return{invoke:function(r){e.listenTo(n,t,r)}}},invoke:function(n){e.listenTo(o.INTERNAL_CHANNEL_NAME,t,n)}}},t.prototype.listenTo=function(t,e,n){var r=this.listenersByChannel[t];r||(r=new i.default(t,this.context),this.globalEnabled&&this.moduleInstance.message("Cydran$$Direct$$Internal$$Channel","addListener",r),this.listeners.push(r)),r.register(e,n)},t.prototype.enableGlobal=function(){if(!this.globalEnabled){for(var t=0,e=this.listeners;t<e.length;t++){var n=e[t];this.moduleInstance.message("Cydran$$Direct$$Internal$$Channel","addListener",n)}this.globalEnabled=!0}},t.prototype.disableGlobal=function(){if(this.globalEnabled){for(var t=0,e=this.listeners;t<e.length;t++){var n=e[t];this.moduleInstance.message("Cydran$$Direct$$Internal$$Channel","removeListener",n)}this.globalEnabled=!1}},t}();e.default=s},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(3)),i=r(n(8)),s=function(){function t(){var e=this.constructor;if(!(this instanceof t))throw TypeError(e.name+" should be an instance of Config")}return t.prototype.useTrace=function(){i.default.INSTANCE.setLevel(o.default.TRACE)},t.prototype.useDebug=function(){i.default.INSTANCE.setLevel(o.default.DEBUG)},t.prototype.useInfo=function(){i.default.INSTANCE.setLevel(o.default.INFO)},t.prototype.useWarn=function(){i.default.INSTANCE.setLevel(o.default.WARN)},t.prototype.useError=function(){i.default.INSTANCE.setLevel(o.default.ERROR)},t.prototype.useFatal=function(){i.default.INSTANCE.setLevel(o.default.FATAL)},t.prototype.useDisable=function(){i.default.INSTANCE.setLevel(o.default.DISABLE)},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5);e.ComponentConfigBuilder=i.ComponentConfigBuilder;var s=n(0);e.Component=s.Component,e.ElementMediator=s.ElementMediator,e.Events=s.Events,e.Modules=s.Modules;var a=r(n(12));e.CydranConfig=a;var u=o(n(2));e.LoggerFactory=u.default,n(35),n(48);var c=o(n(10));e.PubSub=c.default;var l=o(n(49));e.Stage=l.default;var p="cydran",f=window[p];e.noConflict=function(){var t=window[p];return window[p]=f,t}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(6)),i=r(n(9)),s=function(){function t(t){this.getter=new o.default(t),this.setter=new i.default(t)}return t.prototype.get=function(t){return this.getter.get(t)},t.prototype.set=function(t,e){this.setter.set(t,e)},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(3)),i=function(){function t(){}return t.getNow=function(){var t=new Date;return t.getUTCFullYear()+"-"+t.getUTCMonth()+":"+t.getUTCDate()+":"+t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds()+":"+t.getUTCMilliseconds()},t.prototype.log=function(e,n,r,i){if(n!==o.default.DISABLE){var s=t.getNow()+" "+n+" ["+e.getName()+"]",a=r instanceof Error,u=!(i instanceof Error)&&(null!==i&&i);if(n>=o.default.WARN){var c=a?r.stack:r,l=void 0;l=i instanceof Error?i.stack:a?"":"- FYI ONLY: ";var p=a?"":i?" - %s":"";switch(n){case o.default.WARN:console.warn("%c"+s+p,"color:#ff9400;",c,l);break;case o.default.ERROR:case o.default.FATAL:default:console.error(s+p,c,l)}}else switch(n){case o.default.TRACE:u?console.trace("%c"+s,"color:#00752d;",r):console.info("%c"+s,"color:#ff9400;",r);break;case o.default.DEBUG:console.debug("%c"+s,"color:#00752d;",r);break;case o.default.INFO:console.info("%c"+s,"color:#2d57ca;",r);break;default:console.log(s,r)}}},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(3)),i=function(){function t(){}return t.valueOf=function(t){return o.default[t]},t.stringValueOf=function(t){return o.default[t]},t.getKeys=function(){for(var t=[],e=0,n=Object.keys(o.default);e<n.length;e++){var r=n[e];this.rx.test(r)&&(t[r]=this.stringValueOf(Number.parseInt(r,10)))}return t},t.values=function(){return this.getKeys().map((function(t){return o.default[t]}))},t.size=function(){return this.getKeys().length},t.rx=/\d+/,t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.major=0,this.minor=0,this.micro=0}return t.prototype.generate=function(){var e=this.major+"-"+this.minor+"-"+this.micro;return this.micro++,this.micro>t.MAX_VALUE&&(this.micro=0,this.minor++),this.minor>t.MAX_VALUE&&(this.minor=0,this.major++),e},t.INSTANCE=new t,t.MAX_VALUE=9007199254740989,t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.state={},this.propagateUp=!!t}return t.up=function(e){return e||new t(!0)},t.down=function(e){return e||new t(!1)},t.prototype.mark=function(t){t&&(this.state[t]=t)},t.prototype.seen=function(t){return!(!t||!this.state[t])},t.prototype.isPropagateUp=function(){return this.propagateUp},t.prototype.isPropagateDown=function(){return!this.propagateUp},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.mappings={},this.channelName=t,this.context=e}return t.prototype.receive=function(t,e){var n=this.mappings[t];if(n)for(var r=0,o=n;r<o.length;r++){o[r].call(this.context,e)}},t.prototype.register=function(t,e){this.mappings[t]||(this.mappings[t]=[]),this.mappings[t].push(e)},t.prototype.getChannelName=function(){return this.channelName},t.prototype.dispose=function(){this.mappings={},this.context=null},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(6)),i=r(n(27)),s=r(n(2)),a=r(n(4)),u=r(n(9)),c=function(t){return t},l=function(){function t(t,e,n){this.digested=!1,this.logger=s.default.getLogger("ModelMediator: "+e),this.model=t,this.expression=e,this.scope=n,this.previous=null,this.context={},this.digestCallbackContext={},this.target=null,this.digestCallback=null,this.watchDispatchPending=!1,this.reducerFn=c,this.invoker=new i.default(e),this.getter=new o.default(e),this.setter=new u.default(e)}return t.prototype.invoke=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.invoker.invoke(this.scope,t)},t.prototype.get=function(){return this.getter.get(this.scope)},t.prototype.set=function(t){this.setter.set(this.scope,t)},t.prototype.evaluate=function(t){if(!this.target)return!1;var e=!1,n=this.get(),r=this.reducerFn(n);return this.digested?a.default.equals(this.previousFragment,r)?this.logger.trace("Not different."):(this.logger.isTrace()&&this.logger.trace({current:n,previous:this.previous}),this.logger.trace("Invoking listener"),this.swap(n,r),e=!0):(this.swap(n,r),e=!0,this.digested=!0),e},t.prototype.notifyWatcher=function(t){this.watchDispatchPending&&(this.target.apply(this.context,[this.watchPrevious,this.watchCurrent,t]),this.watchDispatchPending=!1)},t.prototype.watch=function(t,e){this.context=t,this.target=e},t.prototype.onDigest=function(t,e){this.digestCallbackContext=t,this.digestCallback=e},t.prototype.dispose=function(){this.model=null,this.previous=null,this.context=null,this.target=null,this.digestCallbackContext=null,this.digestCallback=null,this.watchPrevious=null,this.watchCurrent=null,this.watchDispatchPending=!1},t.prototype.executeCallback=function(t){null!==this.digestCallback&&this.digestCallback.call(this.digestCallbackContext,t)},t.prototype.setReducer=function(t){this.reducerFn=null===t?c:t},t.prototype.getExpression=function(){return this.expression},t.prototype.swap=function(t,e){var n=a.default.clone(t),r=a.default.clone(e);this.watchPrevious=this.previous,this.watchCurrent=t,this.watchDispatchPending=!0,this.previous=n,this.previousFragment=r},t.prototype.logInvocationError=function(t,e){this.logger.error("\nAn exception ("+e.name+") was thrown invoking the element mediator expression: "+this.expression+"\n\nIn context:\n"+t+"\n\nException message: "+e.message+"\n\n",e)},t}();e.default=l},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(2)),i=function(){function t(t){this.expression=t,this.logger=o.default.getLogger("Invoker: "+t)}return t.prototype.invoke=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r='"use strict"; '+t.getCode()+" var args = arguments[1]; ("+this.expression+");";try{Function(r).apply({},[t.getItems(),e])}catch(t){this.logInvocationError(r,t)}},t.prototype.logInvocationError=function(t,e){this.logger.error("\nAn exception ("+e.name+") was thrown invoking the element mediator expression: "+this.expression+"\n\nIn context:\n"+t+"\n\nException message: "+e.message+"\n\n",e)},t}();e.default=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.setWindow=function(e){t.window=e},t.getWindow=function(){return t.window},t}();n.setWindow(t.window),e.default=n}).call(this,n(11))},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(31)),i=function(){function t(){this.factories={}}return t.prototype.get=function(t){var e=null;return this.factories[t]&&(e=this.factories[t].get()),e},t.prototype.registerConstant=function(t,e){this.registerFactory(t,new a(e))},t.prototype.registerPrototype=function(t,e){this.registerFactory(t,new u(e))},t.prototype.registerSingleton=function(t,e){this.registerFactory(t,new c(e))},t.prototype.registerFactory=function(t,e){if(t&&e){if(this.factories[t])throw new o.default("'%id%' key is considered unique and already exists",{"%id%":t});this.factories[t]=e}},t}(),s=function(){function t(){this.defaultStrategy=new i,this.strategies=[this.defaultStrategy]}return t.prototype.get=function(t){for(var e=0,n=null;!n&&e<this.strategies.length;)n=this.strategies[e].get(t),e++;return n},t.prototype.registerConstant=function(t,e){return this.defaultStrategy.registerConstant(t,e),this},t.prototype.registerPrototype=function(t,e){return this.defaultStrategy.registerPrototype(t,e),this},t.prototype.registerSingleton=function(t,e){return this.defaultStrategy.registerSingleton(t,e),this},t.prototype.addStrategy=function(t){t&&this.strategies.push(t)},t.INSTANCE=new t,t}();e.RegistryImpl=s;var a=function(){function t(t){this.instance=t}return t.prototype.get=function(){return this.instance},t}(),u=function(){function t(t){this.classInstance=t}return t.prototype.get=function(){return new this.classInstance},t}(),c=function(){function t(t){this.classInstance=t}return t.prototype.get=function(){return this.instance||(this.instance=new this.classInstance),this.instance},t}()},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(33)),i={i:"i",item:"item",m:"m",model:"model",p:"p",parent:"parent"},s=new RegExp(/^[a-zA-Z\$\_][a-zA-Z0-9\$\_]*$/),a=function(){function t(t){this.children=[],this.localItems={},this.items={},this.code="",this.parent=null,this.restricted=null==t||t}return t.prototype.setParent=function(t){t&&(this.parent&&this.parent.removeChild(this),this.parent=t,this.parent.addChild(this),this.refresh())},t.prototype.addChild=function(t){t&&this.children.push(t)},t.prototype.removeChild=function(t){var e=this.children.indexOf(t);e>=0&&this.children.splice(e,1)},t.prototype.getItems=function(){return this.items},t.prototype.getCode=function(){return this.code},t.prototype.add=function(t,e){this.checkName(t),this.localItems[t]=e,this.refresh(),this.refreshChildren()},t.prototype.remove=function(t){this.checkName(t),delete this.localItems[t],this.refresh(),this.refreshChildren()},t.prototype.checkName=function(t){if(!s.test(t))throw new o.default("Only objects with names containing letters and numbers and starting with a letter are allowed.");if(this.restricted&&i[t])throw new o.default(t+" is a reserved name in the scope.")},t.prototype.refresh=function(){if(this.items={},this.parent){var t=this.parent.getItems();for(var e in t)t.hasOwnProperty(e)&&(this.items[e]=t[e])}for(var e in this.localItems)this.localItems.hasOwnProperty(e)&&(this.items[e]=this.localItems[e]);this.refreshCode()},t.prototype.refreshCode=function(){for(var t in this.code="",this.items)if(this.items.hasOwnProperty(t)){var e="var "+t+" = arguments[0]['"+t+"'];\n";this.code+=e}},t.prototype.refreshChildren=function(){for(var t=0,e=this.children;t<e.length;t++){e[t].refresh()}},t}();e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var r=this.constructor;if(!r)throw r+i.NEWI;return t.call(this,e,n)||this}return o(e,t),e}(i.CydranError);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.value=0}return t.prototype.next=function(){return this.value>=9007199254740989&&(this.value=-1),this.value++,this.value},t.INSTANCE=new t,t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=r(n(36));o.Mvvm.register(i.default.KEY,["input"],i.default);var s=r(n(37));o.Mvvm.register(s.default.KEY,["*"],s.default);var a=r(n(38));o.Mvvm.register(a.default.KEY,["*"],a.default);var u=r(n(39));o.Mvvm.register(u.default.KEY,["*"],u.default);var c=r(n(40));o.Mvvm.register(c.default.KEY,["*"],c.default);var l=r(n(41));o.Mvvm.register(l.default.KEY,["*"],l.default);var p=r(n(42));o.Mvvm.register(p.default.KEY,["*"],p.default);var f=r(n(43));o.Mvvm.register(f.default.KEY,["select"],f.default);var h=r(n(44));o.Mvvm.register(h.default.KEY,["textarea"],h.default);var d=r(n(45));o.Mvvm.register(d.default.KEY,["input"],d.default);var g=r(n(46));o.Mvvm.register(g.default.KEY,["*"],g.default);var _=r(n(47));o.Mvvm.register("repeat",["*"],_.default)},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){this.getEl().checked=!e},e.KEY="checked",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){for(var n=[],r=e||{},o=0,i=(this.getEl().className||"").trim().split(" ");o<i.length;o++){var s=i[o];r.hasOwnProperty(s)||n.push(s)}for(var a in r)r.hasOwnProperty(a)&&r[a]&&n.push(a);this.getEl().className=n.join(" ")},e.KEY="class",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=i(n(4)),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){this.getEl().innerHTML=a.default.encodeHtml(e)},e.KEY="content",e}(s.ElementMediator);e.default=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){this.getEl().disabled=!e},e.KEY="enabled",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){this.getEl().readOnly=e},e.KEY="readonly",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){if(null!==e)for(var n in e)e.hasOwnProperty(n)&&(this.getEl().style[n]=e[n])},e.KEY="style",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.bridge("focusout"),this.listenTo("dom","focusout",this.handleFocusout),this.shouldFocus=!1,this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.handleFocusout=function(t){this.shouldFocus&&this.getEl().focus()},e.prototype.onTargetChange=function(t,e){this.shouldFocus=e},e.KEY="force-focus",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.bridge("input"),this.listenTo("dom","input",this.handleInput),this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.handleInput=function(t){var e=this;if(this.getEl().multiple){for(var n=[],r=0;r<this.getEl().selectedOptions.length;r++){var o=this.getEl().selectedOptions.item(r).getAttribute("value");n.push(o)}this.$apply((function(){e.getModelMediator().set(n)}),[],null)}else this.$apply((function(){e.getModelMediator().set(e.getEl().value)}),[],null)},e.prototype.onTargetChange=function(t,e){if(this.getEl().multiple){e=null===e?[]:e;for(var n=0;n<this.getEl().options.length;n++){var r=this.getEl().options.item(n);r.selected=e.includes(r.value)}}else this.getEl().value=e},e.KEY="model",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.bridge("input"),this.listenTo("dom","input",this.handleInput),this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.handleInput=function(t){var e=this;this.$apply((function(){e.getModelMediator().set(e.getEl().value)}),[],null)},e.prototype.onTargetChange=function(t,e){this.getEl().value=e},e.KEY="model",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.bridge("input");var t="radio"===this.getEl().type.toLowerCase();this.listenTo("dom","input",t?this.handleRadioInput:this.handleInput),this.getModelMediator().watch(this,t?this.onRadioTargetChange:this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.handleInput=function(t){var e=this;this.$apply((function(){e.getModelMediator().set(e.getEl().value)}),[],null)},e.prototype.handleRadioInput=function(t){var e=this;this.getEl().checked&&this.$apply((function(){e.getModelMediator().set(e.getEl().value)}),[],null)},e.prototype.onTargetChange=function(t,e){this.getEl().value=e},e.prototype.onRadioTargetChange=function(t,e){this.getEl().value===e&&(this.getEl().checked=!0)},e.KEY="model",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wire=function(){this.getModelMediator().watch(this,this.onTargetChange)},e.prototype.unwire=function(){},e.prototype.onTargetChange=function(t,e){this.getEl().hidden=!e},e.KEY="visible",e}(n(0).ElementMediator);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=i(n(2)),u=i(n(4)),c=(a.default.getLogger("RepeatElementMediator"),s.Properties.getWindow().document),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialized=!1,e}return o(e,t),e.prototype.wire=function(){this.map={},this.empty=null,this.ids=[],this.itemTemplate=null,this.getModelMediator().setReducer((function(t){return t.items})),this.getModelMediator().watch(this,this.onTargetChange),this.getModelMediator().onDigest(this,this.onDigest)},e.prototype.unwire=function(){for(var t in this.empty&&this.empty.dispose(),this.first&&this.first.dispose(),this.last&&this.last.dispose(),this.map){if(this.map.hasOwnProperty(t))this.map[t].dispose()}this.empty=null,this.map={}},e.prototype.onDigest=function(t){if(t.isPropagateDown())for(var e=0,n=this.ids;e<n.length;e++){var r=n[e];this.map[r].message(s.INTERNAL_DIRECT_CHANNEL_NAME,"digest",t)}else this.getLogger().trace("Not propagating to children")},e.prototype.onTargetChange=function(t,e,n){if(!this.initialized){for(var r=this.getEl().children,o=0;o<r.length;o++){var i=r[o];if("template"===i.nodeName.toLowerCase()){var a=i;if(a.innerHTML){var l=a.innerHTML.trim(),p=a.getAttribute("type");"empty"===p&&(this.empty=new s.Component(l),this.empty.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",this.getParent())),"first"===p&&(this.first=new s.Component(l),this.first.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",this.getParent())),"after"===p&&(this.last=new s.Component(l),this.last.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",this.getParent())),"item"===p&&(this.itemTemplate=l)}}}this.idKey=e.idKey||"id",this.itemComponentName=e.item,e.empty&&!this.empty&&(this.empty=this.getComponent(e.empty),this.empty.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",this.getParent())),e.first&&!this.first&&(this.first=this.getComponent(e.first),this.first.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",this.getParent())),e.last&&!this.last&&(this.last=this.getComponent(e.last),this.last.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",this.getParent())),this.empty&&this.initAsRepeatable(this.empty),this.first&&this.initAsRepeatable(this.first),this.last&&this.initAsRepeatable(this.last),this.initialized=!0}for(var f=[],h=0,d=e.items;h<d.length;h++){var g=(E=d[h])[this.idKey]+"";f.push(g)}if(!u.default.equals(this.ids,f)){for(var _={},y=[],v=0,m=e.items;v<m.length;v++){g=(E=m[v])[this.idKey]+"";var E,b=this.map[g]?this.map[g]:this.create(E);_[g]=b,y.push(b),delete this.map[g]}for(var w in this.map){if(this.map.hasOwnProperty(w))(b=this.map[w]).dispose(),delete this.map[w]}this.map=_;for(var A=this.getEl();A.firstChild;)A.removeChild(A.firstChild);if(0===y.length)this.empty&&A.appendChild(this.empty.getEl());else{var C=c.createDocumentFragment();this.first&&C.appendChild(this.first.getEl());for(var M=0,O=y;M<O.length;M++){b=O[M];C.appendChild(b.getEl())}this.last&&C.appendChild(this.last.getEl()),A.appendChild(C)}}for(var P=0,D=f;P<D.length;P++){g=D[P];this.map[g].message(s.INTERNAL_DIRECT_CHANNEL_NAME,"digest",n)}this.ids=f},e.prototype.getComponent=function(t){return this.getParent().get(t)},e.prototype.create=function(t){var e=null===this.itemTemplate?this.getComponent(this.itemComponentName):new s.Component(this.itemTemplate);return this.initAsRepeatable(e),e.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setData",t),e.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",this.getParent()),e},e.prototype.initAsRepeatable=function(t){t.message(s.INTERNAL_DIRECT_CHANNEL_NAME,"setMode","repeatable")},e}(s.ElementMediator);e.default=l},function(t,e,n){},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=r(n(12)),s=r(n(50)),a=r(n(2)),u=function(){function t(t){this.logger=a.default.getLogger("Stage"),this.started=!1,this.rootSelector=t,this.initializers=[],this.root=null}return t.prototype.withInitializer=function(t){return this.initializers.push(t),this},t.prototype.start=function(){var t=this;this.logger.debug("Start Requested"),this.started?this.logger.debug("Aleady Started"):(this.logger.debug("Cydran Starting"),s.default.domReady((function(){return t.domReady()})))},t.prototype.setComponent=function(t){return this.root.setChild("body",t),this},t.prototype.get=function(t){return this.root.get(t)},t.prototype.getConfig=function(){return new i.default},t.prototype.domReady=function(){this.logger.debug("DOM Ready"),this.root=new o.StageComponent(this.rootSelector),this.root.message(o.INTERNAL_DIRECT_CHANNEL_NAME,"setParent",null),this.started=!0,this.logger.debug("Running initializers");for(var t=0,e=this.initializers;t<e.length;t++){e[t].apply(this)}this.logger.debug("Startup Complete")},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o={domReady:function(t){var e=!1,n=r.Properties.getWindow(),o=n.document,i=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",s),n.removeEventListener("load",s)):(n.detachEvent("onreadystatechange",s),n.detachEvent("onload",s))},s=function(){e||!o.addEventListener&&"load"!==event.type&&"complete"!==o.readyState||(e=!0,i(),t())};if("complete"===o.readyState)t();else if(o.addEventListener)o.addEventListener("DOMContentLoaded",s),n.addEventListener("load",s);else{o.attachEvent("onreadystatechange",s),n.attachEvent("onload",s);var a=!1;try{a=!(null!=n.frameElement||!o.documentElement)}catch(t){}a&&a.doScroll&&function n(){if(!e){try{a.doScroll("left")}catch(t){return setTimeout(n,50)}e=!0,i(),t()}}()}}};e.default=o}])}));
//# sourceMappingURL=cydran.min.js.map